// @bun
var n4=Object.create;var{getPrototypeOf:i4,defineProperty:i1,getOwnPropertyNames:a4}=Object;var o4=Object.prototype.hasOwnProperty;var i0=(f,w,S)=>{S=f!=null?n4(i4(f)):{};let v=w||!f||!f.__esModule?i1(S,"default",{value:f,enumerable:!0}):S;for(let q of a4(f))if(!o4.call(v,q))i1(v,q,{get:()=>f[q],enumerable:!0});return v};var a0=(f,w)=>()=>(w||f((w={exports:{}}).exports,w),w.exports);var p=import.meta.require;var PS=a0((lB,eh)=>{var __dirname="/home/josedv/Dev/Projects/naturale-pos/node_modules/@prisma/client/runtime",__filename="/home/josedv/Dev/Projects/naturale-pos/node_modules/@prisma/client/runtime/library.js",g$=Object.create,zS=Object.defineProperty,B$=Object.getOwnPropertyDescriptor,W$=Object.getOwnPropertyNames,R$=Object.getPrototypeOf,G$=Object.prototype.hasOwnProperty,Wf=(f,w)=>()=>(w||f((w={exports:{}}).exports,w),w.exports),M0=(f,w)=>{for(var S in w)zS(f,S,{get:w[S],enumerable:!0})},fq=(f,w,S,v)=>{if(w&&typeof w=="object"||typeof w=="function")for(let q of W$(w))!G$.call(f,q)&&q!==S&&zS(f,q,{get:()=>w[q],enumerable:!(v=B$(w,q))||v.enumerable});return f},d=(f,w,S)=>(S=f!=null?g$(R$(f)):{},fq(w||!f||!f.__esModule?zS(S,"default",{value:f,enumerable:!0}):S,f)),X$=(f)=>fq(zS({},"__esModule",{value:!0}),f),c$=Wf((f,w)=>{var S=w.exports;w.exports.default=S;var v="\x1B[",q="\x1B]",h="\x07",H=";",$=process.env.TERM_PROGRAM==="Apple_Terminal";S.cursorTo=(j,b)=>{if(typeof j!="number")throw new TypeError("The `x` argument is required");return typeof b!="number"?v+(j+1)+"G":v+(b+1)+";"+(j+1)+"H"},S.cursorMove=(j,b)=>{if(typeof j!="number")throw new TypeError("The `x` argument is required");let J="";return j<0?J+=v+-j+"D":j>0&&(J+=v+j+"C"),b<0?J+=v+-b+"A":b>0&&(J+=v+b+"B"),J},S.cursorUp=(j=1)=>v+j+"A",S.cursorDown=(j=1)=>v+j+"B",S.cursorForward=(j=1)=>v+j+"C",S.cursorBackward=(j=1)=>v+j+"D",S.cursorLeft=v+"G",S.cursorSavePosition=$?"\x1B7":v+"s",S.cursorRestorePosition=$?"\x1B8":v+"u",S.cursorGetPosition=v+"6n",S.cursorNextLine=v+"E",S.cursorPrevLine=v+"F",S.cursorHide=v+"?25l",S.cursorShow=v+"?25h",S.eraseLines=(j)=>{let b="";for(let J=0;J<j;J++)b+=S.eraseLine+(J<j-1?S.cursorUp():"");return j&&(b+=S.cursorLeft),b},S.eraseEndLine=v+"K",S.eraseStartLine=v+"1K",S.eraseLine=v+"2K",S.eraseDown=v+"J",S.eraseUp=v+"1J",S.eraseScreen=v+"2J",S.scrollUp=v+"S",S.scrollDown=v+"T",S.clearScreen="\x1Bc",S.clearTerminal=process.platform==="win32"?`${S.eraseScreen}${v}0f`:`${S.eraseScreen}${v}3J${v}H`,S.beep=h,S.link=(j,b)=>[q,"8",H,H,b,h,j,q,"8",H,H,h].join(""),S.image=(j,b={})=>{let J=`${q}1337;File=inline=1`;return b.width&&(J+=`;width=${b.width}`),b.height&&(J+=`;height=${b.height}`),b.preserveAspectRatio===!1&&(J+=";preserveAspectRatio=0"),J+":"+j.toString("base64")+h},S.iTerm={setCwd:(j=process.cwd())=>`${q}50;CurrentDir=${j}${h}`,annotation:(j,b={})=>{let J=`${q}1337;`,O=typeof b.x<"u",g=typeof b.y<"u";if((O||g)&&!(O&&g&&typeof b.length<"u"))throw new Error("`x`, `y` and `length` must be defined when `x` or `y` is defined");return j=j.replace(/\|/g,""),J+=b.isHidden?"AddHiddenAnnotation=":"AddAnnotation=",b.length>0?J+=(O?[j,b.length,b.x,b.y]:[b.length,j]).join("|"):J+=j,J+h}}}),wq=Wf((f,w)=>{w.exports=(S,v=process.argv)=>{let q=S.startsWith("-")?"":S.length===1?"-":"--",h=v.indexOf(q+S),H=v.indexOf("--");return h!==-1&&(H===-1||h<H)}}),E$=Wf((f,w)=>{var S=p("os"),v=p("tty"),q=wq(),{env:h}=process,H;q("no-color")||q("no-colors")||q("color=false")||q("color=never")?H=0:(q("color")||q("colors")||q("color=true")||q("color=always"))&&(H=1),"FORCE_COLOR"in h&&(h.FORCE_COLOR==="true"?H=1:h.FORCE_COLOR==="false"?H=0:H=h.FORCE_COLOR.length===0?1:Math.min(parseInt(h.FORCE_COLOR,10),3));function $(J){return J===0?!1:{level:J,hasBasic:!0,has256:J>=2,has16m:J>=3}}function j(J,O){if(H===0)return 0;if(q("color=16m")||q("color=full")||q("color=truecolor"))return 3;if(q("color=256"))return 2;if(J&&!O&&H===void 0)return 0;let g=H||0;if(h.TERM==="dumb")return g;if(process.platform==="win32"){let B=S.release().split(".");return Number(B[0])>=10&&Number(B[2])>=10586?Number(B[2])>=14931?3:2:1}if("CI"in h)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some((B)=>(B in h))||h.CI_NAME==="codeship"?1:g;if("TEAMCITY_VERSION"in h)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(h.TEAMCITY_VERSION)?1:0;if(h.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in h){let B=parseInt((h.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(h.TERM_PROGRAM){case"iTerm.app":return B>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(h.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(h.TERM)||("COLORTERM"in h)?1:g}function b(J){let O=j(J,J&&J.isTTY);return $(O)}w.exports={supportsColor:b,stdout:$(j(!0,v.isatty(1))),stderr:$(j(!0,v.isatty(2)))}}),Q$=Wf((f,w)=>{var S=E$(),v=wq();function q(H){if(/^\d{3,4}$/.test(H)){let j=/(\d{1,2})(\d{2})/.exec(H);return{major:0,minor:parseInt(j[1],10),patch:parseInt(j[2],10)}}let $=(H||"").split(".").map((j)=>parseInt(j,10));return{major:$[0],minor:$[1],patch:$[2]}}function h(H){let{env:$}=process;if("FORCE_HYPERLINK"in $)return!($.FORCE_HYPERLINK.length>0&&parseInt($.FORCE_HYPERLINK,10)===0);if(v("no-hyperlink")||v("no-hyperlinks")||v("hyperlink=false")||v("hyperlink=never"))return!1;if(v("hyperlink=true")||v("hyperlink=always")||"NETLIFY"in $)return!0;if(!S.supportsColor(H)||H&&!H.isTTY||process.platform==="win32"||"CI"in $||"TEAMCITY_VERSION"in $)return!1;if("TERM_PROGRAM"in $){let j=q($.TERM_PROGRAM_VERSION);switch($.TERM_PROGRAM){case"iTerm.app":return j.major===3?j.minor>=1:j.major>3;case"WezTerm":return j.major>=20200620;case"vscode":return j.major>1||j.major===1&&j.minor>=72}}if("VTE_VERSION"in $){if($.VTE_VERSION==="0.50.0")return!1;let j=q($.VTE_VERSION);return j.major>0||j.minor>=50}return!1}w.exports={supportsHyperlink:h,stdout:h(process.stdout),stderr:h(process.stderr)}}),Y$=Wf((f,w)=>{var S=c$(),v=Q$(),q=(h,H,{target:$="stdout",...j}={})=>v[$]?S.link(h,H):j.fallback===!1?h:typeof j.fallback=="function"?j.fallback(h,H):`${h} (\u200B${H}\u200B)`;w.exports=(h,H,$={})=>q(h,H,$),w.exports.stderr=(h,H,$={})=>q(h,H,{target:"stderr",...$}),w.exports.isSupported=v.stdout,w.exports.stderr.isSupported=v.stderr}),Sq=Wf((f,w)=>{w.exports={name:"@prisma/engines-version",version:"6.3.0-17.acc0b9dd43eb689cbd20c9470515d719db10d0b0",main:"index.js",types:"index.d.ts",license:"Apache-2.0",author:"Tim Suchanek <suchanek@prisma.io>",prisma:{enginesVersion:"acc0b9dd43eb689cbd20c9470515d719db10d0b0"},repository:{type:"git",url:"https://github.com/prisma/engines-wrapper.git",directory:"packages/engines-version"},devDependencies:{"@types/node":"18.19.68",typescript:"4.9.5"},files:["index.js","index.d.ts"],scripts:{build:"tsc -d"}}}),vq=Wf((f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.enginesVersion=void 0,f.enginesVersion=Sq().prisma.enginesVersion}),A$=Wf((f,w)=>{w.exports={name:"dotenv",version:"16.4.7",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard",pretest:"npm run lint && npm run dts-check",test:"tap run --allow-empty-coverage --disable-coverage --timeout=60000","test:coverage":"tap run --show-full-coverage --timeout=60000 --coverage-report=lcov",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},funding:"https://dotenvx.com",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@types/node":"^18.11.3",decache:"^4.6.2",sinon:"^14.0.1",standard:"^17.0.0","standard-version":"^9.5.0",tap:"^19.2.0",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}}),z$=Wf((f,w)=>{var S=p("fs"),v=p("path"),q=p("os"),h=p("crypto"),H=A$(),$=H.version,j=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function b(X){let M={},x=X.toString();x=x.replace(/\r\n?/mg,`
`);let m;for(;(m=j.exec(x))!=null;){let Sf=m[1],T=m[2]||"";T=T.trim();let o=T[0];T=T.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),o==='"'&&(T=T.replace(/\\n/g,`
`),T=T.replace(/\\r/g,"\r")),M[Sf]=T}return M}function J(X){let M=U(X),x=y.configDotenv({path:M});if(!x.parsed){let o=new Error(`MISSING_DATA: Cannot parse ${M} for an unknown reason`);throw o.code="MISSING_DATA",o}let m=R(X).split(","),Sf=m.length,T;for(let o=0;o<Sf;o++)try{let u=m[o].trim(),l=c(x,u);T=y.decrypt(l.ciphertext,l.key);break}catch(u){if(o+1>=Sf)throw u}return y.parse(T)}function O(X){console.log(`[dotenv@${$}][INFO] ${X}`)}function g(X){console.log(`[dotenv@${$}][WARN] ${X}`)}function B(X){console.log(`[dotenv@${$}][DEBUG] ${X}`)}function R(X){return X&&X.DOTENV_KEY&&X.DOTENV_KEY.length>0?X.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function c(X,M){let x;try{x=new URL(M)}catch(u){if(u.code==="ERR_INVALID_URL"){let l=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw l.code="INVALID_DOTENV_KEY",l}throw u}let m=x.password;if(!m){let u=new Error("INVALID_DOTENV_KEY: Missing key part");throw u.code="INVALID_DOTENV_KEY",u}let Sf=x.searchParams.get("environment");if(!Sf){let u=new Error("INVALID_DOTENV_KEY: Missing environment part");throw u.code="INVALID_DOTENV_KEY",u}let T=`DOTENV_VAULT_${Sf.toUpperCase()}`,o=X.parsed[T];if(!o){let u=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${T} in your .env.vault file.`);throw u.code="NOT_FOUND_DOTENV_ENVIRONMENT",u}return{ciphertext:o,key:m}}function U(X){let M=null;if(X&&X.path&&X.path.length>0)if(Array.isArray(X.path))for(let x of X.path)S.existsSync(x)&&(M=x.endsWith(".vault")?x:`${x}.vault`);else M=X.path.endsWith(".vault")?X.path:`${X.path}.vault`;else M=v.resolve(process.cwd(),".env.vault");return S.existsSync(M)?M:null}function C(X){return X[0]==="~"?v.join(q.homedir(),X.slice(1)):X}function r(X){O("Loading env from encrypted .env.vault");let M=y._parseVault(X),x=process.env;return X&&X.processEnv!=null&&(x=X.processEnv),y.populate(x,M,X),{parsed:M}}function N(X){let M=v.resolve(process.cwd(),".env"),x="utf8",m=!!(X&&X.debug);X&&X.encoding?x=X.encoding:m&&B("No encoding is specified. UTF-8 is used by default");let Sf=[M];if(X&&X.path)if(!Array.isArray(X.path))Sf=[C(X.path)];else{Sf=[];for(let l of X.path)Sf.push(C(l))}let T,o={};for(let l of Sf)try{let Cw=y.parse(S.readFileSync(l,{encoding:x}));y.populate(o,Cw,X)}catch(Cw){m&&B(`Failed to load ${l} ${Cw.message}`),T=Cw}let u=process.env;return X&&X.processEnv!=null&&(u=X.processEnv),y.populate(u,o,X),T?{parsed:o,error:T}:{parsed:o}}function s(X){if(R(X).length===0)return y.configDotenv(X);let M=U(X);return M?y._configVault(X):(g(`You set DOTENV_KEY but you are missing a .env.vault file at ${M}. Did you forget to build it?`),y.configDotenv(X))}function gf(X,M){let x=Buffer.from(M.slice(-64),"hex"),m=Buffer.from(X,"base64"),Sf=m.subarray(0,12),T=m.subarray(-16);m=m.subarray(12,-16);try{let o=h.createDecipheriv("aes-256-gcm",x,Sf);return o.setAuthTag(T),`${o.update(m)}${o.final()}`}catch(o){let u=o instanceof RangeError,l=o.message==="Invalid key length",Cw=o.message==="Unsupported state or unable to authenticate data";if(u||l){let H0=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw H0.code="INVALID_DOTENV_KEY",H0}else if(Cw){let H0=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw H0.code="DECRYPTION_FAILED",H0}else throw o}}function a(X,M,x={}){let m=!!(x&&x.debug),Sf=!!(x&&x.override);if(typeof M!="object"){let T=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw T.code="OBJECT_REQUIRED",T}for(let T of Object.keys(M))Object.prototype.hasOwnProperty.call(X,T)?(Sf===!0&&(X[T]=M[T]),m&&B(Sf===!0?`"${T}" is already defined and WAS overwritten`:`"${T}" is already defined and was NOT overwritten`)):X[T]=M[T]}var y={configDotenv:N,_configVault:r,_parseVault:J,config:s,decrypt:gf,parse:b,populate:a};w.exports.configDotenv=y.configDotenv,w.exports._configVault=y._configVault,w.exports._parseVault=y._parseVault,w.exports.config=y.config,w.exports.decrypt=y.decrypt,w.exports.parse=y.parse,w.exports.populate=y.populate,w.exports=y}),_$=Wf((f,w)=>{w.exports=(S)=>{let v=S.match(/^[ \t]*(?=\S)/gm);return v?v.reduce((q,h)=>Math.min(q,h.length),1/0):0}}),M$=Wf((f,w)=>{var S=_$();w.exports=(v)=>{let q=S(v);if(q===0)return v;let h=new RegExp(`^[ \\t]{${q}}`,"gm");return v.replace(h,"")}}),qq=Wf((f,w)=>{w.exports=(S,v=1,q)=>{if(q={indent:" ",includeEmptyLines:!1,...q},typeof S!="string")throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof S}\``);if(typeof v!="number")throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof v}\``);if(typeof q.indent!="string")throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof q.indent}\``);if(v===0)return S;let h=q.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return S.replace(h,q.indent.repeat(v))}}),D$=Wf((f,w)=>{w.exports=({onlyFirst:S=!1}={})=>{let v=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(v,S?void 0:"g")}}),hq=Wf((f,w)=>{var S=D$();w.exports=(v)=>typeof v=="string"?v.replace(S(),""):v}),U$=Wf((f,w)=>{w.exports=(S={})=>{let v;if(S.repoUrl)v=S.repoUrl;else if(S.user&&S.repo)v=`https://github.com/${S.user}/${S.repo}`;else throw new Error("You need to specify either the `repoUrl` option or both the `user` and `repo` options");let q=new URL(`${v}/issues/new`),h=["body","title","labels","template","milestone","assignee","projects"];for(let H of h){let $=S[H];if($!==void 0){if(H==="labels"||H==="projects"){if(!Array.isArray($))throw new TypeError(`The \`${H}\` option should be an array`);$=$.join(",")}q.searchParams.set(H,$)}}return q.toString()},w.exports.default=w.exports}),Hq=Wf((f,w)=>{w.exports=function(){function S(v,q,h,H,$){return v<q||h<q?v>h?h+1:v+1:H===$?q:q+1}return function(v,q){if(v===q)return 0;if(v.length>q.length){var h=v;v=q,q=h}for(var H=v.length,$=q.length;H>0&&v.charCodeAt(H-1)===q.charCodeAt($-1);)H--,$--;for(var j=0;j<H&&v.charCodeAt(j)===q.charCodeAt(j);)j++;if(H-=j,$-=j,H===0||$<3)return $;var b=0,J,O,g,B,R,c,U,C,r,N,s,gf,a=[];for(J=0;J<H;J++)a.push(J+1),a.push(v.charCodeAt(j+J));for(var y=a.length-1;b<$-3;)for(r=q.charCodeAt(j+(O=b)),N=q.charCodeAt(j+(g=b+1)),s=q.charCodeAt(j+(B=b+2)),gf=q.charCodeAt(j+(R=b+3)),c=b+=4,J=0;J<y;J+=2)U=a[J],C=a[J+1],O=S(U,O,g,r,C),g=S(O,g,B,N,C),B=S(g,B,R,s,C),c=S(B,R,c,gf,C),a[J]=c,R=B,B=g,g=O,O=U;for(;b<$;)for(r=q.charCodeAt(j+(O=b)),c=++b,J=0;J<y;J+=2)U=a[J],a[J]=c=S(U,O,c,r,a[J+1]),O=U;return c}}()}),$q={};M0($q,{Debug:()=>Rq,Decimal:()=>L0,Extensions:()=>jq,MetricsClient:()=>Bh,PrismaClientInitializationError:()=>$f,PrismaClientKnownRequestError:()=>Bw,PrismaClientRustPanicError:()=>Ow,PrismaClientUnknownRequestError:()=>Mf,PrismaClientValidationError:()=>uf,Public:()=>bq,Sql:()=>Gw,createParam:()=>Z5,defineDmmfProperty:()=>bj,deserializeJsonResponse:()=>ES,deserializeRawResult:()=>sh,dmmfToRuntimeDataModel:()=>jj,empty:()=>_j,getPrismaClient:()=>w9,getRuntime:()=>zh,join:()=>zj,makeStrictEnum:()=>q9,makeTypedQueryFactory:()=>gj,objectEnumValues:()=>eq,raw:()=>Wh,serializeJsonQuery:()=>Jh,skip:()=>jh,sqltag:()=>Mj,warnEnvConflicts:()=>h9,warnOnce:()=>Dq});eh.exports=X$($q);var jq={};M0(jq,{defineExtension:()=>V$,getExtensionContext:()=>L$});function V$(f){return typeof f=="function"?f:(w)=>w.$extends(f)}function L$(f){return f}var bq={};M0(bq,{validator:()=>N$});function N$(...f){return(w)=>w}var X2={};M0(X2,{$:()=>Wq,bgBlack:()=>y$,bgBlue:()=>n$,bgCyan:()=>a$,bgGreen:()=>T$,bgMagenta:()=>i$,bgRed:()=>m$,bgWhite:()=>o$,bgYellow:()=>u$,black:()=>l$,blue:()=>B0,bold:()=>Ff,cyan:()=>_w,dim:()=>D0,gray:()=>n2,green:()=>E0,grey:()=>x$,hidden:()=>P$,inverse:()=>C$,italic:()=>F$,magenta:()=>I$,red:()=>Mw,reset:()=>K$,strikethrough:()=>k$,underline:()=>Uf,white:()=>r$,yellow:()=>U0});var c2,Jq,Oq,gq,Bq=!0;typeof process<"u"&&({FORCE_COLOR:c2,NODE_DISABLE_COLORS:Jq,NO_COLOR:Oq,TERM:gq}=process.env||{},Bq=process.stdout&&process.stdout.isTTY);var Wq={enabled:!Jq&&Oq==null&&gq!=="dumb"&&(c2!=null&&c2!=="0"||Bq)};function e(f,w){let S=new RegExp(`\\x1b\\[${w}m`,"g"),v=`\x1B[${f}m`,q=`\x1B[${w}m`;return function(h){return!Wq.enabled||h==null?h:v+(~(""+h).indexOf(q)?h.replace(S,q+v):h)+q}}var K$=e(0,0),Ff=e(1,22),D0=e(2,22),F$=e(3,23),Uf=e(4,24),C$=e(7,27),P$=e(8,28),k$=e(9,29),l$=e(30,39),Mw=e(31,39),E0=e(32,39),U0=e(33,39),B0=e(34,39),I$=e(35,39),_w=e(36,39),r$=e(37,39),n2=e(90,39),x$=e(90,39),y$=e(40,49),m$=e(41,49),T$=e(42,49),u$=e(43,49),n$=e(44,49),i$=e(45,49),a$=e(46,49),o$=e(47,49),p$=100,Ov=["green","yellow","blue","magenta","cyan","red"],W0=[],gv=Date.now(),d$=0,E2=typeof process<"u"?process.env:{};globalThis.DEBUG??=E2.DEBUG??"";globalThis.DEBUG_COLORS??=E2.DEBUG_COLORS?E2.DEBUG_COLORS==="true":!0;var R0={enable(f){typeof f=="string"&&(globalThis.DEBUG=f)},disable(){let f=globalThis.DEBUG;return globalThis.DEBUG="",f},enabled(f){let w=globalThis.DEBUG.split(",").map((q)=>q.replace(/[.+?^${}()|[\]\\]/g,"\\$&")),S=w.some((q)=>q===""||q[0]==="-"?!1:f.match(RegExp(q.split("*").join(".*")+"$"))),v=w.some((q)=>q===""||q[0]!=="-"?!1:f.match(RegExp(q.slice(1).split("*").join(".*")+"$")));return S&&!v},log:(...f)=>{let[w,S,...v]=f;(console.warn??console.log)(`${w} ${S}`,...v)},formatters:{}};function s$(f){let w={color:Ov[d$++%Ov.length],enabled:R0.enabled(f),namespace:f,log:R0.log,extend:()=>{}};return new Proxy((...v)=>{let{enabled:q,namespace:h,color:H,log:$}=w;if(v.length!==0&&W0.push([h,...v]),W0.length>p$&&W0.shift(),R0.enabled(h)||q){let j=v.map((J)=>typeof J=="string"?J:Z$(J)),b=`+${Date.now()-gv}ms`;gv=Date.now(),globalThis.DEBUG_COLORS?$(X2[H](Ff(h)),...j,X2[H](b)):$(h,...j,b)}},{get:(v,q)=>w[q],set:(v,q,h)=>w[q]=h})}var Rq=new Proxy(s$,{get:(f,w)=>R0[w],set:(f,w,S)=>R0[w]=S});function Z$(f,w=2){let S=new Set;return JSON.stringify(f,(v,q)=>{if(typeof q=="object"&&q!==null){if(S.has(q))return"[Circular *]";S.add(q)}else if(typeof q=="bigint")return q.toString();return q},w)}function t$(f=7500){let w=W0.map(([S,...v])=>`${S} ${v.map((q)=>typeof q=="string"?q:JSON.stringify(q)).join(" ")}`).join(`
`);return w.length<f?w:w.slice(-f)}function e$(){W0.length=0}var cf=Rq,f8=d(p("fs"));function w8(){let f=process.env.PRISMA_QUERY_ENGINE_LIBRARY;if(!(f&&f8.default.existsSync(f))&&process.arch==="ia32")throw new Error('The default query engine type (Node-API, "library") is currently not supported for 32bit Node. Please set `engineType = "binary"` in the "generator" block of your "schema.prisma" file (or use the environment variables "PRISMA_CLIENT_ENGINE_TYPE=binary" and/or "PRISMA_CLI_QUERY_ENGINE_TYPE=binary".)')}var S8=["darwin","darwin-arm64","debian-openssl-1.0.x","debian-openssl-1.1.x","debian-openssl-3.0.x","rhel-openssl-1.0.x","rhel-openssl-1.1.x","rhel-openssl-3.0.x","linux-arm64-openssl-1.1.x","linux-arm64-openssl-1.0.x","linux-arm64-openssl-3.0.x","linux-arm-openssl-1.1.x","linux-arm-openssl-1.0.x","linux-arm-openssl-3.0.x","linux-musl","linux-musl-openssl-3.0.x","linux-musl-arm64-openssl-1.1.x","linux-musl-arm64-openssl-3.0.x","linux-nixos","linux-static-x64","linux-static-arm64","windows","freebsd11","freebsd12","freebsd13","freebsd14","freebsd15","openbsd","netbsd","arm"],wS="libquery_engine";function v8(f,w){let S=w==="url";return f.includes("windows")?S?"query_engine.dll.node":`query_engine-${f}.dll.node`:f.includes("darwin")?S?`${wS}.dylib.node`:`${wS}-${f}.dylib.node`:S?`${wS}.so.node`:`${wS}-${f}.so.node`}var q8=d(p("child_process")),Gq=d(p("fs/promises")),Q2=d(p("os")),ef=Symbol.for("@ts-pattern/matcher"),h8=Symbol.for("@ts-pattern/isVariadic"),WS="@ts-pattern/anonymous-select-key",Y2=(f)=>!!(f&&typeof f=="object"),bS=(f)=>f&&!!f[ef],Tf=(f,w,S)=>{if(bS(f)){let v=f[ef](),{matched:q,selections:h}=v.match(w);return q&&h&&Object.keys(h).forEach((H)=>S(H,h[H])),q}if(Y2(f)){if(!Y2(w))return!1;if(Array.isArray(f)){if(!Array.isArray(w))return!1;let v=[],q=[],h=[];for(let H of f.keys()){let $=f[H];bS($)&&$[h8]?h.push($):h.length?q.push($):v.push($)}if(h.length){if(h.length>1)throw new Error("Pattern error: Using `...P.array(...)` several times in a single pattern is not allowed.");if(w.length<v.length+q.length)return!1;let H=w.slice(0,v.length),$=q.length===0?[]:w.slice(-q.length),j=w.slice(v.length,q.length===0?1/0:-q.length);return v.every((b,J)=>Tf(b,H[J],S))&&q.every((b,J)=>Tf(b,$[J],S))&&(h.length===0||Tf(h[0],j,S))}return f.length===w.length&&f.every((H,$)=>Tf(H,w[$],S))}return Reflect.ownKeys(f).every((v)=>{let q=f[v];return((v in w)||bS(h=q)&&h[ef]().matcherType==="optional")&&Tf(q,w[v],S);var h})}return Object.is(w,f)},gw=(f)=>{var w,S,v;return Y2(f)?bS(f)?(w=(S=(v=f[ef]()).getSelectionKeys)==null?void 0:S.call(v))!=null?w:[]:Array.isArray(f)?Q0(f,gw):Q0(Object.values(f),gw):[]},Q0=(f,w)=>f.reduce((S,v)=>S.concat(w(v)),[]);function Vf(f){return Object.assign(f,{optional:()=>H8(f),and:(w)=>vf(f,w),or:(w)=>$8(f,w),select:(w)=>w===void 0?Bv(f):Bv(w,f)})}function H8(f){return Vf({[ef]:()=>({match:(w)=>{let S={},v=(q,h)=>{S[q]=h};return w===void 0?(gw(f).forEach((q)=>v(q,void 0)),{matched:!0,selections:S}):{matched:Tf(f,w,v),selections:S}},getSelectionKeys:()=>gw(f),matcherType:"optional"})})}function vf(...f){return Vf({[ef]:()=>({match:(w)=>{let S={},v=(q,h)=>{S[q]=h};return{matched:f.every((q)=>Tf(q,w,v)),selections:S}},getSelectionKeys:()=>Q0(f,gw),matcherType:"and"})})}function $8(...f){return Vf({[ef]:()=>({match:(w)=>{let S={},v=(q,h)=>{S[q]=h};return Q0(f,gw).forEach((q)=>v(q,void 0)),{matched:f.some((q)=>Tf(q,w,v)),selections:S}},getSelectionKeys:()=>Q0(f,gw),matcherType:"or"})})}function i(f){return{[ef]:()=>({match:(w)=>({matched:!!f(w)})})}}function Bv(...f){let w=typeof f[0]=="string"?f[0]:void 0,S=f.length===2?f[1]:typeof f[0]=="string"?void 0:f[0];return Vf({[ef]:()=>({match:(v)=>{let q={[w??WS]:v};return{matched:S===void 0||Tf(S,v,(h,H)=>{q[h]=H}),selections:q}},getSelectionKeys:()=>[w??WS].concat(S===void 0?[]:gw(S))})})}function xf(f){return typeof f=="number"}function hw(f){return typeof f=="string"}function Hw(f){return typeof f=="bigint"}var _B=Vf(i(function(f){return!0})),$w=(f)=>Object.assign(Vf(f),{startsWith:(w)=>{return $w(vf(f,(S=w,i((v)=>hw(v)&&v.startsWith(S)))));var S},endsWith:(w)=>{return $w(vf(f,(S=w,i((v)=>hw(v)&&v.endsWith(S)))));var S},minLength:(w)=>$w(vf(f,((S)=>i((v)=>hw(v)&&v.length>=S))(w))),length:(w)=>$w(vf(f,((S)=>i((v)=>hw(v)&&v.length===S))(w))),maxLength:(w)=>$w(vf(f,((S)=>i((v)=>hw(v)&&v.length<=S))(w))),includes:(w)=>{return $w(vf(f,(S=w,i((v)=>hw(v)&&v.includes(S)))));var S},regex:(w)=>{return $w(vf(f,(S=w,i((v)=>hw(v)&&!!v.match(S)))));var S}}),MB=$w(i(hw)),yf=(f)=>Object.assign(Vf(f),{between:(w,S)=>yf(vf(f,((v,q)=>i((h)=>xf(h)&&v<=h&&q>=h))(w,S))),lt:(w)=>yf(vf(f,((S)=>i((v)=>xf(v)&&v<S))(w))),gt:(w)=>yf(vf(f,((S)=>i((v)=>xf(v)&&v>S))(w))),lte:(w)=>yf(vf(f,((S)=>i((v)=>xf(v)&&v<=S))(w))),gte:(w)=>yf(vf(f,((S)=>i((v)=>xf(v)&&v>=S))(w))),int:()=>yf(vf(f,i((w)=>xf(w)&&Number.isInteger(w)))),finite:()=>yf(vf(f,i((w)=>xf(w)&&Number.isFinite(w)))),positive:()=>yf(vf(f,i((w)=>xf(w)&&w>0))),negative:()=>yf(vf(f,i((w)=>xf(w)&&w<0)))}),DB=yf(i(xf)),jw=(f)=>Object.assign(Vf(f),{between:(w,S)=>jw(vf(f,((v,q)=>i((h)=>Hw(h)&&v<=h&&q>=h))(w,S))),lt:(w)=>jw(vf(f,((S)=>i((v)=>Hw(v)&&v<S))(w))),gt:(w)=>jw(vf(f,((S)=>i((v)=>Hw(v)&&v>S))(w))),lte:(w)=>jw(vf(f,((S)=>i((v)=>Hw(v)&&v<=S))(w))),gte:(w)=>jw(vf(f,((S)=>i((v)=>Hw(v)&&v>=S))(w))),positive:()=>jw(vf(f,i((w)=>Hw(w)&&w>0))),negative:()=>jw(vf(f,i((w)=>Hw(w)&&w<0)))}),UB=jw(i(Hw)),VB=Vf(i(function(f){return typeof f=="boolean"})),LB=Vf(i(function(f){return typeof f=="symbol"})),NB=Vf(i(function(f){return f==null})),KB=Vf(i(function(f){return f!=null})),j8=class extends Error{constructor(f){let w;try{w=JSON.stringify(f)}catch{w=f}super(`Pattern matching error: no pattern matches value ${w}`),this.input=void 0,this.input=f}},A2={matched:!1,value:void 0};function _S(f){return new b8(f,A2)}var b8=class f{constructor(w,S){this.input=void 0,this.state=void 0,this.input=w,this.state=S}with(...w){if(this.state.matched)return this;let S=w[w.length-1],v=[w[0]],q;w.length===3&&typeof w[1]=="function"?q=w[1]:w.length>2&&v.push(...w.slice(1,w.length-1));let h=!1,H={},$=(b,J)=>{h=!0,H[b]=J},j=!v.some((b)=>Tf(b,this.input,$))||q&&!q(this.input)?A2:{matched:!0,value:S(h?WS in H?H[WS]:H:this.input,this.input)};return new f(this.input,j)}when(w,S){if(this.state.matched)return this;let v=!!w(this.input);return new f(this.input,v?{matched:!0,value:S(this.input,this.input)}:A2)}otherwise(w){return this.state.matched?this.state.value:w(this.input)}exhaustive(){if(this.state.matched)return this.state.value;throw new j8(this.input)}run(){return this.exhaustive()}returnType(){return this}},J8=p("util"),O8={warn:U0("prisma:warn")},g8={warn:()=>!process.env.PRISMA_DISABLE_WARNINGS};function j2(f,...w){g8.warn()&&console.warn(`${O8.warn} ${f}`,...w)}var B8=J8.promisify(q8.default.exec),Xf=cf("prisma:get-platform"),W8=["1.0.x","1.1.x","3.0.x"];async function R8(){let f=Q2.default.platform(),w=process.arch;if(f==="freebsd"){let H=await RS("freebsd-version");if(H&&H.trim().length>0){let $=/^(\d+)\.?/.exec(H);if($)return{platform:"freebsd",targetDistro:`freebsd${$[1]}`,arch:w}}}if(f!=="linux")return{platform:f,arch:w};let S=await X8(),v=await D8(),q=E8({arch:w,archFromUname:v,familyDistro:S.familyDistro}),{libssl:h}=await Q8(q);return{platform:"linux",libssl:h,arch:w,archFromUname:v,...S}}function G8(f){let w=/^ID="?([^"\n]*)"?$/im,S=/^ID_LIKE="?([^"\n]*)"?$/im,v=w.exec(f),q=v&&v[1]&&v[1].toLowerCase()||"",h=S.exec(f),H=h&&h[1]&&h[1].toLowerCase()||"",$=_S({id:q,idLike:H}).with({id:"alpine"},({id:j})=>({targetDistro:"musl",familyDistro:j,originalDistro:j})).with({id:"raspbian"},({id:j})=>({targetDistro:"arm",familyDistro:"debian",originalDistro:j})).with({id:"nixos"},({id:j})=>({targetDistro:"nixos",originalDistro:j,familyDistro:"nixos"})).with({id:"debian"},{id:"ubuntu"},({id:j})=>({targetDistro:"debian",familyDistro:"debian",originalDistro:j})).with({id:"rhel"},{id:"centos"},{id:"fedora"},({id:j})=>({targetDistro:"rhel",familyDistro:"rhel",originalDistro:j})).when(({idLike:j})=>j.includes("debian")||j.includes("ubuntu"),({id:j})=>({targetDistro:"debian",familyDistro:"debian",originalDistro:j})).when(({idLike:j})=>q==="arch"||j.includes("arch"),({id:j})=>({targetDistro:"debian",familyDistro:"arch",originalDistro:j})).when(({idLike:j})=>j.includes("centos")||j.includes("fedora")||j.includes("rhel")||j.includes("suse"),({id:j})=>({targetDistro:"rhel",familyDistro:"rhel",originalDistro:j})).otherwise(({id:j})=>({targetDistro:void 0,familyDistro:void 0,originalDistro:j}));return Xf(`Found distro info:
${JSON.stringify($,null,2)}`),$}async function X8(){let f="/etc/os-release";try{let w=await Gq.default.readFile(f,{encoding:"utf-8"});return G8(w)}catch{return{targetDistro:void 0,familyDistro:void 0,originalDistro:void 0}}}function c8(f){let w=/^OpenSSL\s(\d+\.\d+)\.\d+/.exec(f);if(w){let S=`${w[1]}.x`;return Xq(S)}}function Wv(f){let w=/libssl\.so\.(\d)(\.\d)?/.exec(f);if(w){let S=`${w[1]}${w[2]??".0"}.x`;return Xq(S)}}function Xq(f){let w=(()=>{if(Eq(f))return f;let S=f.split(".");return S[1]="0",S.join(".")})();if(W8.includes(w))return w}function E8(f){return _S(f).with({familyDistro:"musl"},()=>(Xf('Trying platform-specific paths for "alpine"'),["/lib","/usr/lib"])).with({familyDistro:"debian"},({archFromUname:w})=>(Xf('Trying platform-specific paths for "debian" (and "ubuntu")'),[`/usr/lib/${w}-linux-gnu`,`/lib/${w}-linux-gnu`])).with({familyDistro:"rhel"},()=>(Xf('Trying platform-specific paths for "rhel"'),["/lib64","/usr/lib64"])).otherwise(({familyDistro:w,arch:S,archFromUname:v})=>(Xf(`Don't know any platform-specific paths for "${w}" on ${S} (${v})`),[]))}async function Q8(f){let w='grep -v "libssl.so.0"',S=await Rv(f);if(S){Xf(`Found libssl.so file using platform-specific paths: ${S}`);let h=Wv(S);if(Xf(`The parsed libssl version is: ${h}`),h)return{libssl:h,strategy:"libssl-specific-path"}}Xf('Falling back to "ldconfig" and other generic paths');let v=await RS(`ldconfig -p | sed "s/.*=>s*//" | sed "s|.*/||" | grep libssl | sort | ${w}`);if(v||(v=await Rv(["/lib64","/usr/lib64","/lib","/usr/lib"])),v){Xf(`Found libssl.so file using "ldconfig" or other generic paths: ${v}`);let h=Wv(v);if(Xf(`The parsed libssl version is: ${h}`),h)return{libssl:h,strategy:"ldconfig"}}let q=await RS("openssl version -v");if(q){Xf(`Found openssl binary with version: ${q}`);let h=c8(q);if(Xf(`The parsed openssl version is: ${h}`),h)return{libssl:h,strategy:"openssl-binary"}}return Xf("Couldn't find any version of libssl or OpenSSL in the system"),{}}async function Rv(f){for(let w of f){let S=await Y8(w);if(S)return S}}async function Y8(f){try{return(await Gq.default.readdir(f)).find((w)=>w.startsWith("libssl.so.")&&!w.startsWith("libssl.so.0"))}catch(w){if(w.code==="ENOENT")return;throw w}}async function i2(){let{binaryTarget:f}=await cq();return f}function A8(f){return f.binaryTarget!==void 0}async function z8(){let{memoized:f,...w}=await cq();return w}var SS={};async function cq(){if(A8(SS))return Promise.resolve({...SS,memoized:!0});let f=await R8(),w=_8(f);return SS={...f,binaryTarget:w},{...SS,memoized:!1}}function _8(f){let{platform:w,arch:S,archFromUname:v,libssl:q,targetDistro:h,familyDistro:H,originalDistro:$}=f;w==="linux"&&!["x64","arm64"].includes(S)&&j2(`Prisma only officially supports Linux on amd64 (x86_64) and arm64 (aarch64) system architectures (detected "${S}" instead). If you are using your own custom Prisma engines, you can ignore this warning, as long as you've compiled the engines for your system architecture "${v}".`);let j="1.1.x";if(w==="linux"&&q===void 0){let J=_S({familyDistro:H}).with({familyDistro:"debian"},()=>"Please manually install OpenSSL via `apt-get update -y && apt-get install -y openssl` and try installing Prisma again. If you're running Prisma on Docker, add this command to your Dockerfile, or switch to an image that already has OpenSSL installed.").otherwise(()=>"Please manually install OpenSSL and try installing Prisma again.");j2(`Prisma failed to detect the libssl/openssl version to use, and may not work as expected. Defaulting to "openssl-${j}".
${J}`)}let b="debian";if(w==="linux"&&h===void 0&&Xf(`Distro is "${$}". Falling back to Prisma engines built for "${b}".`),w==="darwin"&&S==="arm64")return"darwin-arm64";if(w==="darwin")return"darwin";if(w==="win32")return"windows";if(w==="freebsd")return h;if(w==="openbsd")return"openbsd";if(w==="netbsd")return"netbsd";if(w==="linux"&&h==="nixos")return"linux-nixos";if(w==="linux"&&S==="arm64")return`${h==="musl"?"linux-musl-arm64":"linux-arm64"}-openssl-${q||j}`;if(w==="linux"&&S==="arm")return`linux-arm-openssl-${q||j}`;if(w==="linux"&&h==="musl"){let J="linux-musl";return!q||Eq(q)?J:`${J}-openssl-${q}`}return w==="linux"&&h&&q?`${h}-openssl-${q}`:(w!=="linux"&&j2(`Prisma detected unknown OS "${w}" and may not work as expected. Defaulting to "linux".`),q?`${b}-openssl-${q}`:h?`${h}-openssl-${j}`:`${b}-openssl-${j}`)}async function M8(f){try{return await f()}catch{return}}function RS(f){return M8(async()=>{let w=await B8(f);return Xf(`Command "${f}" successfully returned "${w.stdout}"`),w.stdout})}async function D8(){return typeof Q2.default.machine=="function"?Q2.default.machine():(await RS("uname -m"))?.trim()}function Eq(f){return f.startsWith("1.")}var U8=d(Y$());function V8(f){return U8.default(f,f,{fallback:Uf})}var FB=d(vq()),ff=d(p("path")),CB=d(vq()),PB=cf("prisma:engines");function L8(){return ff.default.join(__dirname,"../")}var kB="libquery-engine";ff.default.join(__dirname,"../query-engine-darwin");ff.default.join(__dirname,"../query-engine-darwin-arm64");ff.default.join(__dirname,"../query-engine-debian-openssl-1.0.x");ff.default.join(__dirname,"../query-engine-debian-openssl-1.1.x");ff.default.join(__dirname,"../query-engine-debian-openssl-3.0.x");ff.default.join(__dirname,"../query-engine-linux-static-x64");ff.default.join(__dirname,"../query-engine-linux-static-arm64");ff.default.join(__dirname,"../query-engine-rhel-openssl-1.0.x");ff.default.join(__dirname,"../query-engine-rhel-openssl-1.1.x");ff.default.join(__dirname,"../query-engine-rhel-openssl-3.0.x");ff.default.join(__dirname,"../libquery_engine-darwin.dylib.node");ff.default.join(__dirname,"../libquery_engine-darwin-arm64.dylib.node");ff.default.join(__dirname,"../libquery_engine-debian-openssl-1.0.x.so.node");ff.default.join(__dirname,"../libquery_engine-debian-openssl-1.1.x.so.node");ff.default.join(__dirname,"../libquery_engine-debian-openssl-3.0.x.so.node");ff.default.join(__dirname,"../libquery_engine-linux-arm64-openssl-1.0.x.so.node");ff.default.join(__dirname,"../libquery_engine-linux-arm64-openssl-1.1.x.so.node");ff.default.join(__dirname,"../libquery_engine-linux-arm64-openssl-3.0.x.so.node");ff.default.join(__dirname,"../libquery_engine-linux-musl.so.node");ff.default.join(__dirname,"../libquery_engine-linux-musl-openssl-3.0.x.so.node");ff.default.join(__dirname,"../libquery_engine-rhel-openssl-1.0.x.so.node");ff.default.join(__dirname,"../libquery_engine-rhel-openssl-1.1.x.so.node");ff.default.join(__dirname,"../libquery_engine-rhel-openssl-3.0.x.so.node");ff.default.join(__dirname,"../query_engine-windows.dll.node");var Gv=d(p("fs")),Xv=cf("chmodPlusX");function N8(f){if(process.platform==="win32")return;let w=Gv.default.statSync(f),S=w.mode|64|8|1;if(w.mode===S){Xv(`Execution permissions of ${f} are fine`);return}let v=S.toString(8).slice(-3);Xv(`Have to call chmodPlusX on ${f}`),Gv.default.chmodSync(f,v)}function K8(f){let w=f.e,S=($)=>`Prisma cannot find the required \`${$}\` system library in your system`,v=w.message.includes("cannot open shared object file"),q=`Please refer to the documentation about Prisma's system requirements: ${V8("https://pris.ly/d/system-requirements")}`,h=`Unable to require(\`${D0(f.id)}\`).`,H=_S({message:w.message,code:w.code}).with({code:"ENOENT"},()=>"File does not exist.").when(({message:$})=>v&&$.includes("libz"),()=>`${S("libz")}. Please install it and try again.`).when(({message:$})=>v&&$.includes("libgcc_s"),()=>`${S("libgcc_s")}. Please install it and try again.`).when(({message:$})=>v&&$.includes("libssl"),()=>{let $=f.platformInfo.libssl?`openssl-${f.platformInfo.libssl}`:"openssl";return`${S("libssl")}. Please install ${$} and try again.`}).when(({message:$})=>$.includes("GLIBC"),()=>`Prisma has detected an incompatible version of the \`glibc\` C standard library installed in your system. This probably means your system may be too old to run Prisma. ${q}`).when(({message:$})=>f.platformInfo.platform==="linux"&&$.includes("symbol not found"),()=>`The Prisma engines are not compatible with your system ${f.platformInfo.originalDistro} on (${f.platformInfo.archFromUname}) which uses the \`${f.platformInfo.binaryTarget}\` binaryTarget by default. ${q}`).otherwise(()=>`The Prisma engines do not seem to be compatible with your system. ${q}`);return`${h}
${H}

Details: ${w.message}`}var Qq=d(z$()),z2=d(p("fs")),Y0=d(p("path"));function F8(f){let w=f.ignoreProcessEnv?{}:process.env,S=(v)=>v.match(/(.?\${(?:[a-zA-Z0-9_]+)?})/g)?.reduce(function(q,h){let H=/(.?)\${([a-zA-Z0-9_]+)?}/g.exec(h);if(!H)return q;let $=H[1],j,b;if($==="\\")b=H[0],j=b.replace("\\$","$");else{let J=H[2];b=H[0].substring($.length),j=Object.hasOwnProperty.call(w,J)?w[J]:f.parsed[J]||"",j=S(j)}return q.replace(b,j)},v)??v;for(let v in f.parsed){let q=Object.hasOwnProperty.call(w,v)?w[v]:f.parsed[v];f.parsed[v]=S(q)}for(let v in f.parsed)w[v]=f.parsed[v];return f}var _2=cf("prisma:tryLoadEnv");function Yq({rootEnvPath:f,schemaEnvPath:w},S={conflictCheck:"none"}){let v=cv(f);S.conflictCheck!=="none"&&C8(v,w,S.conflictCheck);let q=null;return Aq(v?.path,w)||(q=cv(w)),!v&&!q&&_2("No Environment variables loaded"),q?.dotenvResult.error?console.error(Mw(Ff("Schema Env Error: "))+q.dotenvResult.error):{message:[v?.message,q?.message].filter(Boolean).join(`
`),parsed:{...v?.dotenvResult?.parsed,...q?.dotenvResult?.parsed}}}function C8(f,w,S){let v=f?.dotenvResult.parsed,q=!Aq(f?.path,w);if(v&&w&&q&&z2.default.existsSync(w)){let h=Qq.default.parse(z2.default.readFileSync(w)),H=[];for(let $ in h)v[$]===h[$]&&H.push($);if(H.length>0){let $=Y0.default.relative(process.cwd(),f.path),j=Y0.default.relative(process.cwd(),w);if(S==="error"){let b=`There is a conflict between env var${H.length>1?"s":""} in ${Uf($)} and ${Uf(j)}
Conflicting env vars:
${H.map((J)=>`  ${Ff(J)}`).join(`
`)}

We suggest to move the contents of ${Uf(j)} to ${Uf($)} to consolidate your env vars.
`;throw new Error(b)}else if(S==="warn"){let b=`Conflict for env var${H.length>1?"s":""} ${H.map((J)=>Ff(J)).join(", ")} in ${Uf($)} and ${Uf(j)}
Env vars from ${Uf(j)} overwrite the ones from ${Uf($)}
      `;console.warn(`${U0("warn(prisma)")} ${b}`)}}}}function cv(f){if(P8(f)){_2(`Environment variables loaded from ${f}`);let w=Qq.default.config({path:f,debug:process.env.DOTENV_CONFIG_DEBUG?!0:void 0});return{dotenvResult:F8(w),message:D0(`Environment variables loaded from ${Y0.default.relative(process.cwd(),f)}`),path:f}}else _2(`Environment variables not found at ${f}`);return null}function Aq(f,w){return f&&w&&Y0.default.resolve(f)===Y0.default.resolve(w)}function P8(f){return!!(f&&z2.default.existsSync(f))}var k8="library";function M2(f){return l8()||(f?.config.engineType==="library"?"library":f?.config.engineType==="binary"?"binary":f?.config.engineType==="client"?"client":k8)}function l8(){let f=process.env.PRISMA_CLIENT_ENGINE_TYPE;return f==="library"?"library":f==="binary"?"binary":f==="client"?"client":void 0}var I8="prisma+postgres",zq=`${I8}:`;function r8(f){return f?.startsWith(`${zq}//`)??!1}var a2;((f)=>{let w;((S)=>(S.findUnique="findUnique",S.findUniqueOrThrow="findUniqueOrThrow",S.findFirst="findFirst",S.findFirstOrThrow="findFirstOrThrow",S.findMany="findMany",S.create="create",S.createMany="createMany",S.createManyAndReturn="createManyAndReturn",S.update="update",S.updateMany="updateMany",S.updateManyAndReturn="updateManyAndReturn",S.upsert="upsert",S.delete="delete",S.deleteMany="deleteMany",S.groupBy="groupBy",S.count="count",S.aggregate="aggregate",S.findRaw="findRaw",S.aggregateRaw="aggregateRaw"))(w=f.ModelAction||={})})(a2||={});var vS=d(p("path"));function x8(f){return vS.default.sep===vS.default.posix.sep?f:f.split(vS.default.sep).join(vS.default.posix.sep)}var y8=d(qq());function m8(f){return String(new T8(f))}var T8=class{constructor(f){this.config=f}toString(){let{config:f}=this,w=f.provider.fromEnvVar?`env("${f.provider.fromEnvVar}")`:f.provider.value,S=JSON.parse(JSON.stringify({provider:w,binaryTargets:u8(f.binaryTargets)}));return`generator ${f.name} {
${y8.default(n8(S),2)}
}`}};function u8(f){let w;if(f.length>0){let S=f.find((v)=>v.fromEnvVar!==null);S?w=`env("${S.fromEnvVar}")`:w=f.map((v)=>v.native?"native":v.value)}else w=void 0;return w}function n8(f){let w=Object.keys(f).reduce((S,v)=>Math.max(S,v.length),0);return Object.entries(f).map(([S,v])=>`${S.padEnd(w)} = ${i8(v)}`).join(`
`)}function i8(f){return JSON.parse(JSON.stringify(f,(w,S)=>Array.isArray(S)?`[${S.map((v)=>JSON.stringify(v)).join(", ")}]`:JSON.stringify(S)))}var D2={};M0(D2,{error:()=>p8,info:()=>o8,log:()=>a8,query:()=>d8,should:()=>_q,tags:()=>V0,warn:()=>Mq});var V0={error:Mw("prisma:error"),warn:U0("prisma:warn"),info:_w("prisma:info"),query:B0("prisma:query")},_q={warn:()=>!process.env.PRISMA_DISABLE_WARNINGS};function a8(...f){console.log(...f)}function Mq(f,...w){_q.warn()&&console.warn(`${V0.warn} ${f}`,...w)}function o8(f,...w){console.info(`${V0.info} ${f}`,...w)}function p8(f,...w){console.error(`${V0.error} ${f}`,...w)}function d8(f,...w){console.log(`${V0.query} ${f}`,...w)}function Ev(f,w){if(!f)throw new Error(`${w}. This should never happen. If you see this error, please, open an issue at https://pris.ly/prisma-prisma-bug-report`)}function MS(f,w){throw new Error(w)}function s8(f,w){return Object.prototype.hasOwnProperty.call(f,w)}var Z8=(f,w)=>f.reduce((S,v)=>(S[w(v)]=v,S),{});function o2(f,w){let S={};for(let v of Object.keys(f))S[v]=w(f[v],v);return S}function t8(f,w){if(f.length===0)return;let S=f[0];for(let v=1;v<f.length;v++)w(S,f[v])<0&&(S=f[v]);return S}function hf(f,w){Object.defineProperty(f,"name",{value:w,configurable:!0})}var Qv=new Set,Dq=(f,w,...S)=>{Qv.has(f)||(Qv.add(f),Mq(w,...S))},$f=class f extends Error{constructor(w,S,v){super(w),this.name="PrismaClientInitializationError",this.clientVersion=S,this.errorCode=v,Error.captureStackTrace(f)}get[Symbol.toStringTag](){return"PrismaClientInitializationError"}};hf($f,"PrismaClientInitializationError");var Bw=class extends Error{constructor(f,{code:w,clientVersion:S,meta:v,batchRequestIdx:q}){super(f),this.name="PrismaClientKnownRequestError",this.code=w,this.clientVersion=S,this.meta=v,Object.defineProperty(this,"batchRequestIdx",{value:q,enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return"PrismaClientKnownRequestError"}};hf(Bw,"PrismaClientKnownRequestError");var Ow=class extends Error{constructor(f,w){super(f),this.name="PrismaClientRustPanicError",this.clientVersion=w}get[Symbol.toStringTag](){return"PrismaClientRustPanicError"}};hf(Ow,"PrismaClientRustPanicError");var Mf=class extends Error{constructor(f,{clientVersion:w,batchRequestIdx:S}){super(f),this.name="PrismaClientUnknownRequestError",this.clientVersion=w,Object.defineProperty(this,"batchRequestIdx",{value:S,writable:!0,enumerable:!1})}get[Symbol.toStringTag](){return"PrismaClientUnknownRequestError"}};hf(Mf,"PrismaClientUnknownRequestError");var uf=class extends Error{constructor(f,{clientVersion:w}){super(f);this.name="PrismaClientValidationError",this.clientVersion=w}get[Symbol.toStringTag](){return"PrismaClientValidationError"}};hf(uf,"PrismaClientValidationError");var xw=9000000000000000,Rw=1e9,U2="0123456789abcdef",GS="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",XS="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",V2={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-xw,maxE:xw,crypto:!1},Uq,tf,K=!0,DS="[DecimalError] ",Ww=DS+"Invalid argument: ",Vq=DS+"Precision limit exceeded",Lq=DS+"crypto unavailable",Nq="[object Decimal]",Bf=Math.floor,Jf=Math.pow,e8=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,f6=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,w6=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Kq=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Cf=1e7,D=7,S6=9007199254740991,v6=GS.length-1,L2=XS.length-1,W={toStringTag:Nq};W.absoluteValue=W.abs=function(){var f=new this.constructor(this);return f.s<0&&(f.s=1),z(f)};W.ceil=function(){return z(new this.constructor(this),this.e+1,2)};W.clampedTo=W.clamp=function(f,w){var S,v=this,q=v.constructor;if(f=new q(f),w=new q(w),!f.s||!w.s)return new q(NaN);if(f.gt(w))throw Error(Ww+w);return S=v.cmp(f),S<0?f:v.cmp(w)>0?w:new q(v)};W.comparedTo=W.cmp=function(f){var w,S,v,q,h=this,H=h.d,$=(f=new h.constructor(f)).d,j=h.s,b=f.s;if(!H||!$)return!j||!b?NaN:j!==b?j:H===$?0:!H^j<0?1:-1;if(!H[0]||!$[0])return H[0]?j:$[0]?-b:0;if(j!==b)return j;if(h.e!==f.e)return h.e>f.e^j<0?1:-1;for(v=H.length,q=$.length,w=0,S=v<q?v:q;w<S;++w)if(H[w]!==$[w])return H[w]>$[w]^j<0?1:-1;return v===q?0:v>q^j<0?1:-1};W.cosine=W.cos=function(){var f,w,S=this,v=S.constructor;return S.d?S.d[0]?(f=v.precision,w=v.rounding,v.precision=f+Math.max(S.e,S.sd())+D,v.rounding=1,S=q6(v,lq(v,S)),v.precision=f,v.rounding=w,z(tf==2||tf==3?S.neg():S,f,w,!0)):new v(1):new v(NaN)};W.cubeRoot=W.cbrt=function(){var f,w,S,v,q,h,H,$,j,b,J=this,O=J.constructor;if(!J.isFinite()||J.isZero())return new O(J);for(K=!1,h=J.s*Jf(J.s*J,0.3333333333333333),!h||Math.abs(h)==1/0?(S=Of(J.d),f=J.e,(h=(f-S.length+1)%3)&&(S+=h==1||h==-2?"0":"00"),h=Jf(S,0.3333333333333333),f=Bf((f+1)/3)-(f%3==(f<0?-1:2)),h==1/0?S="5e"+f:(S=h.toExponential(),S=S.slice(0,S.indexOf("e")+1)+f),v=new O(S),v.s=J.s):v=new O(h.toString()),H=(f=O.precision)+3;;)if($=v,j=$.times($).times($),b=j.plus(J),v=Z(b.plus(J).times($),b.plus(j),H+2,1),Of($.d).slice(0,H)===(S=Of(v.d)).slice(0,H))if(S=S.slice(H-3,H+1),S=="9999"||!q&&S=="4999"){if(!q&&(z($,f+1,0),$.times($).times($).eq(J))){v=$;break}H+=4,q=1}else{(!+S||!+S.slice(1)&&S.charAt(0)=="5")&&(z(v,f+1,1),w=!v.times(v).times(v).eq(J));break}return K=!0,z(v,f,O.rounding,w)};W.decimalPlaces=W.dp=function(){var f,w=this.d,S=NaN;if(w){if(f=w.length-1,S=(f-Bf(this.e/D))*D,f=w[f],f)for(;f%10==0;f/=10)S--;S<0&&(S=0)}return S};W.dividedBy=W.div=function(f){return Z(this,new this.constructor(f))};W.dividedToIntegerBy=W.divToInt=function(f){var w=this,S=w.constructor;return z(Z(w,new S(f),0,1,1),S.precision,S.rounding)};W.equals=W.eq=function(f){return this.cmp(f)===0};W.floor=function(){return z(new this.constructor(this),this.e+1,3)};W.greaterThan=W.gt=function(f){return this.cmp(f)>0};W.greaterThanOrEqualTo=W.gte=function(f){var w=this.cmp(f);return w==1||w===0};W.hyperbolicCosine=W.cosh=function(){var f,w,S,v,q,h=this,H=h.constructor,$=new H(1);if(!h.isFinite())return new H(h.s?1/0:NaN);if(h.isZero())return $;S=H.precision,v=H.rounding,H.precision=S+Math.max(h.e,h.sd())+4,H.rounding=1,q=h.d.length,q<32?(f=Math.ceil(q/3),w=(1/VS(4,f)).toString()):(f=16,w="2.3283064365386962890625e-10"),h=yw(H,1,h.times(w),new H(1),!0);for(var j,b=f,J=new H(8);b--;)j=h.times(h),h=$.minus(j.times(J.minus(j.times(J))));return z(h,H.precision=S,H.rounding=v,!0)};W.hyperbolicSine=W.sinh=function(){var f,w,S,v,q=this,h=q.constructor;if(!q.isFinite()||q.isZero())return new h(q);if(w=h.precision,S=h.rounding,h.precision=w+Math.max(q.e,q.sd())+4,h.rounding=1,v=q.d.length,v<3)q=yw(h,2,q,q,!0);else{f=1.4*Math.sqrt(v),f=f>16?16:f|0,q=q.times(1/VS(5,f)),q=yw(h,2,q,q,!0);for(var H,$=new h(5),j=new h(16),b=new h(20);f--;)H=q.times(q),q=q.times($.plus(H.times(j.times(H).plus(b))))}return h.precision=w,h.rounding=S,z(q,w,S,!0)};W.hyperbolicTangent=W.tanh=function(){var f,w,S=this,v=S.constructor;return S.isFinite()?S.isZero()?new v(S):(f=v.precision,w=v.rounding,v.precision=f+7,v.rounding=1,Z(S.sinh(),S.cosh(),v.precision=f,v.rounding=w)):new v(S.s)};W.inverseCosine=W.acos=function(){var f,w=this,S=w.constructor,v=w.abs().cmp(1),q=S.precision,h=S.rounding;return v!==-1?v===0?w.isNeg()?Kf(S,q,h):new S(0):new S(NaN):w.isZero()?Kf(S,q+4,h).times(0.5):(S.precision=q+6,S.rounding=1,w=w.asin(),f=Kf(S,q+4,h).times(0.5),S.precision=q,S.rounding=h,f.minus(w))};W.inverseHyperbolicCosine=W.acosh=function(){var f,w,S=this,v=S.constructor;return S.lte(1)?new v(S.eq(1)?0:NaN):S.isFinite()?(f=v.precision,w=v.rounding,v.precision=f+Math.max(Math.abs(S.e),S.sd())+4,v.rounding=1,K=!1,S=S.times(S).minus(1).sqrt().plus(S),K=!0,v.precision=f,v.rounding=w,S.ln()):new v(S)};W.inverseHyperbolicSine=W.asinh=function(){var f,w,S=this,v=S.constructor;return!S.isFinite()||S.isZero()?new v(S):(f=v.precision,w=v.rounding,v.precision=f+2*Math.max(Math.abs(S.e),S.sd())+6,v.rounding=1,K=!1,S=S.times(S).plus(1).sqrt().plus(S),K=!0,v.precision=f,v.rounding=w,S.ln())};W.inverseHyperbolicTangent=W.atanh=function(){var f,w,S,v,q=this,h=q.constructor;return q.isFinite()?q.e>=0?new h(q.abs().eq(1)?q.s/0:q.isZero()?q:NaN):(f=h.precision,w=h.rounding,v=q.sd(),Math.max(v,f)<2*-q.e-1?z(new h(q),f,w,!0):(h.precision=S=v-q.e,q=Z(q.plus(1),new h(1).minus(q),S+f,1),h.precision=f+4,h.rounding=1,q=q.ln(),h.precision=f,h.rounding=w,q.times(0.5))):new h(NaN)};W.inverseSine=W.asin=function(){var f,w,S,v,q=this,h=q.constructor;return q.isZero()?new h(q):(w=q.abs().cmp(1),S=h.precision,v=h.rounding,w!==-1?w===0?(f=Kf(h,S+4,v).times(0.5),f.s=q.s,f):new h(NaN):(h.precision=S+6,h.rounding=1,q=q.div(new h(1).minus(q.times(q)).sqrt().plus(1)).atan(),h.precision=S,h.rounding=v,q.times(2)))};W.inverseTangent=W.atan=function(){var f,w,S,v,q,h,H,$,j,b=this,J=b.constructor,O=J.precision,g=J.rounding;if(b.isFinite()){if(b.isZero())return new J(b);if(b.abs().eq(1)&&O+4<=L2)return H=Kf(J,O+4,g).times(0.25),H.s=b.s,H}else{if(!b.s)return new J(NaN);if(O+4<=L2)return H=Kf(J,O+4,g).times(0.5),H.s=b.s,H}for(J.precision=$=O+10,J.rounding=1,S=Math.min(28,$/D+2|0),f=S;f;--f)b=b.div(b.times(b).plus(1).sqrt().plus(1));for(K=!1,w=Math.ceil($/D),v=1,j=b.times(b),H=new J(b),q=b;f!==-1;)if(q=q.times(j),h=H.minus(q.div(v+=2)),q=q.times(j),H=h.plus(q.div(v+=2)),H.d[w]!==void 0)for(f=w;H.d[f]===h.d[f]&&f--;);return S&&(H=H.times(2<<S-1)),K=!0,z(H,J.precision=O,J.rounding=g,!0)};W.isFinite=function(){return!!this.d};W.isInteger=W.isInt=function(){return!!this.d&&Bf(this.e/D)>this.d.length-2};W.isNaN=function(){return!this.s};W.isNegative=W.isNeg=function(){return this.s<0};W.isPositive=W.isPos=function(){return this.s>0};W.isZero=function(){return!!this.d&&this.d[0]===0};W.lessThan=W.lt=function(f){return this.cmp(f)<0};W.lessThanOrEqualTo=W.lte=function(f){return this.cmp(f)<1};W.logarithm=W.log=function(f){var w,S,v,q,h,H,$,j,b=this,J=b.constructor,O=J.precision,g=J.rounding,B=5;if(f==null)f=new J(10),w=!0;else{if(f=new J(f),S=f.d,f.s<0||!S||!S[0]||f.eq(1))return new J(NaN);w=f.eq(10)}if(S=b.d,b.s<0||!S||!S[0]||b.eq(1))return new J(S&&!S[0]?-1/0:b.s!=1?NaN:S?0:1/0);if(w)if(S.length>1)h=!0;else{for(q=S[0];q%10===0;)q/=10;h=q!==1}if(K=!1,$=O+B,H=Jw(b,$),v=w?cS(J,$+10):Jw(f,$),j=Z(H,v,$,1),A0(j.d,q=O,g))do if($+=10,H=Jw(b,$),v=w?cS(J,$+10):Jw(f,$),j=Z(H,v,$,1),!h){+Of(j.d).slice(q+1,q+15)+1==100000000000000&&(j=z(j,O+1,0));break}while(A0(j.d,q+=10,g));return K=!0,z(j,O,g)};W.minus=W.sub=function(f){var w,S,v,q,h,H,$,j,b,J,O,g,B=this,R=B.constructor;if(f=new R(f),!B.d||!f.d)return!B.s||!f.s?f=new R(NaN):B.d?f.s=-f.s:f=new R(f.d||B.s!==f.s?B:NaN),f;if(B.s!=f.s)return f.s=-f.s,B.plus(f);if(b=B.d,g=f.d,$=R.precision,j=R.rounding,!b[0]||!g[0]){if(g[0])f.s=-f.s;else if(b[0])f=new R(B);else return new R(j===3?-0:0);return K?z(f,$,j):f}if(S=Bf(f.e/D),J=Bf(B.e/D),b=b.slice(),h=J-S,h){for(O=h<0,O?(w=b,h=-h,H=g.length):(w=g,S=J,H=b.length),v=Math.max(Math.ceil($/D),H)+2,h>v&&(h=v,w.length=1),w.reverse(),v=h;v--;)w.push(0);w.reverse()}else{for(v=b.length,H=g.length,O=v<H,O&&(H=v),v=0;v<H;v++)if(b[v]!=g[v]){O=b[v]<g[v];break}h=0}for(O&&(w=b,b=g,g=w,f.s=-f.s),H=b.length,v=g.length-H;v>0;--v)b[H++]=0;for(v=g.length;v>h;){if(b[--v]<g[v]){for(q=v;q&&b[--q]===0;)b[q]=Cf-1;--b[q],b[v]+=Cf}b[v]-=g[v]}for(;b[--H]===0;)b.pop();for(;b[0]===0;b.shift())--S;return b[0]?(f.d=b,f.e=US(b,S),K?z(f,$,j):f):new R(j===3?-0:0)};W.modulo=W.mod=function(f){var w,S=this,v=S.constructor;return f=new v(f),!S.d||!f.s||f.d&&!f.d[0]?new v(NaN):!f.d||S.d&&!S.d[0]?z(new v(S),v.precision,v.rounding):(K=!1,v.modulo==9?(w=Z(S,f.abs(),0,3,1),w.s*=f.s):w=Z(S,f,0,v.modulo,1),w=w.times(f),K=!0,S.minus(w))};W.naturalExponential=W.exp=function(){return N2(this)};W.naturalLogarithm=W.ln=function(){return Jw(this)};W.negated=W.neg=function(){var f=new this.constructor(this);return f.s=-f.s,z(f)};W.plus=W.add=function(f){var w,S,v,q,h,H,$,j,b,J,O=this,g=O.constructor;if(f=new g(f),!O.d||!f.d)return!O.s||!f.s?f=new g(NaN):O.d||(f=new g(f.d||O.s===f.s?O:NaN)),f;if(O.s!=f.s)return f.s=-f.s,O.minus(f);if(b=O.d,J=f.d,$=g.precision,j=g.rounding,!b[0]||!J[0])return J[0]||(f=new g(O)),K?z(f,$,j):f;if(h=Bf(O.e/D),v=Bf(f.e/D),b=b.slice(),q=h-v,q){for(q<0?(S=b,q=-q,H=J.length):(S=J,v=h,H=b.length),h=Math.ceil($/D),H=h>H?h+1:H+1,q>H&&(q=H,S.length=1),S.reverse();q--;)S.push(0);S.reverse()}for(H=b.length,q=J.length,H-q<0&&(q=H,S=J,J=b,b=S),w=0;q;)w=(b[--q]=b[q]+J[q]+w)/Cf|0,b[q]%=Cf;for(w&&(b.unshift(w),++v),H=b.length;b[--H]==0;)b.pop();return f.d=b,f.e=US(b,v),K?z(f,$,j):f};W.precision=W.sd=function(f){var w,S=this;if(f!==void 0&&f!==!!f&&f!==1&&f!==0)throw Error(Ww+f);return S.d?(w=Fq(S.d),f&&S.e+1>w&&(w=S.e+1)):w=NaN,w};W.round=function(){var f=this,w=f.constructor;return z(new w(f),f.e+1,w.rounding)};W.sine=W.sin=function(){var f,w,S=this,v=S.constructor;return S.isFinite()?S.isZero()?new v(S):(f=v.precision,w=v.rounding,v.precision=f+Math.max(S.e,S.sd())+D,v.rounding=1,S=H6(v,lq(v,S)),v.precision=f,v.rounding=w,z(tf>2?S.neg():S,f,w,!0)):new v(NaN)};W.squareRoot=W.sqrt=function(){var f,w,S,v,q,h,H=this,$=H.d,j=H.e,b=H.s,J=H.constructor;if(b!==1||!$||!$[0])return new J(!b||b<0&&(!$||$[0])?NaN:$?H:1/0);for(K=!1,b=Math.sqrt(+H),b==0||b==1/0?(w=Of($),(w.length+j)%2==0&&(w+="0"),b=Math.sqrt(w),j=Bf((j+1)/2)-(j<0||j%2),b==1/0?w="5e"+j:(w=b.toExponential(),w=w.slice(0,w.indexOf("e")+1)+j),v=new J(w)):v=new J(b.toString()),S=(j=J.precision)+3;;)if(h=v,v=h.plus(Z(H,h,S+2,1)).times(0.5),Of(h.d).slice(0,S)===(w=Of(v.d)).slice(0,S))if(w=w.slice(S-3,S+1),w=="9999"||!q&&w=="4999"){if(!q&&(z(h,j+1,0),h.times(h).eq(H))){v=h;break}S+=4,q=1}else{(!+w||!+w.slice(1)&&w.charAt(0)=="5")&&(z(v,j+1,1),f=!v.times(v).eq(H));break}return K=!0,z(v,j,J.rounding,f)};W.tangent=W.tan=function(){var f,w,S=this,v=S.constructor;return S.isFinite()?S.isZero()?new v(S):(f=v.precision,w=v.rounding,v.precision=f+10,v.rounding=1,S=S.sin(),S.s=1,S=Z(S,new v(1).minus(S.times(S)).sqrt(),f+10,0),v.precision=f,v.rounding=w,z(tf==2||tf==4?S.neg():S,f,w,!0)):new v(NaN)};W.times=W.mul=function(f){var w,S,v,q,h,H,$,j,b,J=this,O=J.constructor,g=J.d,B=(f=new O(f)).d;if(f.s*=J.s,!g||!g[0]||!B||!B[0])return new O(!f.s||g&&!g[0]&&!B||B&&!B[0]&&!g?NaN:!g||!B?f.s/0:f.s*0);for(S=Bf(J.e/D)+Bf(f.e/D),j=g.length,b=B.length,j<b&&(h=g,g=B,B=h,H=j,j=b,b=H),h=[],H=j+b,v=H;v--;)h.push(0);for(v=b;--v>=0;){for(w=0,q=j+v;q>v;)$=h[q]+B[v]*g[q-v-1]+w,h[q--]=$%Cf|0,w=$/Cf|0;h[q]=(h[q]+w)%Cf|0}for(;!h[--H];)h.pop();return w?++S:h.shift(),f.d=h,f.e=US(h,S),K?z(f,O.precision,O.rounding):f};W.toBinary=function(f,w){return p2(this,2,f,w)};W.toDecimalPlaces=W.toDP=function(f,w){var S=this,v=S.constructor;return S=new v(S),f===void 0?S:(Af(f,0,Rw),w===void 0?w=v.rounding:Af(w,0,8),z(S,f+S.e+1,w))};W.toExponential=function(f,w){var S,v=this,q=v.constructor;return f===void 0?S=of(v,!0):(Af(f,0,Rw),w===void 0?w=q.rounding:Af(w,0,8),v=z(new q(v),f+1,w),S=of(v,!0,f+1)),v.isNeg()&&!v.isZero()?"-"+S:S};W.toFixed=function(f,w){var S,v,q=this,h=q.constructor;return f===void 0?S=of(q):(Af(f,0,Rw),w===void 0?w=h.rounding:Af(w,0,8),v=z(new h(q),f+q.e+1,w),S=of(v,!1,f+v.e+1)),q.isNeg()&&!q.isZero()?"-"+S:S};W.toFraction=function(f){var w,S,v,q,h,H,$,j,b,J,O,g,B=this,R=B.d,c=B.constructor;if(!R)return new c(B);if(b=S=new c(1),v=j=new c(0),w=new c(v),h=w.e=Fq(R)-B.e-1,H=h%D,w.d[0]=Jf(10,H<0?D+H:H),f==null)f=h>0?w:b;else{if($=new c(f),!$.isInt()||$.lt(b))throw Error(Ww+$);f=$.gt(w)?h>0?w:b:$}for(K=!1,$=new c(Of(R)),J=c.precision,c.precision=h=R.length*D*2;O=Z($,w,0,1,1),q=S.plus(O.times(v)),q.cmp(f)!=1;)S=v,v=q,q=b,b=j.plus(O.times(q)),j=q,q=w,w=$.minus(O.times(q)),$=q;return q=Z(f.minus(S),v,0,1,1),j=j.plus(q.times(b)),S=S.plus(q.times(v)),j.s=b.s=B.s,g=Z(b,v,h,1).minus(B).abs().cmp(Z(j,S,h,1).minus(B).abs())<1?[b,v]:[j,S],c.precision=J,K=!0,g};W.toHexadecimal=W.toHex=function(f,w){return p2(this,16,f,w)};W.toNearest=function(f,w){var S=this,v=S.constructor;if(S=new v(S),f==null){if(!S.d)return S;f=new v(1),w=v.rounding}else{if(f=new v(f),w===void 0?w=v.rounding:Af(w,0,8),!S.d)return f.s?S:f;if(!f.d)return f.s&&(f.s=S.s),f}return f.d[0]?(K=!1,S=Z(S,f,0,w,1).times(f),K=!0,z(S)):(f.s=S.s,S=f),S};W.toNumber=function(){return+this};W.toOctal=function(f,w){return p2(this,8,f,w)};W.toPower=W.pow=function(f){var w,S,v,q,h,H,$=this,j=$.constructor,b=+(f=new j(f));if(!$.d||!f.d||!$.d[0]||!f.d[0])return new j(Jf(+$,b));if($=new j($),$.eq(1))return $;if(v=j.precision,h=j.rounding,f.eq(1))return z($,v,h);if(w=Bf(f.e/D),w>=f.d.length-1&&(S=b<0?-b:b)<=S6)return q=Cq(j,$,S,v),f.s<0?new j(1).div(q):z(q,v,h);if(H=$.s,H<0){if(w<f.d.length-1)return new j(NaN);if(f.d[w]&1||(H=1),$.e==0&&$.d[0]==1&&$.d.length==1)return $.s=H,$}return S=Jf(+$,b),w=S==0||!isFinite(S)?Bf(b*(Math.log("0."+Of($.d))/Math.LN10+$.e+1)):new j(S+"").e,w>j.maxE+1||w<j.minE-1?new j(w>0?H/0:0):(K=!1,j.rounding=$.s=1,S=Math.min(12,(w+"").length),q=N2(f.times(Jw($,v+S)),v),q.d&&(q=z(q,v+5,1),A0(q.d,v,h)&&(w=v+10,q=z(N2(f.times(Jw($,w+S)),w),w+5,1),+Of(q.d).slice(v+1,v+15)+1==100000000000000&&(q=z(q,v+1,0)))),q.s=H,K=!0,j.rounding=h,z(q,v,h))};W.toPrecision=function(f,w){var S,v=this,q=v.constructor;return f===void 0?S=of(v,v.e<=q.toExpNeg||v.e>=q.toExpPos):(Af(f,1,Rw),w===void 0?w=q.rounding:Af(w,0,8),v=z(new q(v),f,w),S=of(v,f<=v.e||v.e<=q.toExpNeg,f)),v.isNeg()&&!v.isZero()?"-"+S:S};W.toSignificantDigits=W.toSD=function(f,w){var S=this,v=S.constructor;return f===void 0?(f=v.precision,w=v.rounding):(Af(f,1,Rw),w===void 0?w=v.rounding:Af(w,0,8)),z(new v(S),f,w)};W.toString=function(){var f=this,w=f.constructor,S=of(f,f.e<=w.toExpNeg||f.e>=w.toExpPos);return f.isNeg()&&!f.isZero()?"-"+S:S};W.truncated=W.trunc=function(){return z(new this.constructor(this),this.e+1,1)};W.valueOf=W.toJSON=function(){var f=this,w=f.constructor,S=of(f,f.e<=w.toExpNeg||f.e>=w.toExpPos);return f.isNeg()?"-"+S:S};function Of(f){var w,S,v,q=f.length-1,h="",H=f[0];if(q>0){for(h+=H,w=1;w<q;w++)v=f[w]+"",S=D-v.length,S&&(h+=bw(S)),h+=v;H=f[w],v=H+"",S=D-v.length,S&&(h+=bw(S))}else if(H===0)return"0";for(;H%10===0;)H/=10;return h+H}function Af(f,w,S){if(f!==~~f||f<w||f>S)throw Error(Ww+f)}function A0(f,w,S,v){var q,h,H,$;for(h=f[0];h>=10;h/=10)--w;return--w<0?(w+=D,q=0):(q=Math.ceil((w+1)/D),w%=D),h=Jf(10,D-w),$=f[q]%h|0,v==null?w<3?(w==0?$=$/100|0:w==1&&($=$/10|0),H=S<4&&$==99999||S>3&&$==49999||$==50000||$==0):H=(S<4&&$+1==h||S>3&&$+1==h/2)&&(f[q+1]/h/100|0)==Jf(10,w-2)-1||($==h/2||$==0)&&(f[q+1]/h/100|0)==0:w<4?(w==0?$=$/1000|0:w==1?$=$/100|0:w==2&&($=$/10|0),H=(v||S<4)&&$==9999||!v&&S>3&&$==4999):H=((v||S<4)&&$+1==h||!v&&S>3&&$+1==h/2)&&(f[q+1]/h/1000|0)==Jf(10,w-3)-1,H}function JS(f,w,S){for(var v,q=[0],h,H=0,$=f.length;H<$;){for(h=q.length;h--;)q[h]*=w;for(q[0]+=U2.indexOf(f.charAt(H++)),v=0;v<q.length;v++)q[v]>S-1&&(q[v+1]===void 0&&(q[v+1]=0),q[v+1]+=q[v]/S|0,q[v]%=S)}return q.reverse()}function q6(f,w){var S,v,q;if(w.isZero())return w;v=w.d.length,v<32?(S=Math.ceil(v/3),q=(1/VS(4,S)).toString()):(S=16,q="2.3283064365386962890625e-10"),f.precision+=S,w=yw(f,1,w.times(q),new f(1));for(var h=S;h--;){var H=w.times(w);w=H.times(H).minus(H).times(8).plus(1)}return f.precision-=S,w}var Z=function(){function f(v,q,h){var H,$=0,j=v.length;for(v=v.slice();j--;)H=v[j]*q+$,v[j]=H%h|0,$=H/h|0;return $&&v.unshift($),v}function w(v,q,h,H){var $,j;if(h!=H)j=h>H?1:-1;else for($=j=0;$<h;$++)if(v[$]!=q[$]){j=v[$]>q[$]?1:-1;break}return j}function S(v,q,h,H){for(var $=0;h--;)v[h]-=$,$=v[h]<q[h]?1:0,v[h]=$*H+v[h]-q[h];for(;!v[0]&&v.length>1;)v.shift()}return function(v,q,h,H,$,j){var b,J,O,g,B,R,c,U,C,r,N,s,gf,a,y,X,M,x,m,Sf,T=v.constructor,o=v.s==q.s?1:-1,u=v.d,l=q.d;if(!u||!u[0]||!l||!l[0])return new T(!v.s||!q.s||(u?l&&u[0]==l[0]:!l)?NaN:u&&u[0]==0||!l?o*0:o/0);for(j?(B=1,J=v.e-q.e):(j=Cf,B=D,J=Bf(v.e/B)-Bf(q.e/B)),m=l.length,M=u.length,C=new T(o),r=C.d=[],O=0;l[O]==(u[O]||0);O++);if(l[O]>(u[O]||0)&&J--,h==null?(a=h=T.precision,H=T.rounding):$?a=h+(v.e-q.e)+1:a=h,a<0)r.push(1),R=!0;else{if(a=a/B+2|0,O=0,m==1){for(g=0,l=l[0],a++;(O<M||g)&&a--;O++)y=g*j+(u[O]||0),r[O]=y/l|0,g=y%l|0;R=g||O<M}else{for(g=j/(l[0]+1)|0,g>1&&(l=f(l,g,j),u=f(u,g,j),m=l.length,M=u.length),X=m,N=u.slice(0,m),s=N.length;s<m;)N[s++]=0;Sf=l.slice(),Sf.unshift(0),x=l[0],l[1]>=j/2&&++x;do g=0,b=w(l,N,m,s),b<0?(gf=N[0],m!=s&&(gf=gf*j+(N[1]||0)),g=gf/x|0,g>1?(g>=j&&(g=j-1),c=f(l,g,j),U=c.length,s=N.length,b=w(c,N,U,s),b==1&&(g--,S(c,m<U?Sf:l,U,j))):(g==0&&(b=g=1),c=l.slice()),U=c.length,U<s&&c.unshift(0),S(N,c,s,j),b==-1&&(s=N.length,b=w(l,N,m,s),b<1&&(g++,S(N,m<s?Sf:l,s,j))),s=N.length):b===0&&(g++,N=[0]),r[O++]=g,b&&N[0]?N[s++]=u[X]||0:(N=[u[X]],s=1);while((X++<M||N[0]!==void 0)&&a--);R=N[0]!==void 0}r[0]||r.shift()}if(B==1)C.e=J,Uq=R;else{for(O=1,g=r[0];g>=10;g/=10)O++;C.e=O+J*B-1,z(C,$?h+C.e+1:h,H,R)}return C}}();function z(f,w,S,v){var q,h,H,$,j,b,J,O,g,B=f.constructor;f:if(w!=null){if(O=f.d,!O)return f;for(q=1,$=O[0];$>=10;$/=10)q++;if(h=w-q,h<0)h+=D,H=w,J=O[g=0],j=J/Jf(10,q-H-1)%10|0;else if(g=Math.ceil((h+1)/D),$=O.length,g>=$)if(v){for(;$++<=g;)O.push(0);J=j=0,q=1,h%=D,H=h-D+1}else break f;else{for(J=$=O[g],q=1;$>=10;$/=10)q++;h%=D,H=h-D+q,j=H<0?0:J/Jf(10,q-H-1)%10|0}if(v=v||w<0||O[g+1]!==void 0||(H<0?J:J%Jf(10,q-H-1)),b=S<4?(j||v)&&(S==0||S==(f.s<0?3:2)):j>5||j==5&&(S==4||v||S==6&&(h>0?H>0?J/Jf(10,q-H):0:O[g-1])%10&1||S==(f.s<0?8:7)),w<1||!O[0])return O.length=0,b?(w-=f.e+1,O[0]=Jf(10,(D-w%D)%D),f.e=-w||0):O[0]=f.e=0,f;if(h==0?(O.length=g,$=1,g--):(O.length=g+1,$=Jf(10,D-h),O[g]=H>0?(J/Jf(10,q-H)%Jf(10,H)|0)*$:0),b)for(;;)if(g==0){for(h=1,H=O[0];H>=10;H/=10)h++;for(H=O[0]+=$,$=1;H>=10;H/=10)$++;h!=$&&(f.e++,O[0]==Cf&&(O[0]=1));break}else{if(O[g]+=$,O[g]!=Cf)break;O[g--]=0,$=1}for(h=O.length;O[--h]===0;)O.pop()}return K&&(f.e>B.maxE?(f.d=null,f.e=NaN):f.e<B.minE&&(f.e=0,f.d=[0])),f}function of(f,w,S){if(!f.isFinite())return kq(f);var v,q=f.e,h=Of(f.d),H=h.length;return w?(S&&(v=S-H)>0?h=h.charAt(0)+"."+h.slice(1)+bw(v):H>1&&(h=h.charAt(0)+"."+h.slice(1)),h=h+(f.e<0?"e":"e+")+f.e):q<0?(h="0."+bw(-q-1)+h,S&&(v=S-H)>0&&(h+=bw(v))):q>=H?(h+=bw(q+1-H),S&&(v=S-q-1)>0&&(h=h+"."+bw(v))):((v=q+1)<H&&(h=h.slice(0,v)+"."+h.slice(v)),S&&(v=S-H)>0&&(q+1===H&&(h+="."),h+=bw(v))),h}function US(f,w){var S=f[0];for(w*=D;S>=10;S/=10)w++;return w}function cS(f,w,S){if(w>v6)throw K=!0,S&&(f.precision=S),Error(Vq);return z(new f(GS),w,1,!0)}function Kf(f,w,S){if(w>L2)throw Error(Vq);return z(new f(XS),w,S,!0)}function Fq(f){var w=f.length-1,S=w*D+1;if(w=f[w],w){for(;w%10==0;w/=10)S--;for(w=f[0];w>=10;w/=10)S++}return S}function bw(f){for(var w="";f--;)w+="0";return w}function Cq(f,w,S,v){var q,h=new f(1),H=Math.ceil(v/D+4);for(K=!1;;){if(S%2&&(h=h.times(w),Av(h.d,H)&&(q=!0)),S=Bf(S/2),S===0){S=h.d.length-1,q&&h.d[S]===0&&++h.d[S];break}w=w.times(w),Av(w.d,H)}return K=!0,h}function Yv(f){return f.d[f.d.length-1]&1}function Pq(f,w,S){for(var v,q=new f(w[0]),h=0;++h<w.length;)if(v=new f(w[h]),v.s)q[S](v)&&(q=v);else{q=v;break}return q}function N2(f,w){var S,v,q,h,H,$,j,b=0,J=0,O=0,g=f.constructor,B=g.rounding,R=g.precision;if(!f.d||!f.d[0]||f.e>17)return new g(f.d?f.d[0]?f.s<0?0:1/0:1:f.s?f.s<0?0:f:NaN);for(w==null?(K=!1,j=R):j=w,$=new g(0.03125);f.e>-2;)f=f.times($),O+=5;for(v=Math.log(Jf(2,O))/Math.LN10*2+5|0,j+=v,S=h=H=new g(1),g.precision=j;;){if(h=z(h.times(f),j,1),S=S.times(++J),$=H.plus(Z(h,S,j,1)),Of($.d).slice(0,j)===Of(H.d).slice(0,j)){for(q=O;q--;)H=z(H.times(H),j,1);if(w==null)if(b<3&&A0(H.d,j-v,B,b))g.precision=j+=10,S=h=$=new g(1),J=0,b++;else return z(H,g.precision=R,B,K=!0);else return g.precision=R,H}H=$}}function Jw(f,w){var S,v,q,h,H,$,j,b,J,O,g,B=1,R=10,c=f,U=c.d,C=c.constructor,r=C.rounding,N=C.precision;if(c.s<0||!U||!U[0]||!c.e&&U[0]==1&&U.length==1)return new C(U&&!U[0]?-1/0:c.s!=1?NaN:U?0:c);if(w==null?(K=!1,J=N):J=w,C.precision=J+=R,S=Of(U),v=S.charAt(0),Math.abs(h=c.e)<1500000000000000){for(;v<7&&v!=1||v==1&&S.charAt(1)>3;)c=c.times(f),S=Of(c.d),v=S.charAt(0),B++;h=c.e,v>1?(c=new C("0."+S),h++):c=new C(v+"."+S.slice(1))}else return b=cS(C,J+2,N).times(h+""),c=Jw(new C(v+"."+S.slice(1)),J-R).plus(b),C.precision=N,w==null?z(c,N,r,K=!0):c;for(O=c,j=H=c=Z(c.minus(1),c.plus(1),J,1),g=z(c.times(c),J,1),q=3;;){if(H=z(H.times(g),J,1),b=j.plus(Z(H,new C(q),J,1)),Of(b.d).slice(0,J)===Of(j.d).slice(0,J))if(j=j.times(2),h!==0&&(j=j.plus(cS(C,J+2,N).times(h+""))),j=Z(j,new C(B),J,1),w==null)if(A0(j.d,J-R,r,$))C.precision=J+=R,b=H=c=Z(O.minus(1),O.plus(1),J,1),g=z(c.times(c),J,1),q=$=1;else return z(j,C.precision=N,r,K=!0);else return C.precision=N,j;j=b,q+=2}}function kq(f){return String(f.s*f.s/0)}function K2(f,w){var S,v,q;for((S=w.indexOf("."))>-1&&(w=w.replace(".","")),(v=w.search(/e/i))>0?(S<0&&(S=v),S+=+w.slice(v+1),w=w.substring(0,v)):S<0&&(S=w.length),v=0;w.charCodeAt(v)===48;v++);for(q=w.length;w.charCodeAt(q-1)===48;--q);if(w=w.slice(v,q),w){if(q-=v,f.e=S=S-v-1,f.d=[],v=(S+1)%D,S<0&&(v+=D),v<q){for(v&&f.d.push(+w.slice(0,v)),q-=D;v<q;)f.d.push(+w.slice(v,v+=D));w=w.slice(v),v=D-w.length}else v-=q;for(;v--;)w+="0";f.d.push(+w),K&&(f.e>f.constructor.maxE?(f.d=null,f.e=NaN):f.e<f.constructor.minE&&(f.e=0,f.d=[0]))}else f.e=0,f.d=[0];return f}function h6(f,w){var S,v,q,h,H,$,j,b,J;if(w.indexOf("_")>-1){if(w=w.replace(/(\d)_(?=\d)/g,"$1"),Kq.test(w))return K2(f,w)}else if(w==="Infinity"||w==="NaN")return+w||(f.s=NaN),f.e=NaN,f.d=null,f;if(f6.test(w))S=16,w=w.toLowerCase();else if(e8.test(w))S=2;else if(w6.test(w))S=8;else throw Error(Ww+w);for(h=w.search(/p/i),h>0?(j=+w.slice(h+1),w=w.substring(2,h)):w=w.slice(2),h=w.indexOf("."),H=h>=0,v=f.constructor,H&&(w=w.replace(".",""),$=w.length,h=$-h,q=Cq(v,new v(S),h,h*2)),b=JS(w,S,Cf),J=b.length-1,h=J;b[h]===0;--h)b.pop();return h<0?new v(f.s*0):(f.e=US(b,J),f.d=b,K=!1,H&&(f=Z(f,q,$*4)),j&&(f=f.times(Math.abs(j)<54?Jf(2,j):mw.pow(2,j))),K=!0,f)}function H6(f,w){var S,v=w.d.length;if(v<3)return w.isZero()?w:yw(f,2,w,w);S=1.4*Math.sqrt(v),S=S>16?16:S|0,w=w.times(1/VS(5,S)),w=yw(f,2,w,w);for(var q,h=new f(5),H=new f(16),$=new f(20);S--;)q=w.times(w),w=w.times(h.plus(q.times(H.times(q).minus($))));return w}function yw(f,w,S,v,q){var h,H,$,j,b=1,J=f.precision,O=Math.ceil(J/D);for(K=!1,j=S.times(S),$=new f(v);;){if(H=Z($.times(j),new f(w++*w++),J,1),$=q?v.plus(H):v.minus(H),v=Z(H.times(j),new f(w++*w++),J,1),H=$.plus(v),H.d[O]!==void 0){for(h=O;H.d[h]===$.d[h]&&h--;);if(h==-1)break}h=$,$=v,v=H,H=h,b++}return K=!0,H.d.length=O+1,H}function VS(f,w){for(var S=f;--w;)S*=f;return S}function lq(f,w){var S,v=w.s<0,q=Kf(f,f.precision,1),h=q.times(0.5);if(w=w.abs(),w.lte(h))return tf=v?4:1,w;if(S=w.divToInt(q),S.isZero())tf=v?3:2;else{if(w=w.minus(S.times(q)),w.lte(h))return tf=Yv(S)?v?2:3:v?4:1,w;tf=Yv(S)?v?1:4:v?3:2}return w.minus(q).abs()}function p2(f,w,S,v){var q,h,H,$,j,b,J,O,g,B=f.constructor,R=S!==void 0;if(R?(Af(S,1,Rw),v===void 0?v=B.rounding:Af(v,0,8)):(S=B.precision,v=B.rounding),!f.isFinite())J=kq(f);else{for(J=of(f),H=J.indexOf("."),R?(q=2,w==16?S=S*4-3:w==8&&(S=S*3-2)):q=w,H>=0&&(J=J.replace(".",""),g=new B(1),g.e=J.length-H,g.d=JS(of(g),10,q),g.e=g.d.length),O=JS(J,10,q),h=j=O.length;O[--j]==0;)O.pop();if(!O[0])J=R?"0p+0":"0";else{if(H<0?h--:(f=new B(f),f.d=O,f.e=h,f=Z(f,g,S,v,0,q),O=f.d,h=f.e,b=Uq),H=O[S],$=q/2,b=b||O[S+1]!==void 0,b=v<4?(H!==void 0||b)&&(v===0||v===(f.s<0?3:2)):H>$||H===$&&(v===4||b||v===6&&O[S-1]&1||v===(f.s<0?8:7)),O.length=S,b)for(;++O[--S]>q-1;)O[S]=0,S||(++h,O.unshift(1));for(j=O.length;!O[j-1];--j);for(H=0,J="";H<j;H++)J+=U2.charAt(O[H]);if(R){if(j>1)if(w==16||w==8){for(H=w==16?4:3,--j;j%H;j++)J+="0";for(O=JS(J,q,w),j=O.length;!O[j-1];--j);for(H=1,J="1.";H<j;H++)J+=U2.charAt(O[H])}else J=J.charAt(0)+"."+J.slice(1);J=J+(h<0?"p":"p+")+h}else if(h<0){for(;++h;)J="0"+J;J="0."+J}else if(++h>j)for(h-=j;h--;)J+="0";else h<j&&(J=J.slice(0,h)+"."+J.slice(h))}J=(w==16?"0x":w==2?"0b":w==8?"0o":"")+J}return f.s<0?"-"+J:J}function Av(f,w){if(f.length>w)return f.length=w,!0}function $6(f){return new this(f).abs()}function j6(f){return new this(f).acos()}function b6(f){return new this(f).acosh()}function J6(f,w){return new this(f).plus(w)}function O6(f){return new this(f).asin()}function g6(f){return new this(f).asinh()}function B6(f){return new this(f).atan()}function W6(f){return new this(f).atanh()}function R6(f,w){f=new this(f),w=new this(w);var S,v=this.precision,q=this.rounding,h=v+4;return!f.s||!w.s?S=new this(NaN):!f.d&&!w.d?(S=Kf(this,h,1).times(w.s>0?0.25:0.75),S.s=f.s):!w.d||f.isZero()?(S=w.s<0?Kf(this,v,q):new this(0),S.s=f.s):!f.d||w.isZero()?(S=Kf(this,h,1).times(0.5),S.s=f.s):w.s<0?(this.precision=h,this.rounding=1,S=this.atan(Z(f,w,h,1)),w=Kf(this,h,1),this.precision=v,this.rounding=q,S=f.s<0?S.minus(w):S.plus(w)):S=this.atan(Z(f,w,h,1)),S}function G6(f){return new this(f).cbrt()}function X6(f){return z(f=new this(f),f.e+1,2)}function c6(f,w,S){return new this(f).clamp(w,S)}function E6(f){if(!f||typeof f!="object")throw Error(DS+"Object expected");var w,S,v,q=f.defaults===!0,h=["precision",1,Rw,"rounding",0,8,"toExpNeg",-xw,0,"toExpPos",0,xw,"maxE",0,xw,"minE",-xw,0,"modulo",0,9];for(w=0;w<h.length;w+=3)if(S=h[w],q&&(this[S]=V2[S]),(v=f[S])!==void 0)if(Bf(v)===v&&v>=h[w+1]&&v<=h[w+2])this[S]=v;else throw Error(Ww+S+": "+v);if(S="crypto",q&&(this[S]=V2[S]),(v=f[S])!==void 0)if(v===!0||v===!1||v===0||v===1)if(v)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[S]=!0;else throw Error(Lq);else this[S]=!1;else throw Error(Ww+S+": "+v);return this}function Q6(f){return new this(f).cos()}function Y6(f){return new this(f).cosh()}function Iq(f){var w,S,v;function q(h){var H,$,j,b=this;if(!(b instanceof q))return new q(h);if(b.constructor=q,zv(h)){b.s=h.s,K?!h.d||h.e>q.maxE?(b.e=NaN,b.d=null):h.e<q.minE?(b.e=0,b.d=[0]):(b.e=h.e,b.d=h.d.slice()):(b.e=h.e,b.d=h.d?h.d.slice():h.d);return}if(j=typeof h,j==="number"){if(h===0){b.s=1/h<0?-1:1,b.e=0,b.d=[0];return}if(h<0?(h=-h,b.s=-1):b.s=1,h===~~h&&h<1e7){for(H=0,$=h;$>=10;$/=10)H++;K?H>q.maxE?(b.e=NaN,b.d=null):H<q.minE?(b.e=0,b.d=[0]):(b.e=H,b.d=[h]):(b.e=H,b.d=[h]);return}else if(h*0!==0){h||(b.s=NaN),b.e=NaN,b.d=null;return}return K2(b,h.toString())}else if(j!=="string")throw Error(Ww+h);return($=h.charCodeAt(0))===45?(h=h.slice(1),b.s=-1):($===43&&(h=h.slice(1)),b.s=1),Kq.test(h)?K2(b,h):h6(b,h)}if(q.prototype=W,q.ROUND_UP=0,q.ROUND_DOWN=1,q.ROUND_CEIL=2,q.ROUND_FLOOR=3,q.ROUND_HALF_UP=4,q.ROUND_HALF_DOWN=5,q.ROUND_HALF_EVEN=6,q.ROUND_HALF_CEIL=7,q.ROUND_HALF_FLOOR=8,q.EUCLID=9,q.config=q.set=E6,q.clone=Iq,q.isDecimal=zv,q.abs=$6,q.acos=j6,q.acosh=b6,q.add=J6,q.asin=O6,q.asinh=g6,q.atan=B6,q.atanh=W6,q.atan2=R6,q.cbrt=G6,q.ceil=X6,q.clamp=c6,q.cos=Q6,q.cosh=Y6,q.div=A6,q.exp=z6,q.floor=_6,q.hypot=M6,q.ln=D6,q.log=U6,q.log10=L6,q.log2=V6,q.max=N6,q.min=K6,q.mod=F6,q.mul=C6,q.pow=P6,q.random=k6,q.round=l6,q.sign=I6,q.sin=r6,q.sinh=x6,q.sqrt=y6,q.sub=m6,q.sum=T6,q.tan=u6,q.tanh=n6,q.trunc=i6,f===void 0&&(f={}),f&&f.defaults!==!0)for(v=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],w=0;w<v.length;)f.hasOwnProperty(S=v[w++])||(f[S]=this[S]);return q.config(f),q}function A6(f,w){return new this(f).div(w)}function z6(f){return new this(f).exp()}function _6(f){return z(f=new this(f),f.e+1,3)}function M6(){var f,w,S=new this(0);for(K=!1,f=0;f<arguments.length;)if(w=new this(arguments[f++]),w.d)S.d&&(S=S.plus(w.times(w)));else{if(w.s)return K=!0,new this(1/0);S=w}return K=!0,S.sqrt()}function zv(f){return f instanceof mw||f&&f.toStringTag===Nq||!1}function D6(f){return new this(f).ln()}function U6(f,w){return new this(f).log(w)}function V6(f){return new this(f).log(2)}function L6(f){return new this(f).log(10)}function N6(){return Pq(this,arguments,"lt")}function K6(){return Pq(this,arguments,"gt")}function F6(f,w){return new this(f).mod(w)}function C6(f,w){return new this(f).mul(w)}function P6(f,w){return new this(f).pow(w)}function k6(f){var w,S,v,q,h=0,H=new this(1),$=[];if(f===void 0?f=this.precision:Af(f,1,Rw),v=Math.ceil(f/D),this.crypto)if(crypto.getRandomValues)for(w=crypto.getRandomValues(new Uint32Array(v));h<v;)q=w[h],q>=4290000000?w[h]=crypto.getRandomValues(new Uint32Array(1))[0]:$[h++]=q%1e7;else if(crypto.randomBytes){for(w=crypto.randomBytes(v*=4);h<v;)q=w[h]+(w[h+1]<<8)+(w[h+2]<<16)+((w[h+3]&127)<<24),q>=2140000000?crypto.randomBytes(4).copy(w,h):($.push(q%1e7),h+=4);h=v/4}else throw Error(Lq);else for(;h<v;)$[h++]=Math.random()*1e7|0;for(v=$[--h],f%=D,v&&f&&(q=Jf(10,D-f),$[h]=(v/q|0)*q);$[h]===0;h--)$.pop();if(h<0)S=0,$=[0];else{for(S=-1;$[0]===0;S-=D)$.shift();for(v=1,q=$[0];q>=10;q/=10)v++;v<D&&(S-=D-v)}return H.e=S,H.d=$,H}function l6(f){return z(f=new this(f),f.e+1,this.rounding)}function I6(f){return f=new this(f),f.d?f.d[0]?f.s:0*f.s:f.s||NaN}function r6(f){return new this(f).sin()}function x6(f){return new this(f).sinh()}function y6(f){return new this(f).sqrt()}function m6(f,w){return new this(f).sub(w)}function T6(){var f=0,w=arguments,S=new this(w[f]);for(K=!1;S.s&&++f<w.length;)S=S.plus(w[f]);return K=!0,z(S,this.precision,this.rounding)}function u6(f){return new this(f).tan()}function n6(f){return new this(f).tanh()}function i6(f){return z(f=new this(f),f.e+1,1)}W[Symbol.for("nodejs.util.inspect.custom")]=W.toString;W[Symbol.toStringTag]="Decimal";var mw=W.constructor=Iq(V2);GS=new mw(GS);XS=new mw(XS);var L0=mw;function ES(f){return f===null?f:Array.isArray(f)?f.map(ES):typeof f=="object"?a6(f)?o6(f):o2(f,ES):f}function a6(f){return f!==null&&typeof f=="object"&&typeof f.$type=="string"}function o6({$type:f,value:w}){switch(f){case"BigInt":return BigInt(w);case"Bytes":{let{buffer:S,byteOffset:v,byteLength:q}=Buffer.from(w,"base64");return new Uint8Array(S,v,q)}case"DateTime":return new Date(w);case"Decimal":return new L0(w);case"Json":return JSON.parse(w);default:MS(w,"Unknown tagged value")}}function d2(f){return f.substring(0,1).toLowerCase()+f.substring(1)}function s2(f){return f instanceof Date||Object.prototype.toString.call(f)==="[object Date]"}function rq(f){return f.toString()!=="Invalid Date"}function Z2(f){return mw.isDecimal(f)?!0:f!==null&&typeof f=="object"&&typeof f.s=="number"&&typeof f.e=="number"&&typeof f.toFixed=="function"&&Array.isArray(f.d)}var p6=d(qq()),d6=d(p("fs")),s6={keyword:_w,entity:_w,value:(f)=>Ff(B0(f)),punctuation:B0,directive:_w,function:_w,variable:(f)=>Ff(B0(f)),string:(f)=>Ff(E0(f)),boolean:U0,number:_w,comment:n2},Z6=(f)=>f,qS={},t6=0,P={manual:qS.Prism&&qS.Prism.manual,disableWorkerMessageHandler:qS.Prism&&qS.Prism.disableWorkerMessageHandler,util:{encode:function(f){if(f instanceof mf){let w=f;return new mf(w.type,P.util.encode(w.content),w.alias)}else return Array.isArray(f)?f.map(P.util.encode):f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(f){return Object.prototype.toString.call(f).slice(8,-1)},objId:function(f){return f.__id||Object.defineProperty(f,"__id",{value:++t6}),f.__id},clone:function f(w,S){let v,q,h=P.util.type(w);switch(S=S||{},h){case"Object":if(q=P.util.objId(w),S[q])return S[q];v={},S[q]=v;for(let H in w)w.hasOwnProperty(H)&&(v[H]=f(w[H],S));return v;case"Array":return q=P.util.objId(w),S[q]?S[q]:(v=[],S[q]=v,w.forEach(function(H,$){v[$]=f(H,S)}),v);default:return w}}},languages:{extend:function(f,w){let S=P.util.clone(P.languages[f]);for(let v in w)S[v]=w[v];return S},insertBefore:function(f,w,S,v){v=v||P.languages;let q=v[f],h={};for(let $ in q)if(q.hasOwnProperty($)){if($==w)for(let j in S)S.hasOwnProperty(j)&&(h[j]=S[j]);S.hasOwnProperty($)||(h[$]=q[$])}let H=v[f];return v[f]=h,P.languages.DFS(P.languages,function($,j){j===H&&$!=f&&(this[$]=h)}),h},DFS:function f(w,S,v,q){q=q||{};let h=P.util.objId;for(let H in w)if(w.hasOwnProperty(H)){S.call(w,H,w[H],v||H);let $=w[H],j=P.util.type($);j==="Object"&&!q[h($)]?(q[h($)]=!0,f($,S,null,q)):j==="Array"&&!q[h($)]&&(q[h($)]=!0,f($,S,H,q))}}},plugins:{},highlight:function(f,w,S){let v={code:f,grammar:w,language:S};return P.hooks.run("before-tokenize",v),v.tokens=P.tokenize(v.code,v.grammar),P.hooks.run("after-tokenize",v),mf.stringify(P.util.encode(v.tokens),v.language)},matchGrammar:function(f,w,S,v,q,h,H){for(let c in S){if(!S.hasOwnProperty(c)||!S[c])continue;if(c==H)return;let U=S[c];U=P.util.type(U)==="Array"?U:[U];for(let C=0;C<U.length;++C){let r=U[C],N=r.inside,s=!!r.lookbehind,gf=!!r.greedy,a=0,y=r.alias;if(gf&&!r.pattern.global){let X=r.pattern.toString().match(/[imuy]*$/)[0];r.pattern=RegExp(r.pattern.source,X+"g")}r=r.pattern||r;for(let X=v,M=q;X<w.length;M+=w[X].length,++X){let x=w[X];if(w.length>f.length)return;if(x instanceof mf)continue;if(gf&&X!=w.length-1){r.lastIndex=M;var O=r.exec(f);if(!O)break;var J=O.index+(s?O[1].length:0),g=O.index+O[0].length,$=X,j=M;for(let l=w.length;$<l&&(j<g||!w[$].type&&!w[$-1].greedy);++$)j+=w[$].length,J>=j&&(++X,M=j);if(w[X]instanceof mf)continue;b=$-X,x=f.slice(M,j),O.index-=M}else{r.lastIndex=0;var O=r.exec(x),b=1}if(!O){if(h)break;continue}s&&(a=O[1]?O[1].length:0);var J=O.index+a,O=O[0].slice(a),g=J+O.length,B=x.slice(0,J),R=x.slice(g);let m=[X,b];B&&(++X,M+=B.length,m.push(B));let Sf=new mf(c,N?P.tokenize(O,N):O,y,O,gf);if(m.push(Sf),R&&m.push(R),Array.prototype.splice.apply(w,m),b!=1&&P.matchGrammar(f,w,S,X,M,!0,c),h)break}}}},tokenize:function(f,w){let S=[f],v=w.rest;if(v){for(let q in v)w[q]=v[q];delete w.rest}return P.matchGrammar(f,S,w,0,0,!1),S},hooks:{all:{},add:function(f,w){let S=P.hooks.all;S[f]=S[f]||[],S[f].push(w)},run:function(f,w){let S=P.hooks.all[f];if(!(!S||!S.length))for(var v=0,q;q=S[v++];)q(w)}},Token:mf};P.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+\.?\d*|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/};P.languages.javascript=P.languages.extend("clike",{"class-name":[P.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])[_$A-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\.(?:prototype|constructor))/,lookbehind:!0}],keyword:[{pattern:/((?:^|})\s*)(?:catch|finally)\b/,lookbehind:!0},{pattern:/(^|[^.])\b(?:as|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],number:/\b(?:(?:0[xX](?:[\dA-Fa-f](?:_[\dA-Fa-f])?)+|0[bB](?:[01](?:_[01])?)+|0[oO](?:[0-7](?:_[0-7])?)+)n?|(?:\d(?:_\d)?)+n|NaN|Infinity)\b|(?:\b(?:\d(?:_\d)?)+\.?(?:\d(?:_\d)?)*|\B\.(?:\d(?:_\d)?)+)(?:[Ee][+-]?(?:\d(?:_\d)?)+)?/,function:/[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,operator:/-[-=]?|\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\|[|=]?|\*\*?=?|\/=?|~|\^=?|%=?|\?|\.{3}/});P.languages.javascript["class-name"][0].pattern=/(\b(?:class|interface|extends|implements|instanceof|new)\s+)[\w.\\]+/;P.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s])\s*)\/(\[(?:[^\]\\\r\n]|\\.)*]|\\.|[^/\\\[\r\n])+\/[gimyus]{0,6}(?=\s*($|[\r\n,.;})\]]))/,lookbehind:!0,greedy:!0},"function-variable":{pattern:/[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+[_$A-Za-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)?\s*\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\))/,lookbehind:!0,inside:P.languages.javascript},{pattern:/[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*=>)/i,inside:P.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\)\s*=>)/,lookbehind:!0,inside:P.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:[_$A-Za-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*\s*)\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\)\s*\{)/,lookbehind:!0,inside:P.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});P.languages.markup&&P.languages.markup.tag.addInlined("script","javascript");P.languages.js=P.languages.javascript;P.languages.typescript=P.languages.extend("javascript",{keyword:/\b(?:abstract|as|async|await|break|case|catch|class|const|constructor|continue|debugger|declare|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|is|keyof|let|module|namespace|new|null|of|package|private|protected|public|readonly|return|require|set|static|super|switch|this|throw|try|type|typeof|var|void|while|with|yield)\b/,builtin:/\b(?:string|Function|any|number|boolean|Array|symbol|console|Promise|unknown|never)\b/});P.languages.ts=P.languages.typescript;function mf(f,w,S,v,q){this.type=f,this.content=w,this.alias=S,this.length=(v||"").length|0,this.greedy=!!q}mf.stringify=function(f,w){return typeof f=="string"?f:Array.isArray(f)?f.map(function(S){return mf.stringify(S,w)}).join(""):e6(f.type)(f.content)};function e6(f){return s6[f]||Z6}function f5(f){return w5(f,P.languages.javascript)}function w5(f,w){return P.tokenize(f,w).map((S)=>mf.stringify(S)).join("")}var S5=d(M$());function v5(f){return S5.default(f)}var q5=class f{static read(w){let S;try{S=d6.default.readFileSync(w,"utf-8")}catch{return null}return f.fromContent(S)}static fromContent(w){let S=w.split(/\r?\n/);return new f(1,S)}constructor(w,S){this.firstLineNumber=w,this.lines=S}get lastLineNumber(){return this.firstLineNumber+this.lines.length-1}mapLineAt(w,S){if(w<this.firstLineNumber||w>this.lines.length+this.firstLineNumber)return this;let v=w-this.firstLineNumber,q=[...this.lines];return q[v]=S(q[v]),new f(this.firstLineNumber,q)}mapLines(w){return new f(this.firstLineNumber,this.lines.map((S,v)=>w(S,this.firstLineNumber+v)))}lineAt(w){return this.lines[w-this.firstLineNumber]}prependSymbolAt(w,S){return this.mapLines((v,q)=>q===w?`${S} ${v}`:`  ${v}`)}slice(w,S){let v=this.lines.slice(w-1,S).join(`
`);return new f(w,v5(v).split(`
`))}highlight(){let w=f5(this.toString());return new f(this.firstLineNumber,w.split(`
`))}toString(){return this.lines.join(`
`)}},h5={red:Mw,gray:n2,dim:D0,bold:Ff,underline:Uf,highlightSource:(f)=>f.highlight()},H5={red:(f)=>f,gray:(f)=>f,dim:(f)=>f,bold:(f)=>f,underline:(f)=>f,highlightSource:(f)=>f};function $5({message:f,originalMethod:w,isPanic:S,callArguments:v}){return{functionName:`prisma.${w}()`,message:f,isPanic:S??!1,callArguments:v}}function j5({callsite:f,message:w,originalMethod:S,isPanic:v,callArguments:q},h){let H=$5({message:w,originalMethod:S,isPanic:v,callArguments:q});if(!f||typeof window<"u")return H;let $=f.getLocation();if(!$||!$.lineNumber||!$.columnNumber)return H;let j=Math.max(1,$.lineNumber-3),b=q5.read($.fileName)?.slice(j,$.lineNumber),J=b?.lineAt($.lineNumber);if(b&&J){let O=J5(J),g=b5(J);if(!g)return H;H.functionName=`${g.code})`,H.location=$,v||(b=b.mapLineAt($.lineNumber,(R)=>R.slice(0,g.openingBraceIndex))),b=h.highlightSource(b);let B=String(b.lastLineNumber).length;if(H.contextLines=b.mapLines((R,c)=>h.gray(String(c).padStart(B))+" "+R).mapLines((R)=>h.dim(R)).prependSymbolAt($.lineNumber,h.bold(h.red("\u2192"))),q){let R=O+B+1;R+=2,H.callArguments=p6.default(q,R).slice(R)}}return H}function b5(f){let w=Object.keys(a2.ModelAction).join("|"),S=new RegExp(String.raw`\.(${w})\(`).exec(f);if(S){let v=S.index+S[0].length,q=f.lastIndexOf(" ",S.index)+1;return{code:f.slice(q,v),openingBraceIndex:v}}return null}function J5(f){let w=0;for(let S=0;S<f.length;S++){if(f.charAt(S)!==" ")return w;w++}return w}function O5({functionName:f,location:w,message:S,isPanic:v,contextLines:q,callArguments:h},H){let $=[""],j=w?" in":":";if(v?($.push(H.red(`Oops, an unknown error occurred! This is ${H.bold("on us")}, you did nothing wrong.`)),$.push(H.red(`It occurred in the ${H.bold(`\`${f}\``)} invocation${j}`))):$.push(H.red(`Invalid ${H.bold(`\`${f}\``)} invocation${j}`)),w&&$.push(H.underline(g5(w))),q){$.push("");let b=[q.toString()];h&&(b.push(h),b.push(H.dim(")"))),$.push(b.join("")),h&&$.push("")}else $.push(""),h&&$.push(h),$.push("");return $.push(S),$.join(`
`)}function g5(f){let w=[f.fileName];return f.lineNumber&&w.push(String(f.lineNumber)),f.columnNumber&&w.push(String(f.columnNumber)),w.join(":")}function xq(f){let w=f.showColors?h5:H5,S;return S=j5(f,w),O5(S,w)}var B5=d(Hq());function W5(f,w,S){let v=yq(f),q=R5(v),h=X5(q);h?aq(h,w,S):w.addErrorMessage(()=>"Unknown error")}function yq(f){return f.errors.flatMap((w)=>w.kind==="Union"?yq(w):[w])}function R5(f){let w=new Map,S=[];for(let v of f){if(v.kind!=="InvalidArgumentType"){S.push(v);continue}let q=`${v.selectionPath.join(".")}:${v.argumentPath.join(".")}`,h=w.get(q);h?w.set(q,{...v,argument:{...v.argument,typeNames:G5(h.argument.typeNames,v.argument.typeNames)}}):w.set(q,v)}return S.push(...w.values()),S}function G5(f,w){return[...new Set(f.concat(w))]}function X5(f){return t8(f,(w,S)=>{let v=_v(w),q=_v(S);return v!==q?v-q:Mv(w)-Mv(S)})}function _v(f){let w=0;return Array.isArray(f.selectionPath)&&(w+=f.selectionPath.length),Array.isArray(f.argumentPath)&&(w+=f.argumentPath.length),w}function Mv(f){switch(f.kind){case"InvalidArgumentValue":case"ValueTooLarge":return 20;case"InvalidArgumentType":return 10;case"RequiredArgumentMissing":return-10;default:return 0}}var pf=class{constructor(f,w){this.name=f,this.value=w,this.isRequired=!1}makeRequired(){return this.isRequired=!0,this}write(f){let{colors:{green:w}}=f.context;f.addMarginSymbol(w(this.isRequired?"+":"?")),f.write(w(this.name)),this.isRequired||f.write(w("?")),f.write(w(": ")),typeof this.value=="string"?f.write(w(this.value)):f.write(this.value)}},mq=class{constructor(f=0,w){this.context=w,this.lines=[],this.currentLine="",this.currentIndent=0,this.currentIndent=f}write(f){return typeof f=="string"?this.currentLine+=f:f.write(this),this}writeJoined(f,w,S=(v,q)=>q.write(v)){let v=w.length-1;for(let q=0;q<w.length;q++)S(w[q],this),q!==v&&this.write(f);return this}writeLine(f){return this.write(f).newLine()}newLine(){this.lines.push(this.indentedCurrentLine()),this.currentLine="",this.marginSymbol=void 0;let f=this.afterNextNewLineCallback;return this.afterNextNewLineCallback=void 0,f?.(),this}withIndent(f){return this.indent(),f(this),this.unindent(),this}afterNextNewline(f){return this.afterNextNewLineCallback=f,this}indent(){return this.currentIndent++,this}unindent(){return this.currentIndent>0&&this.currentIndent--,this}addMarginSymbol(f){return this.marginSymbol=f,this}toString(){return this.lines.concat(this.indentedCurrentLine()).join(`
`)}getCurrentLineLength(){return this.currentLine.length}indentedCurrentLine(){let f=this.currentLine.padStart(this.currentLine.length+2*this.currentIndent);return this.marginSymbol?this.marginSymbol+f.slice(1):f}},c5=class{constructor(f){this.value=f}write(f){f.write(this.value)}markAsError(){this.value.markAsError()}},hS=(f)=>f,Tq={bold:hS,red:hS,green:hS,dim:hS,enabled:!1},E5={bold:Ff,red:Mw,green:E0,dim:D0,enabled:!0},t2={write(f){f.writeLine(",")}},LS=class{constructor(f){this.contents=f,this.isUnderlined=!1,this.color=(w)=>w}underline(){return this.isUnderlined=!0,this}setColor(f){return this.color=f,this}write(f){let w=f.getCurrentLineLength();f.write(this.color(this.contents)),this.isUnderlined&&f.afterNextNewline(()=>{f.write(" ".repeat(w)).writeLine(this.color("~".repeat(this.contents.length)))})}},e2=class{constructor(){this.hasError=!1}markAsError(){return this.hasError=!0,this}},uq=class extends e2{constructor(){super(...arguments);this.items=[]}addItem(f){return this.items.push(new c5(f)),this}getField(f){return this.items[f]}getPrintWidth(){return this.items.length===0?2:Math.max(...this.items.map((f)=>f.value.getPrintWidth()))+2}write(f){if(this.items.length===0){this.writeEmpty(f);return}this.writeWithItems(f)}writeEmpty(f){let w=new LS("[]");this.hasError&&w.setColor(f.context.colors.red).underline(),f.write(w)}writeWithItems(f){let{colors:w}=f.context;f.writeLine("[").withIndent(()=>f.writeJoined(t2,this.items).newLine()).write("]"),this.hasError&&f.afterNextNewline(()=>{f.writeLine(w.red("~".repeat(this.getPrintWidth())))})}asObject(){}},nq=class f extends e2{constructor(){super(...arguments);this.fields={},this.suggestions=[]}addField(w){this.fields[w.name]=w}addSuggestion(w){this.suggestions.push(w)}getField(w){return this.fields[w]}getDeepField(w){let[S,...v]=w,q=this.getField(S);if(!q)return;let h=q;for(let H of v){let $;if(h.value instanceof f?$=h.value.getField(H):h.value instanceof uq&&($=h.value.getField(Number(H))),!$)return;h=$}return h}getDeepFieldValue(w){return w.length===0?this:this.getDeepField(w)?.value}hasField(w){return!!this.getField(w)}removeAllFields(){this.fields={}}removeField(w){delete this.fields[w]}getFields(){return this.fields}isEmpty(){return Object.keys(this.fields).length===0}getFieldValue(w){return this.getField(w)?.value}getDeepSubSelectionValue(w){let S=this;for(let v of w){if(!(S instanceof f))return;let q=S.getSubSelectionValue(v);if(!q)return;S=q}return S}getDeepSelectionParent(w){let S=this.getSelectionParent();if(!S)return;let v=S;for(let q of w){let h=v.value.getFieldValue(q);if(!h||!(h instanceof f))return;let H=h.getSelectionParent();if(!H)return;v=H}return v}getSelectionParent(){let w=this.getField("select")?.value.asObject();if(w)return{kind:"select",value:w};let S=this.getField("include")?.value.asObject();if(S)return{kind:"include",value:S}}getSubSelectionValue(w){return this.getSelectionParent()?.value.fields[w].value}getPrintWidth(){let w=Object.values(this.fields);return w.length==0?2:Math.max(...w.map((S)=>S.getPrintWidth()))+2}write(w){let S=Object.values(this.fields);if(S.length===0&&this.suggestions.length===0){this.writeEmpty(w);return}this.writeWithContents(w,S)}asObject(){return this}writeEmpty(w){let S=new LS("{}");this.hasError&&S.setColor(w.context.colors.red).underline(),w.write(S)}writeWithContents(w,S){w.writeLine("{").withIndent(()=>{w.writeJoined(t2,[...S,...this.suggestions]).newLine()}),w.write("}"),this.hasError&&w.afterNextNewline(()=>{w.writeLine(w.context.colors.red("~".repeat(this.getPrintWidth())))})}},Yf=class extends e2{constructor(f){super();this.text=f}getPrintWidth(){return this.text.length}write(f){let w=new LS(this.text);this.hasError&&w.underline().setColor(f.context.colors.red),f.write(w)}asObject(){}},iq=class{constructor(){this.fields=[]}addField(f,w){return this.fields.push({write(S){let{green:v,dim:q}=S.context.colors;S.write(v(q(`${f}: ${w}`))).addMarginSymbol(v(q("+")))}}),this}write(f){let{colors:{green:w}}=f.context;f.writeLine(w("{")).withIndent(()=>{f.writeJoined(t2,this.fields).newLine()}).write(w("}")).addMarginSymbol(w("+"))}};function aq(f,w,S){switch(f.kind){case"MutuallyExclusiveFields":Q5(f,w);break;case"IncludeOnScalar":Y5(f,w);break;case"EmptySelection":A5(f,w,S);break;case"UnknownSelectionField":D5(f,w);break;case"InvalidSelectionValue":U5(f,w);break;case"UnknownArgument":V5(f,w);break;case"UnknownInputField":L5(f,w);break;case"RequiredArgumentMissing":N5(f,w);break;case"InvalidArgumentType":K5(f,w);break;case"InvalidArgumentValue":F5(f,w);break;case"ValueTooLarge":C5(f,w);break;case"SomeFieldsMissing":P5(f,w);break;case"TooManyFieldsGiven":k5(f,w);break;case"Union":W5(f,w,S);break;default:throw new Error("not implemented: "+f.kind)}}function Q5(f,w){let S=w.arguments.getDeepSubSelectionValue(f.selectionPath)?.asObject();S&&(S.getField(f.firstField)?.markAsError(),S.getField(f.secondField)?.markAsError()),w.addErrorMessage((v)=>`Please ${v.bold("either")} use ${v.green(`\`${f.firstField}\``)} or ${v.green(`\`${f.secondField}\``)}, but ${v.red("not both")} at the same time.`)}function Y5(f,w){let[S,v]=N0(f.selectionPath),q=f.outputType,h=w.arguments.getDeepSelectionParent(S)?.value;if(h&&(h.getField(v)?.markAsError(),q))for(let H of q.fields)H.isRelation&&h.addSuggestion(new pf(H.name,"true"));w.addErrorMessage((H)=>{let $=`Invalid scalar field ${H.red(`\`${v}\``)} for ${H.bold("include")} statement`;return q?$+=` on model ${H.bold(q.name)}. ${K0(H)}`:$+=".",$+=`
Note that ${H.bold("include")} statements only accept relation fields.`,$})}function A5(f,w,S){let v=w.arguments.getDeepSubSelectionValue(f.selectionPath)?.asObject();if(v){let q=v.getField("omit")?.value.asObject();if(q){z5(f,w,q);return}if(v.hasField("select")){_5(f,w);return}}if(S?.[d2(f.outputType.name)]){M5(f,w);return}w.addErrorMessage(()=>`Unknown field at "${f.selectionPath.join(".")} selection"`)}function z5(f,w,S){S.removeAllFields();for(let v of f.outputType.fields)S.addSuggestion(new pf(v.name,"false"));w.addErrorMessage((v)=>`The ${v.red("omit")} statement includes every field of the model ${v.bold(f.outputType.name)}. At least one field must be included in the result`)}function _5(f,w){let S=f.outputType,v=w.arguments.getDeepSelectionParent(f.selectionPath)?.value,q=v?.isEmpty()??!1;v&&(v.removeAllFields(),dq(v,S)),w.addErrorMessage((h)=>q?`The ${h.red("`select`")} statement for type ${h.bold(S.name)} must not be empty. ${K0(h)}`:`The ${h.red("`select`")} statement for type ${h.bold(S.name)} needs ${h.bold("at least one truthy value")}.`)}function M5(f,w){let S=new iq;for(let q of f.outputType.fields)q.isRelation||S.addField(q.name,"false");let v=new pf("omit",S).makeRequired();if(f.selectionPath.length===0)w.arguments.addSuggestion(v);else{let[q,h]=N0(f.selectionPath),H=w.arguments.getDeepSelectionParent(q)?.value.asObject()?.getField(h);if(H){let $=H?.value.asObject()??new nq;$.addSuggestion(v),H.value=$}}w.addErrorMessage((q)=>`The global ${q.red("omit")} configuration excludes every field of the model ${q.bold(f.outputType.name)}. At least one field must be included in the result`)}function D5(f,w){let S=sq(f.selectionPath,w);if(S.parentKind!=="unknown"){S.field.markAsError();let v=S.parent;switch(S.parentKind){case"select":dq(v,f.outputType);break;case"include":l5(v,f.outputType);break;case"omit":I5(v,f.outputType);break}}w.addErrorMessage((v)=>{let q=[`Unknown field ${v.red(`\`${S.fieldName}\``)}`];return S.parentKind!=="unknown"&&q.push(`for ${v.bold(S.parentKind)} statement`),q.push(`on model ${v.bold(`\`${f.outputType.name}\``)}.`),q.push(K0(v)),q.join(" ")})}function U5(f,w){let S=sq(f.selectionPath,w);S.parentKind!=="unknown"&&S.field.value.markAsError(),w.addErrorMessage((v)=>`Invalid value for selection field \`${v.red(S.fieldName)}\`: ${f.underlyingError}`)}function V5(f,w){let S=f.argumentPath[0],v=w.arguments.getDeepSubSelectionValue(f.selectionPath)?.asObject();v&&(v.getField(S)?.markAsError(),r5(v,f.arguments)),w.addErrorMessage((q)=>oq(q,S,f.arguments.map((h)=>h.name)))}function L5(f,w){let[S,v]=N0(f.argumentPath),q=w.arguments.getDeepSubSelectionValue(f.selectionPath)?.asObject();if(q){q.getDeepField(f.argumentPath)?.markAsError();let h=q.getDeepFieldValue(S)?.asObject();h&&Zq(h,f.inputType)}w.addErrorMessage((h)=>oq(h,v,f.inputType.fields.map((H)=>H.name)))}function oq(f,w,S){let v=[`Unknown argument \`${f.red(w)}\`.`],q=y5(w,S);return q&&v.push(`Did you mean \`${f.green(q)}\`?`),S.length>0&&v.push(K0(f)),v.join(" ")}function N5(f,w){let S;w.addErrorMessage((j)=>S?.value instanceof Yf&&S.value.text==="null"?`Argument \`${j.green(h)}\` must not be ${j.red("null")}.`:`Argument \`${j.green(h)}\` is missing.`);let v=w.arguments.getDeepSubSelectionValue(f.selectionPath)?.asObject();if(!v)return;let[q,h]=N0(f.argumentPath),H=new iq,$=v.getDeepFieldValue(q)?.asObject();if($)if(S=$.getField(h),S&&$.removeField(h),f.inputTypes.length===1&&f.inputTypes[0].kind==="object"){for(let j of f.inputTypes[0].fields)H.addField(j.name,j.typeNames.join(" | "));$.addSuggestion(new pf(h,H).makeRequired())}else{let j=f.inputTypes.map(pq).join(" | ");$.addSuggestion(new pf(h,j).makeRequired())}}function pq(f){return f.kind==="list"?`${pq(f.elementType)}[]`:f.name}function K5(f,w){let S=f.argument.name,v=w.arguments.getDeepSubSelectionValue(f.selectionPath)?.asObject();v&&v.getDeepFieldValue(f.argumentPath)?.markAsError(),w.addErrorMessage((q)=>{let h=NS("or",f.argument.typeNames.map((H)=>q.green(H)));return`Argument \`${q.bold(S)}\`: Invalid value provided. Expected ${h}, provided ${q.red(f.inferredType)}.`})}function F5(f,w){let S=f.argument.name,v=w.arguments.getDeepSubSelectionValue(f.selectionPath)?.asObject();v&&v.getDeepFieldValue(f.argumentPath)?.markAsError(),w.addErrorMessage((q)=>{let h=[`Invalid value for argument \`${q.bold(S)}\``];if(f.underlyingError&&h.push(`: ${f.underlyingError}`),h.push("."),f.argument.typeNames.length>0){let H=NS("or",f.argument.typeNames.map(($)=>q.green($)));h.push(` Expected ${H}.`)}return h.join("")})}function C5(f,w){let S=f.argument.name,v=w.arguments.getDeepSubSelectionValue(f.selectionPath)?.asObject(),q;if(v){let h=v.getDeepField(f.argumentPath)?.value;h?.markAsError(),h instanceof Yf&&(q=h.text)}w.addErrorMessage((h)=>{let H=["Unable to fit value"];return q&&H.push(h.red(q)),H.push(`into a 64-bit signed integer for field \`${h.bold(S)}\``),H.join(" ")})}function P5(f,w){let S=f.argumentPath[f.argumentPath.length-1],v=w.arguments.getDeepSubSelectionValue(f.selectionPath)?.asObject();if(v){let q=v.getDeepFieldValue(f.argumentPath)?.asObject();q&&Zq(q,f.inputType)}w.addErrorMessage((q)=>{let h=[`Argument \`${q.bold(S)}\` of type ${q.bold(f.inputType.name)} needs`];return f.constraints.minFieldCount===1?f.constraints.requiredFields?h.push(`${q.green("at least one of")} ${NS("or",f.constraints.requiredFields.map((H)=>`\`${q.bold(H)}\``))} arguments.`):h.push(`${q.green("at least one")} argument.`):h.push(`${q.green(`at least ${f.constraints.minFieldCount}`)} arguments.`),h.push(K0(q)),h.join(" ")})}function k5(f,w){let S=f.argumentPath[f.argumentPath.length-1],v=w.arguments.getDeepSubSelectionValue(f.selectionPath)?.asObject(),q=[];if(v){let h=v.getDeepFieldValue(f.argumentPath)?.asObject();h&&(h.markAsError(),q=Object.keys(h.getFields()))}w.addErrorMessage((h)=>{let H=[`Argument \`${h.bold(S)}\` of type ${h.bold(f.inputType.name)} needs`];return f.constraints.minFieldCount===1&&f.constraints.maxFieldCount==1?H.push(`${h.green("exactly one")} argument,`):f.constraints.maxFieldCount==1?H.push(`${h.green("at most one")} argument,`):H.push(`${h.green(`at most ${f.constraints.maxFieldCount}`)} arguments,`),H.push(`but you provided ${NS("and",q.map(($)=>h.red($)))}. Please choose`),f.constraints.maxFieldCount===1?H.push("one."):H.push(`${f.constraints.maxFieldCount}.`),H.join(" ")})}function dq(f,w){for(let S of w.fields)f.hasField(S.name)||f.addSuggestion(new pf(S.name,"true"))}function l5(f,w){for(let S of w.fields)S.isRelation&&!f.hasField(S.name)&&f.addSuggestion(new pf(S.name,"true"))}function I5(f,w){for(let S of w.fields)!f.hasField(S.name)&&!S.isRelation&&f.addSuggestion(new pf(S.name,"true"))}function r5(f,w){for(let S of w)f.hasField(S.name)||f.addSuggestion(new pf(S.name,S.typeNames.join(" | ")))}function sq(f,w){let[S,v]=N0(f),q=w.arguments.getDeepSubSelectionValue(S)?.asObject();if(!q)return{parentKind:"unknown",fieldName:v};let h=q.getFieldValue("select")?.asObject(),H=q.getFieldValue("include")?.asObject(),$=q.getFieldValue("omit")?.asObject(),j=h?.getField(v);return h&&j?{parentKind:"select",parent:h,field:j,fieldName:v}:(j=H?.getField(v),H&&j?{parentKind:"include",field:j,parent:H,fieldName:v}:(j=$?.getField(v),$&&j?{parentKind:"omit",field:j,parent:$,fieldName:v}:{parentKind:"unknown",fieldName:v}))}function Zq(f,w){if(w.kind==="object")for(let S of w.fields)f.hasField(S.name)||f.addSuggestion(new pf(S.name,S.typeNames.join(" | ")))}function N0(f){let w=[...f],S=w.pop();if(!S)throw new Error("unexpected empty path");return[w,S]}function K0({green:f,enabled:w}){return"Available options are "+(w?`listed in ${f("green")}`:"marked with ?")+"."}function NS(f,w){if(w.length===1)return w[0];let S=[...w],v=S.pop();return`${S.join(", ")} ${f} ${v}`}var x5=3;function y5(f,w){let S=1/0,v;for(let q of w){let h=B5.default(f,q);h>x5||h<S&&(S=h,v=q)}return v}function m5(f){return f.substring(0,1).toLowerCase()+f.substring(1)}var tq=class{constructor(f,w,S,v,q){this.modelName=f,this.name=w,this.typeName=S,this.isList=v,this.isEnum=q}_toGraphQLInputType(){let f=this.isList?"List":"",w=this.isEnum?"Enum":"";return`${f}${w}${this.typeName}FieldRefInput<${this.modelName}>`}};function f1(f){return f instanceof tq}var OS=Symbol(),b2=new WeakMap,KS=class{constructor(f){f===OS?b2.set(this,`Prisma.${this._getName()}`):b2.set(this,`new Prisma.${this._getNamespace()}.${this._getName()}()`)}_getName(){return this.constructor.name}toString(){return b2.get(this)}},w1=class extends KS{_getNamespace(){return"NullTypes"}},F2=class extends w1{};S1(F2,"DbNull");var C2=class extends w1{};S1(C2,"JsonNull");var P2=class extends w1{};S1(P2,"AnyNull");var eq={classes:{DbNull:F2,JsonNull:C2,AnyNull:P2},instances:{DbNull:new F2(OS),JsonNull:new C2(OS),AnyNull:new P2(OS)}};function S1(f,w){Object.defineProperty(f,"name",{value:w,configurable:!0})}var Dv=": ",T5=class{constructor(f,w){this.name=f,this.value=w,this.hasError=!1}markAsError(){this.hasError=!0}getPrintWidth(){return this.name.length+this.value.getPrintWidth()+Dv.length}write(f){let w=new LS(this.name);this.hasError&&w.underline().setColor(f.context.colors.red),f.write(w).write(Dv).write(this.value)}},u5=class{constructor(f){this.errorMessages=[],this.arguments=f}write(f){f.write(this.arguments)}addErrorMessage(f){this.errorMessages.push(f)}renderAllMessages(f){return this.errorMessages.map((w)=>w(f)).join(`
`)}};function v1(f){return new u5(fh(f))}function fh(f){let w=new nq;for(let[S,v]of Object.entries(f)){let q=new T5(S,wh(v));w.addField(q)}return w}function wh(f){if(typeof f=="string")return new Yf(JSON.stringify(f));if(typeof f=="number"||typeof f=="boolean")return new Yf(String(f));if(typeof f=="bigint")return new Yf(`${f}n`);if(f===null)return new Yf("null");if(f===void 0)return new Yf("undefined");if(Z2(f))return new Yf(`new Prisma.Decimal("${f.toFixed()}")`);if(f instanceof Uint8Array)return Buffer.isBuffer(f)?new Yf(`Buffer.alloc(${f.byteLength})`):new Yf(`new Uint8Array(${f.byteLength})`);if(f instanceof Date){let w=rq(f)?f.toISOString():"Invalid Date";return new Yf(`new Date("${w}")`)}return f instanceof KS?new Yf(`Prisma.${f._getName()}`):f1(f)?new Yf(`prisma.${m5(f.modelName)}.$fields.${f.name}`):Array.isArray(f)?n5(f):typeof f=="object"?fh(f):new Yf(Object.prototype.toString.call(f))}function n5(f){let w=new uq;for(let S of f)w.addItem(wh(S));return w}function Sh(f,w){let S=w==="pretty"?E5:Tq,v=f.renderAllMessages(S),q=new mq(0,{colors:S}).write(f).toString();return{message:v,args:q}}function vh({args:f,errors:w,errorFormat:S,callsite:v,originalMethod:q,clientVersion:h,globalOmit:H}){let $=v1(f);for(let O of w)aq(O,$,H);let{message:j,args:b}=Sh($,S),J=xq({message:j,callsite:v,originalMethod:q,showColors:S==="pretty",callArguments:b});throw new uf(J,{clientVersion:h})}var G0=class{constructor(){this._map=new Map}get(f){return this._map.get(f)?.value}set(f,w){this._map.set(f,{value:w})}getOrCreate(f,w){let S=this._map.get(f);if(S)return S.value;let v=w();return this.set(f,v),v}};function k2(f){let w;return{get(){return w||(w={value:f()}),w.value}}}function F0(f){return f.replace(/^./,(w)=>w.toLowerCase())}function i5(f,w,S){let v=F0(S);return!w.result||!(w.result.$allModels||w.result[v])?f:a5({...f,...Uv(w.name,f,w.result.$allModels),...Uv(w.name,f,w.result[v])})}function a5(f){let w=new G0,S=(v,q)=>w.getOrCreate(v,()=>q.has(v)?[v]:(q.add(v),f[v]?f[v].needs.flatMap((h)=>S(h,q)):[v]));return o2(f,(v)=>({...v,needs:S(v.name,new Set)}))}function Uv(f,w,S){return S?o2(S,({needs:v,compute:q},h)=>({name:h,needs:v?Object.keys(v).filter((H)=>v[H]):[],compute:o5(w,h,q)})):{}}function o5(f,w,S){let v=f?.[w]?.compute;return v?(q)=>S({...q,[w]:v(q)}):S}function p5(f,w){if(!w)return f;let S={...f};for(let v of Object.values(w))if(f[v.name])for(let q of v.needs)S[q]=!0;return S}function d5(f,w){if(!w)return f;let S={...f};for(let v of Object.values(w))if(!f[v.name])for(let q of v.needs)delete S[q];return S}var Vv=class{constructor(f,w){this.extension=f,this.previous=w,this.computedFieldsCache=new G0,this.modelExtensionsCache=new G0,this.queryCallbacksCache=new G0,this.clientExtensions=k2(()=>this.extension.client?{...this.previous?.getAllClientExtensions(),...this.extension.client}:this.previous?.getAllClientExtensions()),this.batchCallbacks=k2(()=>{let S=this.previous?.getAllBatchQueryCallbacks()??[],v=this.extension.query?.$__internalBatch;return v?S.concat(v):S})}getAllComputedFields(f){return this.computedFieldsCache.getOrCreate(f,()=>i5(this.previous?.getAllComputedFields(f),this.extension,f))}getAllClientExtensions(){return this.clientExtensions.get()}getAllModelExtensions(f){return this.modelExtensionsCache.getOrCreate(f,()=>{let w=F0(f);return!this.extension.model||!(this.extension.model[w]||this.extension.model.$allModels)?this.previous?.getAllModelExtensions(f):{...this.previous?.getAllModelExtensions(f),...this.extension.model.$allModels,...this.extension.model[w]}})}getAllQueryCallbacks(f,w){return this.queryCallbacksCache.getOrCreate(`${f}:${w}`,()=>{let S=this.previous?.getAllQueryCallbacks(f,w)??[],v=[],q=this.extension.query;return!q||!(q[f]||q.$allModels||q[w]||q.$allOperations)?S:(q[f]!==void 0&&(q[f][w]!==void 0&&v.push(q[f][w]),q[f].$allOperations!==void 0&&v.push(q[f].$allOperations)),f!=="$none"&&q.$allModels!==void 0&&(q.$allModels[w]!==void 0&&v.push(q.$allModels[w]),q.$allModels.$allOperations!==void 0&&v.push(q.$allModels.$allOperations)),q[w]!==void 0&&v.push(q[w]),q.$allOperations!==void 0&&v.push(q.$allOperations),S.concat(v))})}getAllBatchQueryCallbacks(){return this.batchCallbacks.get()}},qh=class f{constructor(w){this.head=w}static empty(){return new f}static single(w){return new f(new Vv(w))}isEmpty(){return this.head===void 0}append(w){return new f(new Vv(w,this.head))}getAllComputedFields(w){return this.head?.getAllComputedFields(w)}getAllClientExtensions(){return this.head?.getAllClientExtensions()}getAllModelExtensions(w){return this.head?.getAllModelExtensions(w)}getAllQueryCallbacks(w,S){return this.head?.getAllQueryCallbacks(w,S)??[]}getAllBatchQueryCallbacks(){return this.head?.getAllBatchQueryCallbacks()??[]}},hh=class{constructor(f){this.name=f}};function s5(f){return f instanceof hh}function Z5(f){return new hh(f)}var Hh=Symbol(),$h=class{constructor(f){if(f!==Hh)throw new Error("Skip instance can not be constructed directly")}ifUndefined(f){return f===void 0?jh:f}},jh=new $h(Hh);function Dw(f){return f instanceof $h}var t5={findUnique:"findUnique",findUniqueOrThrow:"findUniqueOrThrow",findFirst:"findFirst",findFirstOrThrow:"findFirstOrThrow",findMany:"findMany",count:"aggregate",create:"createOne",createMany:"createMany",createManyAndReturn:"createManyAndReturn",update:"updateOne",updateMany:"updateMany",updateManyAndReturn:"updateManyAndReturn",upsert:"upsertOne",delete:"deleteOne",deleteMany:"deleteMany",executeRaw:"executeRaw",queryRaw:"queryRaw",aggregate:"aggregate",groupBy:"groupBy",runCommandRaw:"runCommandRaw",findRaw:"findRaw",aggregateRaw:"aggregateRaw"},bh="explicitly `undefined` values are not allowed";function Jh({modelName:f,action:w,args:S,runtimeDataModel:v,extensions:q=qh.empty(),callsite:h,clientMethod:H,errorFormat:$,clientVersion:j,previewFeatures:b,globalOmit:J}){let O=new $j({runtimeDataModel:v,modelName:f,action:w,rootArgs:S,callsite:h,extensions:q,selectionPath:[],argumentPath:[],originalMethod:H,errorFormat:$,clientVersion:j,previewFeatures:b,globalOmit:J});return{modelName:f,action:t5[w],query:z0(S,O)}}function z0({select:f,include:w,...S}={},v){let q=S.omit;return delete S.omit,{arguments:gh(S,v),selection:e5(f,w,q,v)}}function e5(f,w,S,v){return f?(w?v.throwValidationError({kind:"MutuallyExclusiveFields",firstField:"include",secondField:"select",selectionPath:v.getSelectionPath()}):S&&v.throwValidationError({kind:"MutuallyExclusiveFields",firstField:"omit",secondField:"select",selectionPath:v.getSelectionPath()}),vj(f,v)):fj(v,w,S)}function fj(f,w,S){let v={};return f.modelOrType&&!f.isRawAction()&&(v.$composites=!0,v.$scalars=!0),w&&wj(v,w,f),Sj(v,S,f),v}function wj(f,w,S){for(let[v,q]of Object.entries(w)){if(Dw(q))continue;let h=S.nestSelection(v);if(q1(q,h),q===!1||q===void 0){f[v]=!1;continue}let H=S.findField(v);if(H&&H.kind!=="object"&&S.throwValidationError({kind:"IncludeOnScalar",selectionPath:S.getSelectionPath().concat(v),outputType:S.getOutputTypeDescription()}),H){f[v]=z0(q===!0?{}:q,h);continue}if(q===!0){f[v]=!0;continue}f[v]=z0(q,h)}}function Sj(f,w,S){let v=S.getComputedFields(),q={...S.getGlobalOmit(),...w},h=d5(q,v);for(let[H,$]of Object.entries(h)){if(Dw($))continue;q1($,S.nestSelection(H));let j=S.findField(H);v?.[H]&&!j||(f[H]=!$)}}function vj(f,w){let S={},v=w.getComputedFields(),q=p5(f,v);for(let[h,H]of Object.entries(q)){if(Dw(H))continue;let $=w.nestSelection(h);q1(H,$);let j=w.findField(h);if(!(v?.[h]&&!j)){if(H===!1||H===void 0||Dw(H)){S[h]=!1;continue}if(H===!0){j?.kind==="object"?S[h]=z0({},$):S[h]=!0;continue}S[h]=z0(H,$)}}return S}function Oh(f,w){if(f===null)return null;if(typeof f=="string"||typeof f=="number"||typeof f=="boolean")return f;if(typeof f=="bigint")return{$type:"BigInt",value:String(f)};if(s2(f)){if(rq(f))return{$type:"DateTime",value:f.toISOString()};w.throwValidationError({kind:"InvalidArgumentValue",selectionPath:w.getSelectionPath(),argumentPath:w.getArgumentPath(),argument:{name:w.getArgumentName(),typeNames:["Date"]},underlyingError:"Provided Date object is invalid"})}if(s5(f))return{$type:"Param",value:f.name};if(f1(f))return{$type:"FieldRef",value:{_ref:f.name,_container:f.modelName}};if(Array.isArray(f))return qj(f,w);if(ArrayBuffer.isView(f)){let{buffer:S,byteOffset:v,byteLength:q}=f;return{$type:"Bytes",value:Buffer.from(S,v,q).toString("base64")}}if(hj(f))return f.values;if(Z2(f))return{$type:"Decimal",value:f.toFixed()};if(f instanceof KS){if(f!==eq.instances[f._getName()])throw new Error("Invalid ObjectEnumValue");return{$type:"Enum",value:f._getName()}}if(Hj(f))return f.toJSON();if(typeof f=="object")return gh(f,w);w.throwValidationError({kind:"InvalidArgumentValue",selectionPath:w.getSelectionPath(),argumentPath:w.getArgumentPath(),argument:{name:w.getArgumentName(),typeNames:[]},underlyingError:`We could not serialize ${Object.prototype.toString.call(f)} value. Serialize the object to JSON or implement a ".toJSON()" method on it`})}function gh(f,w){if(f.$type)return{$type:"Raw",value:f};let S={};for(let v in f){let q=f[v],h=w.nestArgument(v);Dw(q)||(q!==void 0?S[v]=Oh(q,h):w.isPreviewFeatureOn("strictUndefinedChecks")&&w.throwValidationError({kind:"InvalidArgumentValue",argumentPath:h.getArgumentPath(),selectionPath:w.getSelectionPath(),argument:{name:w.getArgumentName(),typeNames:[]},underlyingError:bh}))}return S}function qj(f,w){let S=[];for(let v=0;v<f.length;v++){let q=w.nestArgument(String(v)),h=f[v];if(h===void 0||Dw(h)){let H=h===void 0?"undefined":"Prisma.skip";w.throwValidationError({kind:"InvalidArgumentValue",selectionPath:q.getSelectionPath(),argumentPath:q.getArgumentPath(),argument:{name:`${w.getArgumentName()}[${v}]`,typeNames:[]},underlyingError:`Can not use \`${H}\` value within array. Use \`null\` or filter out \`${H}\` values`})}S.push(Oh(h,q))}return S}function hj(f){return typeof f=="object"&&f!==null&&f.__prismaRawParameters__===!0}function Hj(f){return typeof f=="object"&&f!==null&&typeof f.toJSON=="function"}function q1(f,w){f===void 0&&w.isPreviewFeatureOn("strictUndefinedChecks")&&w.throwValidationError({kind:"InvalidSelectionValue",selectionPath:w.getSelectionPath(),underlyingError:bh})}var $j=class f{constructor(w){this.params=w,this.params.modelName&&(this.modelOrType=this.params.runtimeDataModel.models[this.params.modelName]??this.params.runtimeDataModel.types[this.params.modelName])}throwValidationError(w){vh({errors:[w],originalMethod:this.params.originalMethod,args:this.params.rootArgs??{},callsite:this.params.callsite,errorFormat:this.params.errorFormat,clientVersion:this.params.clientVersion,globalOmit:this.params.globalOmit})}getSelectionPath(){return this.params.selectionPath}getArgumentPath(){return this.params.argumentPath}getArgumentName(){return this.params.argumentPath[this.params.argumentPath.length-1]}getOutputTypeDescription(){if(!(!this.params.modelName||!this.modelOrType))return{name:this.params.modelName,fields:this.modelOrType.fields.map((w)=>({name:w.name,typeName:"boolean",isRelation:w.kind==="object"}))}}isRawAction(){return["executeRaw","queryRaw","runCommandRaw","findRaw","aggregateRaw"].includes(this.params.action)}isPreviewFeatureOn(w){return this.params.previewFeatures.includes(w)}getComputedFields(){if(this.params.modelName)return this.params.extensions.getAllComputedFields(this.params.modelName)}findField(w){return this.modelOrType?.fields.find((S)=>S.name===w)}nestSelection(w){let S=this.findField(w),v=S?.kind==="object"?S.type:void 0;return new f({...this.params,modelName:v,selectionPath:this.params.selectionPath.concat(w)})}getGlobalOmit(){return this.params.modelName&&this.shouldApplyGlobalOmit()?this.params.globalOmit?.[d2(this.params.modelName)]??{}:{}}shouldApplyGlobalOmit(){switch(this.params.action){case"findFirst":case"findFirstOrThrow":case"findUniqueOrThrow":case"findMany":case"upsert":case"findUnique":case"createManyAndReturn":case"create":case"update":case"updateManyAndReturn":case"delete":return!0;case"executeRaw":case"aggregateRaw":case"runCommandRaw":case"findRaw":case"createMany":case"deleteMany":case"groupBy":case"updateMany":case"count":case"aggregate":case"queryRaw":return!1;default:MS(this.params.action,"Unknown action")}}nestArgument(w){return new f({...this.params,argumentPath:this.params.argumentPath.concat(w)})}},Bh=class{constructor(f){this._engine=f}prometheus(f){return this._engine.metrics({format:"prometheus",...f})}json(f){return this._engine.metrics({format:"json",...f})}};function jj(f){return{models:J2(f.models),enums:J2(f.enums),types:J2(f.types)}}function J2(f){let w={};for(let{name:S,...v}of f)w[S]=v;return w}function bj(f,w){let S=k2(()=>Jj(w));Object.defineProperty(f,"dmmf",{get:()=>S.get()})}function Jj(f){return{datamodel:{models:O2(f.models),enums:O2(f.enums),types:O2(f.types)}}}function O2(f){return Object.entries(f).map(([w,S])=>({name:w,...S}))}var g2=new WeakMap,QS="$$PrismaTypedSql",Oj=class{constructor(f,w){g2.set(this,{sql:f,values:w}),Object.defineProperty(this,QS,{value:QS})}get sql(){return g2.get(this).sql}get values(){return g2.get(this).values}};function gj(f){return(...w)=>new Oj(f,w)}function Bj(f){return f!=null&&f[QS]===QS}function YS(f){return{ok:!1,error:f,map(){return YS(f)},flatMap(){return YS(f)}}}var Wj=class{constructor(){this.registeredErrors=[]}consumeError(f){return this.registeredErrors[f]}registerNewError(f){let w=0;for(;this.registeredErrors[w]!==void 0;)w++;return this.registeredErrors[w]={error:f},w}},Rj=(f)=>{let w=new Wj,S=nf(w,f.transactionContext.bind(f)),v={adapterName:f.adapterName,errorRegistry:w,queryRaw:nf(w,f.queryRaw.bind(f)),executeRaw:nf(w,f.executeRaw.bind(f)),provider:f.provider,transactionContext:async(...q)=>(await S(...q)).map((h)=>Gj(w,h))};return f.getConnectionInfo&&(v.getConnectionInfo=cj(w,f.getConnectionInfo.bind(f))),v},Gj=(f,w)=>{let S=nf(f,w.startTransaction.bind(w));return{adapterName:w.adapterName,provider:w.provider,queryRaw:nf(f,w.queryRaw.bind(w)),executeRaw:nf(f,w.executeRaw.bind(w)),startTransaction:async(...v)=>(await S(...v)).map((q)=>Xj(f,q))}},Xj=(f,w)=>({adapterName:w.adapterName,provider:w.provider,options:w.options,queryRaw:nf(f,w.queryRaw.bind(w)),executeRaw:nf(f,w.executeRaw.bind(w)),commit:nf(f,w.commit.bind(w)),rollback:nf(f,w.rollback.bind(w))});function nf(f,w){return async(...S)=>{try{return await w(...S)}catch(v){let q=f.registerNewError(v);return YS({kind:"GenericJs",id:q})}}}function cj(f,w){return(...S)=>{try{return w(...S)}catch(v){let q=f.registerNewError(v);return YS({kind:"GenericJs",id:q})}}}var Ej=d(Sq()),Qj=p("async_hooks"),Yj=p("events"),Aj=d(p("fs")),HS=d(p("path")),Gw=class f{constructor(w,S){if(w.length-1!==S.length)throw w.length===0?new TypeError("Expected at least 1 string"):new TypeError(`Expected ${w.length} strings to have ${w.length-1} values`);let v=S.reduce((H,$)=>H+($ instanceof f?$.values.length:1),0);this.values=new Array(v),this.strings=new Array(v+1),this.strings[0]=w[0];let q=0,h=0;for(;q<S.length;){let H=S[q++],$=w[q];if(H instanceof f){this.strings[h]+=H.strings[0];let j=0;for(;j<H.values.length;)this.values[h++]=H.values[j++],this.strings[h]=H.strings[j];this.strings[h]+=$}else this.values[h++]=H,this.strings[h]=$}}get sql(){let w=this.strings.length,S=1,v=this.strings[0];for(;S<w;)v+=`?${this.strings[S++]}`;return v}get statement(){let w=this.strings.length,S=1,v=this.strings[0];for(;S<w;)v+=`:${S}${this.strings[S++]}`;return v}get text(){let w=this.strings.length,S=1,v=this.strings[0];for(;S<w;)v+=`$${S}${this.strings[S++]}`;return v}inspect(){return{sql:this.sql,statement:this.statement,text:this.text,values:this.values}}};function zj(f,w=",",S="",v=""){if(f.length===0)throw new TypeError("Expected `join([])` to be called with an array of multiple elements, but got an empty array");return new Gw([S,...Array(f.length-1).fill(w),v],f)}function Wh(f){return new Gw([f],[])}var _j=Wh("");function Mj(f,...w){return new Gw(f,w)}function Rh(f){return{getKeys(){return Object.keys(f)},getPropertyValue(w){return f[w]}}}function af(f,w){return{getKeys(){return[f]},getPropertyValue(){return w()}}}function h1(f){let w=new G0;return{getKeys(){return f.getKeys()},getPropertyValue(S){return w.getOrCreate(S,()=>f.getPropertyValue(S))},getPropertyDescriptor(S){return f.getPropertyDescriptor?.(S)}}}var l2={enumerable:!0,configurable:!0,writable:!0};function Gh(f){let w=new Set(f);return{getPrototypeOf:()=>Object.prototype,getOwnPropertyDescriptor:()=>l2,has:(S,v)=>w.has(v),set:(S,v,q)=>w.add(v)&&Reflect.set(S,v,q),ownKeys:()=>[...w]}}var Lv=Symbol.for("nodejs.util.inspect.custom");function _0(f,w){let S=Dj(w),v=new Set,q=new Proxy(f,{get(h,H){if(v.has(H))return h[H];let $=S.get(H);return $?$.getPropertyValue(H):h[H]},has(h,H){if(v.has(H))return!0;let $=S.get(H);return $?$.has?.(H)??!0:Reflect.has(h,H)},ownKeys(h){let H=Nv(Reflect.ownKeys(h),S),$=Nv(Array.from(S.keys()),S);return[...new Set([...H,...$,...v])]},set(h,H,$){return S.get(H)?.getPropertyDescriptor?.(H)?.writable===!1?!1:(v.add(H),Reflect.set(h,H,$))},getOwnPropertyDescriptor(h,H){let $=Reflect.getOwnPropertyDescriptor(h,H);if($&&!$.configurable)return $;let j=S.get(H);return j?j.getPropertyDescriptor?{...l2,...j?.getPropertyDescriptor(H)}:l2:$},defineProperty(h,H,$){return v.add(H),Reflect.defineProperty(h,H,$)},getPrototypeOf:()=>Object.prototype});return q[Lv]=function(){let h={...this};return delete h[Lv],h},q}function Dj(f){let w=new Map;for(let S of f){let v=S.getKeys();for(let q of v)w.set(q,S)}return w}function Nv(f,w){return f.filter((S)=>w.get(S)?.has?.(S)??!0)}function I2(f){return{getKeys(){return f},has(){return!1},getPropertyValue(){}}}function H1(f,w){return{batch:f,transaction:w?.kind==="batch"?{isolationLevel:w.options.isolationLevel}:void 0}}function Uj(f){if(f===void 0)return"";let w=v1(f);return new mq(0,{colors:Tq}).write(w).toString()}var Vj="P2037";function $1({error:f,user_facing_error:w},S,v){return w.error_code?new Bw(Lj(w,v),{code:w.error_code,clientVersion:S,meta:w.meta,batchRequestIdx:w.batch_request_idx}):new Mf(f,{clientVersion:S,batchRequestIdx:w.batch_request_idx})}function Lj(f,w){let S=f.message;return(w==="postgresql"||w==="postgres"||w==="mysql")&&f.error_code===Vj&&(S+=`
Prisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate`),S}var C0="<unknown>";function Nj(f){var w=f.split(`
`);return w.reduce(function(S,v){var q=Cj(v)||kj(v)||rj(v)||Tj(v)||yj(v);return q&&S.push(q),S},[])}var Kj=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/|[a-z]:\\|\\\\).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Fj=/\((\S*)(?::(\d+))(?::(\d+))\)/;function Cj(f){var w=Kj.exec(f);if(!w)return null;var S=w[2]&&w[2].indexOf("native")===0,v=w[2]&&w[2].indexOf("eval")===0,q=Fj.exec(w[2]);return v&&q!=null&&(w[2]=q[1],w[3]=q[2],w[4]=q[3]),{file:S?null:w[2],methodName:w[1]||C0,arguments:S?[w[2]]:[],lineNumber:w[3]?+w[3]:null,column:w[4]?+w[4]:null}}var Pj=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;function kj(f){var w=Pj.exec(f);return w?{file:w[2],methodName:w[1]||C0,arguments:[],lineNumber:+w[3],column:w[4]?+w[4]:null}:null}var lj=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,Ij=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function rj(f){var w=lj.exec(f);if(!w)return null;var S=w[3]&&w[3].indexOf(" > eval")>-1,v=Ij.exec(w[3]);return S&&v!=null&&(w[3]=v[1],w[4]=v[2],w[5]=null),{file:w[3],methodName:w[1]||C0,arguments:w[2]?w[2].split(","):[],lineNumber:w[4]?+w[4]:null,column:w[5]?+w[5]:null}}var xj=/^\s*(?:([^@]*)(?:\((.*?)\))?@)?(\S.*?):(\d+)(?::(\d+))?\s*$/i;function yj(f){var w=xj.exec(f);return w?{file:w[3],methodName:w[1]||C0,arguments:[],lineNumber:+w[4],column:w[5]?+w[5]:null}:null}var mj=/^\s*at (?:((?:\[object object\])?[^\\/]+(?: \[as \S+\])?) )?\(?(.*?):(\d+)(?::(\d+))?\)?\s*$/i;function Tj(f){var w=mj.exec(f);return w?{file:w[2],methodName:w[1]||C0,arguments:[],lineNumber:+w[3],column:w[4]?+w[4]:null}:null}var uj=class{getLocation(){return null}},nj=class{constructor(){this._error=new Error}getLocation(){let f=this._error.stack;if(!f)return null;let w=Nj(f).find((S)=>{if(!S.file)return!1;let v=x8(S.file);return v!=="<anonymous>"&&!v.includes("@prisma")&&!v.includes("/packages/client/src/runtime/")&&!v.endsWith("/runtime/binary.js")&&!v.endsWith("/runtime/library.js")&&!v.endsWith("/runtime/edge.js")&&!v.endsWith("/runtime/edge-esm.js")&&!v.startsWith("internal/")&&!S.methodName.includes("new ")&&!S.methodName.includes("getCallSite")&&!S.methodName.includes("Proxy.")&&S.methodName.split(".").length<4});return!w||!w.file?null:{fileName:w.file,lineNumber:w.lineNumber,columnNumber:w.column}}};function X0(f){return f==="minimal"?typeof $EnabledCallSite=="function"&&f!=="minimal"?new $EnabledCallSite:new uj:new nj}var ij={_avg:!0,_count:!0,_sum:!0,_min:!0,_max:!0};function AS(f={}){let w=aj(f);return Object.entries(w).reduce((S,[v,q])=>(ij[v]!==void 0?S.select[v]={select:q}:S[v]=q,S),{select:{}})}function aj(f={}){return typeof f._count=="boolean"?{...f,_count:{_all:f._count}}:f}function r2(f={}){return(w)=>(typeof f._count=="boolean"&&(w._count=w._count._all),w)}function oj(f,w){let S=r2(f);return w({action:"aggregate",unpacker:S,argsMapper:AS})(f)}function pj(f={}){let{select:w,...S}=f;return typeof w=="object"?AS({...S,_count:w}):AS({...S,_count:{_all:!0}})}function dj(f={}){return typeof f.select=="object"?(w)=>r2(f)(w)._count:(w)=>r2(f)(w)._count._all}function sj(f,w){return w({action:"count",unpacker:dj(f),argsMapper:pj})(f)}function Zj(f={}){let w=AS(f);if(Array.isArray(w.by))for(let S of w.by)typeof S=="string"&&(w.select[S]=!0);else typeof w.by=="string"&&(w.select[w.by]=!0);return w}function tj(f={}){return(w)=>(typeof f?._count=="boolean"&&w.forEach((S)=>{S._count=S._count._all}),w)}function ej(f,w){return w({action:"groupBy",unpacker:tj(f),argsMapper:Zj})(f)}function fb(f,w,S){if(w==="aggregate")return(v)=>oj(v,S);if(w==="count")return(v)=>sj(v,S);if(w==="groupBy")return(v)=>ej(v,S)}function wb(f,w){let S=w.fields.filter((q)=>!q.relationName),v=Z8(S,(q)=>q.name);return new Proxy({},{get(q,h){if(h in q||typeof h=="symbol")return q[h];let H=v[h];if(H)return new tq(f,h,H.type,H.isList,H.kind==="enum")},...Gh(Object.keys(v))})}var Xh=(f)=>Array.isArray(f)?f:f.split("."),ch=(f,w)=>Xh(w).reduce((S,v)=>S&&S[v],f),Sb=(f,w,S)=>Xh(w).reduceRight((v,q,h,H)=>Object.assign({},ch(f,H.slice(0,h)),{[q]:v}),S);function vb(f,w){return f===void 0||w===void 0?[]:[...w,"select",f]}function qb(f,w,S){return w===void 0?f??{}:Sb(w,S,f||!0)}function Eh(f,w,S,v,q,h){let H=f._runtimeDataModel.models[w].fields.reduce(($,j)=>({...$,[j.name]:j}),{});return($)=>{let j=X0(f._errorFormat),b=vb(v,q),J=qb($,h,b),O=S({dataPath:b,callsite:j})(J),g=hb(f,w);return new Proxy(O,{get(B,R){if(!g.includes(R))return B[R];let c=[H[R].type,S,R],U=[b,J];return Eh(f,...c,...U)},...Gh([...g,...Object.getOwnPropertyNames(O)])})}}function hb(f,w){return f._runtimeDataModel.models[w].fields.filter((S)=>S.kind==="object").map((S)=>S.name)}var Hb=["findUnique","findUniqueOrThrow","findFirst","findFirstOrThrow","create","update","upsert","delete"],$b=["aggregate","count","groupBy"];function Kv(f,w){let S=f._extensions.getAllModelExtensions(w)??{},v=[jb(f,w),Jb(f,w),Rh(S),af("name",()=>w),af("$name",()=>w),af("$parent",()=>f._appliedParent)];return _0({},v)}function jb(f,w){let S=F0(w),v=Object.keys(a2.ModelAction).concat("count");return{getKeys(){return v},getPropertyValue(q){let h=q,H=($)=>(j)=>{let b=X0(f._errorFormat);return f._createPrismaPromise((J)=>{let O={args:j,dataPath:[],action:h,model:w,clientMethod:`${S}.${q}`,jsModelName:S,transaction:J,callsite:b};return f._request({...O,...$})},{action:h,args:j,model:w})};return Hb.includes(h)?Eh(f,w,H):bb(q)?fb(f,q,H):H({})}}}function bb(f){return $b.includes(f)}function Jb(f,w){return h1(af("fields",()=>{let S=f._runtimeDataModel.models[w];return wb(w,S)}))}function Ob(f){return f.replace(/^./,(w)=>w.toUpperCase())}var x2=Symbol();function y2(f){let w=[gb(f),af(x2,()=>f),af("$parent",()=>f._appliedParent)],S=f._extensions.getAllClientExtensions();return S&&w.push(Rh(S)),_0(f,w)}function gb(f){let w=Object.keys(f._runtimeDataModel.models),S=w.map(F0),v=[...new Set(w.concat(S))];return h1({getKeys(){return v},getPropertyValue(q){let h=Ob(q);if(f._runtimeDataModel.models[h]!==void 0)return Kv(f,h);if(f._runtimeDataModel.models[q]!==void 0)return Kv(f,q)},getPropertyDescriptor(q){if(!S.includes(q))return{enumerable:!1}}})}function Bb(f){return f[x2]?f[x2]:f}function Wb(f){if(typeof f=="function")return f(this);if(f.client?.__AccelerateEngine){let S=f.client.__AccelerateEngine;this._originalClient._engine=new S(this._originalClient._accelerateEngineConfig)}let w=Object.create(this._originalClient,{_extensions:{value:this._extensions.append(f)},_appliedParent:{value:this,configurable:!0},$use:{value:void 0},$on:{value:void 0}});return y2(w)}function Rb({result:f,modelName:w,select:S,omit:v,extensions:q}){let h=q.getAllComputedFields(w);if(!h)return f;let H=[],$=[];for(let j of Object.values(h)){if(v){if(v[j.name])continue;let b=j.needs.filter((J)=>v[J]);b.length>0&&$.push(I2(b))}else if(S){if(!S[j.name])continue;let b=j.needs.filter((J)=>!S[J]);b.length>0&&$.push(I2(b))}Gb(f,j.needs)&&H.push(Xb(j,_0(f,H)))}return H.length>0||$.length>0?_0(f,[...H,...$]):f}function Gb(f,w){return w.every((S)=>s8(f,S))}function Xb(f,w){return h1(af(f.name,()=>f.compute(w)))}function j1({visitor:f,result:w,args:S,runtimeDataModel:v,modelName:q}){if(Array.isArray(w)){for(let H=0;H<w.length;H++)w[H]=j1({result:w[H],args:S,modelName:q,runtimeDataModel:v,visitor:f});return w}let h=f(w,q,S)??w;return S.include&&Fv({includeOrSelect:S.include,result:h,parentModelName:q,runtimeDataModel:v,visitor:f}),S.select&&Fv({includeOrSelect:S.select,result:h,parentModelName:q,runtimeDataModel:v,visitor:f}),h}function Fv({includeOrSelect:f,result:w,parentModelName:S,runtimeDataModel:v,visitor:q}){for(let[h,H]of Object.entries(f)){if(!H||w[h]==null||Dw(H))continue;let $=v.models[S].fields.find((b)=>b.name===h);if(!$||$.kind!=="object"||!$.relationName)continue;let j=typeof H=="object"?H:{};w[h]=j1({visitor:q,result:w[h],args:j,modelName:$.type,runtimeDataModel:v})}}function cb({result:f,modelName:w,args:S,extensions:v,runtimeDataModel:q,globalOmit:h}){return v.isEmpty()||f==null||typeof f!="object"||!q.models[w]?f:j1({result:f,args:S??{},modelName:w,runtimeDataModel:q,visitor:(H,$,j)=>{let b=F0($);return Rb({result:H,modelName:b,select:j.select,omit:j.select?void 0:{...h?.[b],...j.omit},extensions:v})}})}function Eb(f){if(f instanceof Gw)return Qb(f);if(Array.isArray(f)){let S=[f[0]];for(let v=1;v<f.length;v++)S[v]=c0(f[v]);return S}let w={};for(let S in f)w[S]=c0(f[S]);return w}function Qb(f){return new Gw(f.strings,f.values)}function c0(f){if(typeof f!="object"||f==null||f instanceof KS||f1(f))return f;if(Z2(f))return new L0(f.toFixed());if(s2(f))return new Date(+f);if(ArrayBuffer.isView(f))return f.slice(0);if(Array.isArray(f)){let w=f.length,S;for(S=Array(w);w--;)S[w]=c0(f[w]);return S}if(typeof f=="object"){let w={};for(let S in f)S==="__proto__"?Object.defineProperty(w,S,{value:c0(f[S]),configurable:!0,enumerable:!0,writable:!0}):w[S]=c0(f[S]);return w}MS(f,"Unknown value")}function Qh(f,w,S,v=0){return f._createPrismaPromise((q)=>{let h=w.customDataProxyFetch;return"transaction"in w&&q!==void 0&&(w.transaction?.kind==="batch"&&w.transaction.lock.then(),w.transaction=q),v===S.length?f._executeRequest(w):S[v]({model:w.model,operation:w.model?w.action:w.clientMethod,args:Eb(w.args??{}),__internalParams:w,query:(H,$=w)=>{let j=$.customDataProxyFetch;return $.customDataProxyFetch=Ah(h,j),$.args=H,Qh(f,$,S,v+1)}})})}function Yb(f,w){let{jsModelName:S,action:v,clientMethod:q}=w,h=S?v:q;if(f._extensions.isEmpty())return f._executeRequest(w);let H=f._extensions.getAllQueryCallbacks(S??"$none",h);return Qh(f,w,H)}function Ab(f){return(w)=>{let S={requests:w},v=w[0].extensions.getAllBatchQueryCallbacks();return v.length?Yh(S,v,0,f):f(S)}}function Yh(f,w,S,v){if(S===w.length)return v(f);let q=f.customDataProxyFetch,h=f.requests[0].transaction;return w[S]({args:{queries:f.requests.map((H)=>({model:H.modelName,operation:H.action,args:H.args})),transaction:h?{isolationLevel:h.kind==="batch"?h.isolationLevel:void 0}:void 0},__internalParams:f,query(H,$=f){let j=$.customDataProxyFetch;return $.customDataProxyFetch=Ah(q,j),Yh($,w,S+1,v)}})}var Cv=(f)=>f;function Ah(f=Cv,w=Cv){return(S)=>f(w(S))}var Pv=cf("prisma:client"),kv={Vercel:"vercel","Netlify CI":"netlify"};function zb({postinstall:f,ciName:w,clientVersion:S}){if(Pv("checkPlatformCaching:postinstall",f),Pv("checkPlatformCaching:ciName",w),f===!0&&w&&w in kv){let v=`Prisma has detected that this project was built on ${w}, which caches dependencies. This leads to an outdated Prisma Client because Prisma's auto-generation isn't triggered. To fix this, make sure to run the \`prisma generate\` command during the build process.

Learn how: https://pris.ly/d/${kv[w]}-build`;throw console.error(v),new $f(v,S)}}function _b(f,w){return f?f.datasources?f.datasources:f.datasourceUrl?{[w[0]]:{url:f.datasourceUrl}}:{}:{}}var Mb="Cloudflare-Workers",Db="node";function Ub(){return typeof Netlify=="object"?"netlify":typeof EdgeRuntime=="string"?"edge-light":globalThis.navigator?.userAgent===Mb?"workerd":globalThis.Deno?"deno":globalThis.__lagon__?"lagon":globalThis.process?.release?.name===Db?"node":globalThis.Bun?"bun":globalThis.fastly?"fastly":"unknown"}var Vb={node:"Node.js",workerd:"Cloudflare Workers",deno:"Deno and Deno Deploy",netlify:"Netlify Edge Functions","edge-light":"Edge Runtime (Vercel Edge Functions, Vercel Edge Middleware, Next.js (Pages Router) Edge API Routes, Next.js (App Router) Edge Route Handlers or Next.js Middleware)"};function zh(){let f=Ub();return{id:f,prettyName:Vb[f]||f,isEdge:["workerd","deno","netlify","edge-light"].includes(f)}}var Lb=d(p("fs")),gS=d(p("path"));function _h(f){let{runtimeBinaryTarget:w}=f;return`Add "${w}" to \`binaryTargets\` in the "schema.prisma" file and run \`prisma generate\` after saving it:

${Nb(f)}`}function Nb(f){let{generator:w,generatorBinaryTargets:S,runtimeBinaryTarget:v}=f,q={fromEnvVar:null,value:v},h=[...S,q];return m8({...w,binaryTargets:h})}function FS(f){let{runtimeBinaryTarget:w}=f;return`Prisma Client could not locate the Query Engine for runtime "${w}".`}function CS(f){let{searchedLocations:w}=f;return`The following locations have been searched:
${[...new Set(w)].map((S)=>`  ${S}`).join(`
`)}`}function Kb(f){let{runtimeBinaryTarget:w}=f;return`${FS(f)}

This happened because \`binaryTargets\` have been pinned, but the actual deployment also required "${w}".
${_h(f)}

${CS(f)}`}function Mh(f){return`We would appreciate if you could take the time to share some information with us.
Please help us by answering a few questions: https://pris.ly/${f}`}function Dh(f){let{errorStack:w}=f;return w?.match(/\/\.next|\/next@|\/next\//)?`

We detected that you are using Next.js, learn how to fix this: https://pris.ly/d/engine-not-found-nextjs.`:""}function Fb(f){let{queryEngineName:w}=f;return`${FS(f)}${Dh(f)}

This is likely caused by a bundler that has not copied "${w}" next to the resulting bundle.
Ensure that "${w}" has been copied next to the bundle or in "${f.expectedLocation}".

${Mh("engine-not-found-bundler-investigation")}

${CS(f)}`}function Cb(f){let{runtimeBinaryTarget:w,generatorBinaryTargets:S}=f,v=S.find((q)=>q.native);return`${FS(f)}

This happened because Prisma Client was generated for "${v?.value??"unknown"}", but the actual deployment required "${w}".
${_h(f)}

${CS(f)}`}function Pb(f){let{queryEngineName:w}=f;return`${FS(f)}${Dh(f)}

This is likely caused by tooling that has not copied "${w}" to the deployment folder.
Ensure that you ran \`prisma generate\` and that "${w}" has been copied to "${f.expectedLocation}".

${Mh("engine-not-found-tooling-investigation")}

${CS(f)}`}var kb=cf("prisma:client:engines:resolveEnginePath"),lb=()=>new RegExp("runtime[\\\\/]library\\.m?js$");async function Ib(f,w){let S={binary:process.env.PRISMA_QUERY_ENGINE_BINARY,library:process.env.PRISMA_QUERY_ENGINE_LIBRARY}[f]??w.prismaPath;if(S!==void 0)return S;let{enginePath:v,searchedLocations:q}=await rb(f,w);if(kb("enginePath",v),v!==void 0&&f==="binary"&&N8(v),v!==void 0)return w.prismaPath=v;let h=await i2(),H=w.generator?.binaryTargets??[],$=H.some((g)=>g.native),j=!H.some((g)=>g.value===h),b=__filename.match(lb())===null,J={searchedLocations:q,generatorBinaryTargets:H,generator:w.generator,runtimeBinaryTarget:h,queryEngineName:Uh(f,h),expectedLocation:gS.default.relative(process.cwd(),w.dirname),errorStack:new Error().stack},O;throw $&&j?O=Cb(J):j?O=Kb(J):b?O=Fb(J):O=Pb(J),new $f(O,w.clientVersion)}async function rb(engineType,config){let binaryTarget=await i2(),searchedLocations=[],dirname=eval("__dirname"),searchLocations=[config.dirname,gS.default.resolve(dirname,".."),config.generator?.output?.value??dirname,gS.default.resolve(dirname,"../../../.prisma/client"),"/tmp/prisma-engines",config.cwd];__filename.includes("resolveEnginePath")&&searchLocations.push(L8());for(let f of searchLocations){let w=Uh(engineType,binaryTarget),S=gS.default.join(f,w);if(searchedLocations.push(f),Lb.default.existsSync(S))return{enginePath:S,searchedLocations}}return{enginePath:void 0,searchedLocations}}function Uh(f,w){return f==="library"?v8(w,"fs"):`query-engine-${w}${w==="windows"?".exe":""}`}var lv=d(hq());function xb(f){return f?f.replace(/".*"/g,'"X"').replace(/[\s:\[]([+-]?([0-9]*[.])?[0-9]+)/g,(w)=>`${w[0]}5`):""}function yb(f){return f.split(`
`).map((w)=>w.replace(/^\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)\s*/,"").replace(/\+\d+\s*ms$/,"")).join(`
`)}var mb=d(U$());function Tb({title:f,user:w="prisma",repo:S="prisma",template:v="bug_report.yml",body:q}){return mb.default({user:w,repo:S,template:v,title:f,body:q})}function ub({version:f,binaryTarget:w,title:S,description:v,engineVersion:q,database:h,query:H}){let $=t$(6000-(H?.length??0)),j=yb(lv.default($)),b=v?`# Description
\`\`\`
${v}
\`\`\``:"",J=lv.default(`Hi Prisma Team! My Prisma Client just crashed. This is the report:
## Versions

| Name            | Version            |
|-----------------|--------------------|
| Node            | ${process.version?.padEnd(19)}| 
| OS              | ${w?.padEnd(19)}|
| Prisma Client   | ${f?.padEnd(19)}|
| Query Engine    | ${q?.padEnd(19)}|
| Database        | ${h?.padEnd(19)}|

${b}

## Logs
\`\`\`
${j}
\`\`\`

## Client Snippet
\`\`\`ts
// PLEASE FILL YOUR CODE SNIPPET HERE
\`\`\`

## Schema
\`\`\`prisma
// PLEASE ADD YOUR SCHEMA HERE IF POSSIBLE
\`\`\`

## Prisma Engine Query
\`\`\`
${H?xb(H):""}
\`\`\`
`),O=Tb({title:S,body:J});return`${S}

This is a non-recoverable error which probably happens when the Prisma Query Engine has a panic.

${Uf(O)}

If you want the Prisma team to look into it, please open the link above \uD83D\uDE4F
To increase the chance of success, please post your schema and a snippet of
how you used Prisma Client in the issue. 
`}function b1({inlineDatasources:f,overrideDatasources:w,env:S,clientVersion:v}){let q,h=Object.keys(f)[0],H=f[h]?.url,$=w[h]?.url;if(h===void 0?q=void 0:$?q=$:H?.value?q=H.value:H?.fromEnvVar&&(q=S[H.fromEnvVar]),H?.fromEnvVar!==void 0&&q===void 0)throw new $f(`error: Environment variable not found: ${H.fromEnvVar}.`,v);if(q===void 0)throw new $f("error: Missing URL environment variable, value, or override.",v);return q}var nb=class extends Error{constructor(f,w){super(f),this.clientVersion=w.clientVersion,this.cause=w.cause}get[Symbol.toStringTag](){return this.name}},Tw=class extends nb{constructor(f,w){super(f,w),this.isRetryable=w.isRetryable??!0}};function Rf(f,w){return{...f,isRetryable:w}}var m2=class extends Tw{constructor(f){super("This request must be retried",Rf(f,!0));this.name="ForcedRetryError",this.code="P5001"}};hf(m2,"ForcedRetryError");var BS=class extends Tw{constructor(f,w){super(f,Rf(w,!1));this.name="InvalidDatasourceError",this.code="P6001"}};hf(BS,"InvalidDatasourceError");var J1=class extends Tw{constructor(f,w){super(f,Rf(w,!1));this.name="NotImplementedYetError",this.code="P5004"}};hf(J1,"NotImplementedYetError");var Lf=class extends Tw{constructor(f,w){super(f,w),this.response=w.response;let S=this.response.headers.get("prisma-request-id");if(S){let v=`(The request id was: ${S})`;this.message=this.message+" "+v}}},O1=class extends Lf{constructor(f){super("Schema needs to be uploaded",Rf(f,!0));this.name="SchemaMissingError",this.code="P5005"}};hf(O1,"SchemaMissingError");var Vh="This request could not be understood by the server",Lh=class extends Lf{constructor(f,w,S){super(w||Vh,Rf(f,!1));this.name="BadRequestError",this.code="P5000",S&&(this.code=S)}};hf(Lh,"BadRequestError");var Nh=class extends Lf{constructor(f,w){super("Engine not started: healthcheck timeout",Rf(f,!0));this.name="HealthcheckTimeoutError",this.code="P5013",this.logs=w}};hf(Nh,"HealthcheckTimeoutError");var Kh=class extends Lf{constructor(f,w,S){super(w,Rf(f,!0));this.name="EngineStartupError",this.code="P5014",this.logs=S}};hf(Kh,"EngineStartupError");var Fh=class extends Lf{constructor(f){super("Engine version is not supported",Rf(f,!1));this.name="EngineVersionNotSupportedError",this.code="P5012"}};hf(Fh,"EngineVersionNotSupportedError");var Ch="Request timed out",Ph=class extends Lf{constructor(f,w=Ch){super(w,Rf(f,!1));this.name="GatewayTimeoutError",this.code="P5009"}};hf(Ph,"GatewayTimeoutError");var ib="Interactive transaction error",kh=class extends Lf{constructor(f,w=ib){super(w,Rf(f,!1));this.name="InteractiveTransactionError",this.code="P5015"}};hf(kh,"InteractiveTransactionError");var ab="Request parameters are invalid",lh=class extends Lf{constructor(f,w=ab){super(w,Rf(f,!1));this.name="InvalidRequestError",this.code="P5011"}};hf(lh,"InvalidRequestError");var Ih="Requested resource does not exist",rh=class extends Lf{constructor(f,w=Ih){super(w,Rf(f,!1));this.name="NotFoundError",this.code="P5003"}};hf(rh,"NotFoundError");var xh="Unknown server error",T2=class extends Lf{constructor(f,w,S){super(w||xh,Rf(f,!0));this.name="ServerError",this.code="P5006",this.logs=S}};hf(T2,"ServerError");var yh="Unauthorized, check your connection string",mh=class extends Lf{constructor(f,w=yh){super(w,Rf(f,!1));this.name="UnauthorizedError",this.code="P5007"}};hf(mh,"UnauthorizedError");var Th="Usage exceeded, retry again later",uh=class extends Lf{constructor(f,w=Th){super(w,Rf(f,!0));this.name="UsageExceededError",this.code="P5008"}};hf(uh,"UsageExceededError");async function ob(f){let w;try{w=await f.text()}catch{return{type:"EmptyError"}}try{let S=JSON.parse(w);if(typeof S=="string")switch(S){case"InternalDataProxyError":return{type:"DataProxyError",body:S};default:return{type:"UnknownTextError",body:S}}if(typeof S=="object"&&S!==null){if("is_panic"in S&&"message"in S&&"error_code"in S)return{type:"QueryEngineError",body:S};if("EngineNotStarted"in S||"InteractiveTransactionMisrouted"in S||"InvalidRequestError"in S){let v=Object.values(S)[0].reason;return typeof v=="string"&&!["SchemaMissing","EngineVersionNotSupported"].includes(v)?{type:"UnknownJsonError",body:S}:{type:"DataProxyError",body:S}}}return{type:"UnknownJsonError",body:S}}catch{return w===""?{type:"EmptyError"}:{type:"UnknownTextError",body:w}}}async function $S(f,w){if(f.ok)return;let S={clientVersion:w,response:f},v=await ob(f);if(v.type==="QueryEngineError")throw new Bw(v.body.message,{code:v.body.error_code,clientVersion:w});if(v.type==="DataProxyError"){if(v.body==="InternalDataProxyError")throw new T2(S,"Internal Data Proxy error");if("EngineNotStarted"in v.body){if(v.body.EngineNotStarted.reason==="SchemaMissing")return new O1(S);if(v.body.EngineNotStarted.reason==="EngineVersionNotSupported")throw new Fh(S);if("EngineStartupError"in v.body.EngineNotStarted.reason){let{msg:q,logs:h}=v.body.EngineNotStarted.reason.EngineStartupError;throw new Kh(S,q,h)}if("KnownEngineStartupError"in v.body.EngineNotStarted.reason){let{msg:q,error_code:h}=v.body.EngineNotStarted.reason.KnownEngineStartupError;throw new $f(q,w,h)}if("HealthcheckTimeout"in v.body.EngineNotStarted.reason){let{logs:q}=v.body.EngineNotStarted.reason.HealthcheckTimeout;throw new Nh(S,q)}}if("InteractiveTransactionMisrouted"in v.body)throw new kh(S,{IDParseError:"Could not parse interactive transaction ID",NoQueryEngineFoundError:"Could not find Query Engine for the specified host and transaction ID",TransactionStartError:"Could not start interactive transaction"}[v.body.InteractiveTransactionMisrouted.reason]);if("InvalidRequestError"in v.body)throw new lh(S,v.body.InvalidRequestError.reason)}if(f.status===401||f.status===403)throw new mh(S,Iw(yh,v));if(f.status===404)return new rh(S,Iw(Ih,v));if(f.status===429)throw new uh(S,Iw(Th,v));if(f.status===504)throw new Ph(S,Iw(Ch,v));if(f.status>=500)throw new T2(S,Iw(xh,v));if(f.status>=400)throw new Lh(S,Iw(Vh,v))}function Iw(f,w){return w.type==="EmptyError"?f:`${f}: ${JSON.stringify(w)}`}function pb(f){let w=Math.pow(2,f)*50,S=Math.ceil(Math.random()*w)-Math.ceil(w/2),v=w+S;return new Promise((q)=>setTimeout(()=>q(v),v))}var Zf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function db(f){let w=new TextEncoder().encode(f),S="",v=w.byteLength,q=v%3,h=v-q,H,$,j,b,J;for(let O=0;O<h;O=O+3)J=w[O]<<16|w[O+1]<<8|w[O+2],H=(J&16515072)>>18,$=(J&258048)>>12,j=(J&4032)>>6,b=J&63,S+=Zf[H]+Zf[$]+Zf[j]+Zf[b];return q==1?(J=w[h],H=(J&252)>>2,$=(J&3)<<4,S+=Zf[H]+Zf[$]+"=="):q==2&&(J=w[h]<<8|w[h+1],H=(J&64512)>>10,$=(J&1008)>>4,j=(J&15)<<2,S+=Zf[H]+Zf[$]+Zf[j]+"="),S}function sb(f){if(f.generator?.previewFeatures.some((w)=>w.toLowerCase().includes("metrics")))throw new $f("The `metrics` preview feature is not yet available with Accelerate.\nPlease remove `metrics` from the `previewFeatures` in your schema.\n\nMore information about Accelerate: https://pris.ly/d/accelerate",f.clientVersion)}function Zb(f){return f[0]*1000+f[1]/1e6}function Iv(f){return new Date(Zb(f))}var tb={"@prisma/debug":"workspace:*","@prisma/engines-version":"6.3.0-17.acc0b9dd43eb689cbd20c9470515d719db10d0b0","@prisma/fetch-engine":"workspace:*","@prisma/get-platform":"workspace:*"},nh=class extends Tw{constructor(f,w){super(`Cannot fetch data from service:
${f}`,Rf(w,!0));this.name="RequestError",this.code="P5010"}};hf(nh,"RequestError");async function g0(f,w,S=(v)=>v){let{clientVersion:v,...q}=w,h=S(fetch);try{return await h(f,q)}catch(H){let $=H.message??"Unknown error";throw new nh($,{clientVersion:v,cause:H})}}var eb=/^[1-9][0-9]*\.[0-9]+\.[0-9]+$/,ih=cf("prisma:client:dataproxyEngine");async function fJ(f,w){let S=tb["@prisma/engines-version"],v=w.clientVersion??"unknown";if(process.env.PRISMA_CLIENT_DATA_PROXY_CLIENT_VERSION)return process.env.PRISMA_CLIENT_DATA_PROXY_CLIENT_VERSION;if(f.includes("accelerate")&&v!=="0.0.0"&&v!=="in-memory")return v;let[q,h]=v?.split("-")??[];if(h===void 0&&eb.test(q))return q;if(h!==void 0||v==="0.0.0"||v==="in-memory"){if(f.startsWith("localhost")||f.startsWith("127.0.0.1"))return"0.0.0";let[H]=S.split("-")??[],[$,j,b]=H.split("."),J=SJ(`<=${$}.${j}.${b}`),O=await g0(J,{clientVersion:v});if(!O.ok)throw new Error(`Failed to fetch stable Prisma version, unpkg.com status ${O.status} ${O.statusText}, response body: ${await O.text()||"<empty body>"}`);let g=await O.text();ih("length of body fetched from unpkg.com",g.length);let B;try{B=JSON.parse(g)}catch(R){throw console.error("JSON.parse error: body fetched from unpkg.com: ",g),R}return B.version}throw new J1("Only `major.minor.patch` versions are supported by Accelerate.",{clientVersion:v})}async function wJ(f,w){let S=await fJ(f,w);return ih("version",S),S}function SJ(f){return encodeURI(`https://unpkg.com/prisma@${f}/package.json`)}var rv=3,jS=cf("prisma:client:dataproxyEngine"),vJ=class{constructor({apiKey:f,tracingHelper:w,logLevel:S,logQueries:v,engineHash:q}){this.apiKey=f,this.tracingHelper=w,this.logLevel=S,this.logQueries=v,this.engineHash=q}build({traceparent:f,interactiveTransaction:w}={}){let S={Authorization:`Bearer ${this.apiKey}`,"Prisma-Engine-Hash":this.engineHash};this.tracingHelper.isEnabled()&&(S.traceparent=f??this.tracingHelper.getTraceParent()),w&&(S["X-transaction-id"]=w.id);let v=this.buildCaptureSettings();return v.length>0&&(S["X-capture-telemetry"]=v.join(", ")),S}buildCaptureSettings(){let f=[];return this.tracingHelper.isEnabled()&&f.push("tracing"),this.logLevel&&f.push(this.logLevel),this.logQueries&&f.push("query"),f}},qJ=class{constructor(f){this.name="DataProxyEngine",sb(f),this.config=f,this.env={...f.env,...typeof process<"u"?process.env:{}},this.inlineSchema=db(f.inlineSchema),this.inlineDatasources=f.inlineDatasources,this.inlineSchemaHash=f.inlineSchemaHash,this.clientVersion=f.clientVersion,this.engineHash=f.engineVersion,this.logEmitter=f.logEmitter,this.tracingHelper=f.tracingHelper}apiKey(){return this.headerBuilder.apiKey}version(){return this.engineHash}async start(){this.startPromise!==void 0&&await this.startPromise,this.startPromise=(async()=>{let[f,w]=this.extractHostAndApiKey();this.host=f,this.headerBuilder=new vJ({apiKey:w,tracingHelper:this.tracingHelper,logLevel:this.config.logLevel,logQueries:this.config.logQueries,engineHash:this.engineHash}),this.remoteClientVersion=await wJ(f,this.config),jS("host",this.host)})(),await this.startPromise}async stop(){}propagateResponseExtensions(f){f?.logs?.length&&f.logs.forEach((w)=>{switch(w.level){case"debug":case"trace":jS(w);break;case"error":case"warn":case"info":{this.logEmitter.emit(w.level,{timestamp:Iv(w.timestamp),message:w.attributes.message??"",target:w.target});break}case"query":{this.logEmitter.emit("query",{query:w.attributes.query??"",timestamp:Iv(w.timestamp),duration:w.attributes.duration_ms??0,params:w.attributes.params??"",target:w.target});break}default:w.level}}),f?.traces?.length&&this.tracingHelper.dispatchEngineSpans(f.traces)}onBeforeExit(){throw new Error('"beforeExit" hook is not applicable to the remote query engine')}async url(f){return await this.start(),`https://${this.host}/${this.remoteClientVersion}/${this.inlineSchemaHash}/${f}`}async uploadSchema(){let f={name:"schemaUpload",internal:!0};return this.tracingHelper.runInChildSpan(f,async()=>{let w=await g0(await this.url("schema"),{method:"PUT",headers:this.headerBuilder.build(),body:this.inlineSchema,clientVersion:this.clientVersion});w.ok||jS("schema response status",w.status);let S=await $S(w,this.clientVersion);if(S)throw this.logEmitter.emit("warn",{message:`Error while uploading schema: ${S.message}`,timestamp:new Date,target:""}),S;this.logEmitter.emit("info",{message:`Schema (re)uploaded (hash: ${this.inlineSchemaHash})`,timestamp:new Date,target:""})})}request(f,{traceparent:w,interactiveTransaction:S,customDataProxyFetch:v}){return this.requestInternal({body:f,traceparent:w,interactiveTransaction:S,customDataProxyFetch:v})}async requestBatch(f,{traceparent:w,transaction:S,customDataProxyFetch:v}){let q=S?.kind==="itx"?S.options:void 0,h=H1(f,S);return(await this.requestInternal({body:h,customDataProxyFetch:v,interactiveTransaction:q,traceparent:w})).map((H)=>(H.extensions&&this.propagateResponseExtensions(H.extensions),("errors"in H)?this.convertProtocolErrorsToClientError(H.errors):H))}requestInternal({body:f,traceparent:w,customDataProxyFetch:S,interactiveTransaction:v}){return this.withRetry({actionGerund:"querying",callback:async({logHttpCall:q})=>{let h=v?`${v.payload.endpoint}/graphql`:await this.url("graphql");q(h);let H=await g0(h,{method:"POST",headers:this.headerBuilder.build({traceparent:w,interactiveTransaction:v}),body:JSON.stringify(f),clientVersion:this.clientVersion},S);H.ok||jS("graphql response status",H.status),await this.handleError(await $S(H,this.clientVersion));let $=await H.json();if($.extensions&&this.propagateResponseExtensions($.extensions),"errors"in $)throw this.convertProtocolErrorsToClientError($.errors);return"batchResult"in $?$.batchResult:$}})}async transaction(f,w,S){let v={start:"starting",commit:"committing",rollback:"rolling back"};return this.withRetry({actionGerund:`${v[f]} transaction`,callback:async({logHttpCall:q})=>{if(f==="start"){let h=JSON.stringify({max_wait:S.maxWait,timeout:S.timeout,isolation_level:S.isolationLevel}),H=await this.url("transaction/start");q(H);let $=await g0(H,{method:"POST",headers:this.headerBuilder.build({traceparent:w.traceparent}),body:h,clientVersion:this.clientVersion});await this.handleError(await $S($,this.clientVersion));let j=await $.json(),{extensions:b}=j;b&&this.propagateResponseExtensions(b);let J=j.id,O=j["data-proxy"].endpoint;return{id:J,payload:{endpoint:O}}}else{let h=`${S.payload.endpoint}/${f}`;q(h);let H=await g0(h,{method:"POST",headers:this.headerBuilder.build({traceparent:w.traceparent}),clientVersion:this.clientVersion});await this.handleError(await $S(H,this.clientVersion));let $=await H.json(),{extensions:j}=$;j&&this.propagateResponseExtensions(j);return}}})}extractHostAndApiKey(){let f={clientVersion:this.clientVersion},w=Object.keys(this.inlineDatasources)[0],S=b1({inlineDatasources:this.inlineDatasources,overrideDatasources:this.config.overrideDatasources,clientVersion:this.clientVersion,env:this.env}),v;try{v=new URL(S)}catch{throw new BS(`Error validating datasource \`${w}\`: the URL must start with the protocol \`prisma://\``,f)}let{protocol:q,host:h,searchParams:H}=v;if(q!=="prisma:"&&q!==zq)throw new BS(`Error validating datasource \`${w}\`: the URL must start with the protocol \`prisma://\``,f);let $=H.get("api_key");if($===null||$.length<1)throw new BS(`Error validating datasource \`${w}\`: the URL must contain a valid API key`,f);return[h,$]}metrics(){throw new J1("Metrics are not yet supported for Accelerate",{clientVersion:this.clientVersion})}async withRetry(f){for(let w=0;;w++){let S=(v)=>{this.logEmitter.emit("info",{message:`Calling ${v} (n=${w})`,timestamp:new Date,target:""})};try{return await f.callback({logHttpCall:S})}catch(v){if(!(v instanceof Tw)||!v.isRetryable)throw v;if(w>=rv)throw v instanceof m2?v.cause:v;this.logEmitter.emit("warn",{message:`Attempt ${w+1}/${rv} failed for ${f.actionGerund}: ${v.message??"(unknown)"}`,timestamp:new Date,target:""});let q=await pb(w);this.logEmitter.emit("warn",{message:`Retrying after ${q}ms`,timestamp:new Date,target:""})}}}async handleError(f){if(f instanceof O1)throw await this.uploadSchema(),new m2({clientVersion:this.clientVersion,cause:f});if(f)throw f}convertProtocolErrorsToClientError(f){return f.length===1?$1(f[0],this.config.clientVersion,this.config.activeProvider):new Mf(JSON.stringify(f),{clientVersion:this.config.clientVersion})}applyPendingMigrations(){throw new Error("Method not implemented.")}};function hJ(f){if(f?.kind==="itx")return f.options.id}var xv=d(p("os")),HJ=d(p("path")),B2=Symbol("PrismaLibraryEngineCache");function $J(){let f=globalThis;return f[B2]===void 0&&(f[B2]={}),f[B2]}function jJ(f){let w=$J();if(w[f]!==void 0)return w[f];let S=HJ.default.toNamespacedPath(f),v={exports:{}},q=0;return process.platform!=="win32"&&(q=xv.default.constants.dlopen.RTLD_LAZY|xv.default.constants.dlopen.RTLD_DEEPBIND),process.dlopen(v,S,q),w[f]=v.exports,v.exports}var bJ={async loadLibrary(f){let w=await z8(),S=await Ib("library",f);try{return f.tracingHelper.runInChildSpan({name:"loadLibrary",internal:!0},()=>jJ(S))}catch(v){let q=K8({e:v,platformInfo:w,id:S});throw new $f(q,f.clientVersion)}}},W2,JJ={async loadLibrary(f){let{clientVersion:w,adapter:S,engineWasm:v}=f;if(S===void 0)throw new $f(`The \`adapter\` option for \`PrismaClient\` is required in this context (${zh().prettyName})`,w);if(v===void 0)throw new $f("WASM engine was unexpectedly `undefined`",w);W2===void 0&&(W2=(async()=>{let h=v.getRuntime(),H=await v.getQueryEngineWasmModule();if(H==null)throw new $f("The loaded wasm module was unexpectedly `undefined` or `null` once loaded",w);let $={"./query_engine_bg.js":h},j=new WebAssembly.Instance(H,$);return h.__wbg_set_wasm(j.exports),h.QueryEngine})());let q=await W2;return{debugPanic(){return Promise.reject("{}")},dmmf(){return Promise.resolve("{}")},version(){return{commit:"unknown",version:"unknown"}},QueryEngine:q}}},OJ="P2036",rf=cf("prisma:client:libraryEngine");function gJ(f){return f.item_type==="query"&&"query"in f}function BJ(f){return"level"in f?f.level==="error"&&f.message==="PANIC":!1}var yv=[...S8,"native"],WJ=0xffffffffffffffffn,R2=1n;function RJ(){let f=R2++;return R2>WJ&&(R2=1n),f}var GJ=class{constructor(f,w){this.name="LibraryEngine",this.libraryLoader=w??bJ,f.engineWasm!==void 0&&(this.libraryLoader=w??JJ),this.config=f,this.libraryStarted=!1,this.logQueries=f.logQueries??!1,this.logLevel=f.logLevel??"error",this.logEmitter=f.logEmitter,this.datamodel=f.inlineSchema,this.tracingHelper=f.tracingHelper,f.enableDebugLogs&&(this.logLevel="debug");let S=Object.keys(f.overrideDatasources)[0],v=f.overrideDatasources[S]?.url;S!==void 0&&v!==void 0&&(this.datasourceOverrides={[S]:v}),this.libraryInstantiationPromise=this.instantiateLibrary()}wrapEngine(f){return{applyPendingMigrations:f.applyPendingMigrations?.bind(f),commitTransaction:this.withRequestId(f.commitTransaction.bind(f)),connect:this.withRequestId(f.connect.bind(f)),disconnect:this.withRequestId(f.disconnect.bind(f)),metrics:f.metrics?.bind(f),query:this.withRequestId(f.query.bind(f)),rollbackTransaction:this.withRequestId(f.rollbackTransaction.bind(f)),sdlSchema:f.sdlSchema?.bind(f),startTransaction:this.withRequestId(f.startTransaction.bind(f)),trace:f.trace.bind(f)}}withRequestId(f){return async(...w)=>{let S=RJ().toString();try{return await f(...w,S)}finally{if(this.tracingHelper.isEnabled()){let v=await this.engine?.trace(S);if(v){let q=JSON.parse(v);this.tracingHelper.dispatchEngineSpans(q.spans)}}}}}async applyPendingMigrations(){throw new Error("Cannot call this method from this type of engine instance")}async transaction(f,w,S){await this.start();let v=JSON.stringify(w),q;if(f==="start"){let H=JSON.stringify({max_wait:S.maxWait,timeout:S.timeout,isolation_level:S.isolationLevel});q=await this.engine?.startTransaction(H,v)}else f==="commit"?q=await this.engine?.commitTransaction(S.id,v):f==="rollback"&&(q=await this.engine?.rollbackTransaction(S.id,v));let h=this.parseEngineResponse(q);if(XJ(h)){let H=this.getExternalAdapterError(h);throw H?H.error:new Bw(h.message,{code:h.error_code,clientVersion:this.config.clientVersion,meta:h.meta})}else if(typeof h.message=="string")throw new Mf(h.message,{clientVersion:this.config.clientVersion});return h}async instantiateLibrary(){if(rf("internalSetup"),this.libraryInstantiationPromise)return this.libraryInstantiationPromise;w8(),this.binaryTarget=await this.getCurrentBinaryTarget(),await this.tracingHelper.runInChildSpan("load_engine",()=>this.loadEngine()),this.version()}async getCurrentBinaryTarget(){{if(this.binaryTarget)return this.binaryTarget;let f=await this.tracingHelper.runInChildSpan("detect_platform",()=>i2());if(!yv.includes(f))throw new $f(`Unknown ${Mw("PRISMA_QUERY_ENGINE_LIBRARY")} ${Mw(Ff(f))}. Possible binaryTargets: ${E0(yv.join(", "))} or a path to the query engine library.
You may have to run ${E0("prisma generate")} for your changes to take effect.`,this.config.clientVersion);return f}}parseEngineResponse(f){if(!f)throw new Mf("Response from the Engine was empty",{clientVersion:this.config.clientVersion});try{return JSON.parse(f)}catch{throw new Mf("Unable to JSON.parse response from engine",{clientVersion:this.config.clientVersion})}}async loadEngine(){if(!this.engine){this.QueryEngineConstructor||(this.library=await this.libraryLoader.loadLibrary(this.config),this.QueryEngineConstructor=this.library.QueryEngine);try{let f=new WeakRef(this),{adapter:w}=this.config;w&&rf("Using driver adapter: %O",w),this.engine=this.wrapEngine(new this.QueryEngineConstructor({datamodel:this.datamodel,env:process.env,logQueries:this.config.logQueries??!1,ignoreEnvVarErrors:!0,datasourceOverrides:this.datasourceOverrides??{},logLevel:this.logLevel,configDir:this.config.cwd,engineProtocol:"json",enableTracing:this.tracingHelper.isEnabled()},(S)=>{f.deref()?.logger(S)},w))}catch(f){let w=f,S=this.parseInitError(w.message);throw typeof S=="string"?w:new $f(S.message,this.config.clientVersion,S.error_code)}}}logger(f){let w=this.parseEngineResponse(f);w&&(w.level=w?.level.toLowerCase()??"unknown",gJ(w)?this.logEmitter.emit("query",{timestamp:new Date,query:w.query,params:w.params,duration:Number(w.duration_ms),target:w.module_path}):BJ(w)?this.loggerRustPanic=new Ow(G2(this,`${w.message}: ${w.reason} in ${w.file}:${w.line}:${w.column}`),this.config.clientVersion):this.logEmitter.emit(w.level,{timestamp:new Date,message:w.message,target:w.module_path}))}parseInitError(f){try{return JSON.parse(f)}catch{}return f}parseRequestError(f){try{return JSON.parse(f)}catch{}return f}onBeforeExit(){throw new Error('"beforeExit" hook is not applicable to the library engine since Prisma 5.0.0, it is only relevant and implemented for the binary engine. Please add your event listener to the `process` object directly instead.')}async start(){if(await this.libraryInstantiationPromise,await this.libraryStoppingPromise,this.libraryStartingPromise)return rf(`library already starting, this.libraryStarted: ${this.libraryStarted}`),this.libraryStartingPromise;if(this.libraryStarted)return;let f=async()=>{rf("library starting");try{let w={traceparent:this.tracingHelper.getTraceParent()};await this.engine?.connect(JSON.stringify(w)),this.libraryStarted=!0,rf("library started")}catch(w){let S=this.parseInitError(w.message);throw typeof S=="string"?w:new $f(S.message,this.config.clientVersion,S.error_code)}finally{this.libraryStartingPromise=void 0}};return this.libraryStartingPromise=this.tracingHelper.runInChildSpan("connect",f),this.libraryStartingPromise}async stop(){if(await this.libraryStartingPromise,await this.executingQueryPromise,this.libraryStoppingPromise)return rf("library is already stopping"),this.libraryStoppingPromise;if(!this.libraryStarted)return;let f=async()=>{await new Promise((S)=>setTimeout(S,5)),rf("library stopping");let w={traceparent:this.tracingHelper.getTraceParent()};await this.engine?.disconnect(JSON.stringify(w)),this.libraryStarted=!1,this.libraryStoppingPromise=void 0,rf("library stopped")};return this.libraryStoppingPromise=this.tracingHelper.runInChildSpan("disconnect",f),this.libraryStoppingPromise}version(){return this.versionInfo=this.library?.version(),this.versionInfo?.version??"unknown"}debugPanic(f){return this.library?.debugPanic(f)}async request(f,{traceparent:w,interactiveTransaction:S}){rf(`sending request, this.libraryStarted: ${this.libraryStarted}`);let v=JSON.stringify({traceparent:w}),q=JSON.stringify(f);try{await this.start(),this.executingQueryPromise=this.engine?.query(q,v,S?.id),this.lastQuery=q;let h=this.parseEngineResponse(await this.executingQueryPromise);if(h.errors)throw h.errors.length===1?this.buildQueryError(h.errors[0]):new Mf(JSON.stringify(h.errors),{clientVersion:this.config.clientVersion});if(this.loggerRustPanic)throw this.loggerRustPanic;return{data:h}}catch(h){if(h instanceof $f)throw h;if(h.code==="GenericFailure"&&h.message?.startsWith("PANIC:"))throw new Ow(G2(this,h.message),this.config.clientVersion);let H=this.parseRequestError(h.message);throw typeof H=="string"?h:new Mf(`${H.message}
${H.backtrace}`,{clientVersion:this.config.clientVersion})}}async requestBatch(f,{transaction:w,traceparent:S}){rf("requestBatch");let v=H1(f,w);await this.start(),this.lastQuery=JSON.stringify(v),this.executingQueryPromise=this.engine.query(this.lastQuery,JSON.stringify({traceparent:S}),hJ(w));let q=await this.executingQueryPromise,h=this.parseEngineResponse(q);if(h.errors)throw h.errors.length===1?this.buildQueryError(h.errors[0]):new Mf(JSON.stringify(h.errors),{clientVersion:this.config.clientVersion});let{batchResult:H,errors:$}=h;if(Array.isArray(H))return H.map((j)=>j.errors&&j.errors.length>0?this.loggerRustPanic??this.buildQueryError(j.errors[0]):{data:j});throw $&&$.length===1?new Error($[0].error):new Error(JSON.stringify(h))}buildQueryError(f){if(f.user_facing_error.is_panic)return new Ow(G2(this,f.user_facing_error.message),this.config.clientVersion);let w=this.getExternalAdapterError(f.user_facing_error);return w?w.error:$1(f,this.config.clientVersion,this.config.activeProvider)}getExternalAdapterError(f){if(f.error_code===OJ&&this.config.adapter){let w=f.meta?.id;Ev(typeof w=="number","Malformed external JS error received from the engine");let S=this.config.adapter.errorRegistry.consumeError(w);return Ev(S,"External error with reported id was not registered"),S}}async metrics(f){await this.start();let w=await this.engine.metrics(JSON.stringify(f));return f.format==="prometheus"?w:this.parseEngineResponse(w)}};function XJ(f){return typeof f=="object"&&f!==null&&f.error_code!==void 0}function G2(f,w){return ub({binaryTarget:f.binaryTarget,title:w,version:f.config.clientVersion,engineVersion:f.versionInfo?.commit,database:f.config.activeProvider,query:f.lastQuery})}function cJ({copyEngine:f=!0},w){let S;try{S=b1({inlineDatasources:w.inlineDatasources,overrideDatasources:w.overrideDatasources,env:{...w.env,...process.env},clientVersion:w.clientVersion})}catch{}let v=!!(S?.startsWith("prisma://")||r8(S));f&&v&&Dq("recommend--no-engine","In production, we recommend using `prisma generate --no-engine` (See: `prisma generate --help`)");let q=M2(w.generator),h=v||!f,H=!!w.adapter,$=q==="library",j=q==="binary",b=q==="client";if(h&&H||H&&!1){let J;throw f?S?.startsWith("prisma://")?J=["Prisma Client was configured to use the `adapter` option but the URL was a `prisma://` URL.","Please either use the `prisma://` URL or remove the `adapter` from the Prisma Client constructor."]:J=["Prisma Client was configured to use both the `adapter` and Accelerate, please chose one."]:J=["Prisma Client was configured to use the `adapter` option but `prisma generate` was run with `--no-engine`.","Please run `prisma generate` without `--no-engine` to be able to use Prisma Client with the adapter."],new uf(J.join(`
`),{clientVersion:w.clientVersion})}if(h)return new qJ(w);if($)return new GJ(w);throw new uf("Invalid client engine type, please use `library` or `binary`",{clientVersion:w.clientVersion})}function ah({generator:f}){return f?.previewFeatures??[]}var EJ=(f)=>({command:f}),QJ=(f)=>f.strings.reduce((w,S,v)=>`${w}@P${v}${S}`);function O0(f){try{return mv(f,"fast")}catch{return mv(f,"slow")}}function mv(f,w){return JSON.stringify(f.map((S)=>oh(S,w)))}function oh(f,w){if(Array.isArray(f))return f.map((S)=>oh(S,w));if(typeof f=="bigint")return{prisma__type:"bigint",prisma__value:f.toString()};if(s2(f))return{prisma__type:"date",prisma__value:f.toJSON()};if(L0.isDecimal(f))return{prisma__type:"decimal",prisma__value:f.toJSON()};if(Buffer.isBuffer(f))return{prisma__type:"bytes",prisma__value:f.toString("base64")};if(YJ(f))return{prisma__type:"bytes",prisma__value:Buffer.from(f).toString("base64")};if(ArrayBuffer.isView(f)){let{buffer:S,byteOffset:v,byteLength:q}=f;return{prisma__type:"bytes",prisma__value:Buffer.from(S,v,q).toString("base64")}}return typeof f=="object"&&w==="slow"?ph(f):f}function YJ(f){return f instanceof ArrayBuffer||f instanceof SharedArrayBuffer?!0:typeof f=="object"&&f!==null?f[Symbol.toStringTag]==="ArrayBuffer"||f[Symbol.toStringTag]==="SharedArrayBuffer":!1}function ph(f){if(typeof f!="object"||f===null)return f;if(typeof f.toJSON=="function")return f.toJSON();if(Array.isArray(f))return f.map(Tv);let w={};for(let S of Object.keys(f))w[S]=Tv(f[S]);return w}function Tv(f){return typeof f=="bigint"?f.toString():ph(f)}var AJ=["$connect","$disconnect","$on","$transaction","$use","$extends"],zJ=AJ,_J=/^(\s*alter\s)/i,uv=cf("prisma:client");function nv(f,w,S,v){if(!(f!=="postgresql"&&f!=="cockroachdb")&&S.length>0&&_J.exec(w))throw new Error(`Running ALTER using ${v} is not supported
Using the example below you can still execute your query with Prisma, but please note that it is vulnerable to SQL injection attacks and requires you to take care of input sanitization.

Example:
  await prisma.$executeRawUnsafe(\`ALTER USER prisma WITH PASSWORD '\${password}'\`)

More Information: https://pris.ly/d/execute-raw
`)}var iv=({clientMethod:f,activeProvider:w})=>(S)=>{let v="",q;if(Bj(S))v=S.sql,q={values:O0(S.values),__prismaRawParameters__:!0};else if(Array.isArray(S)){let[h,...H]=S;v=h,q={values:O0(H||[]),__prismaRawParameters__:!0}}else switch(w){case"sqlite":case"mysql":{v=S.sql,q={values:O0(S.values),__prismaRawParameters__:!0};break}case"cockroachdb":case"postgresql":case"postgres":{v=S.text,q={values:O0(S.values),__prismaRawParameters__:!0};break}case"sqlserver":{v=QJ(S),q={values:O0(S.values),__prismaRawParameters__:!0};break}default:throw new Error(`The ${w} provider does not support ${f}`)}return q?.values?uv(`prisma.${f}(${v}, ${q.values})`):uv(`prisma.${f}(${v})`),{query:v,parameters:q}},MJ={requestArgsToMiddlewareArgs(f){return[f.strings,...f.values]},middlewareArgsToRequestArgs(f){let[w,...S]=f;return new Gw(w,S)}},DJ={requestArgsToMiddlewareArgs(f){return[f]},middlewareArgsToRequestArgs(f){return f[0]}};function av(f){return function(w,S){let v,q=(h=f)=>{try{return h===void 0||h?.kind==="itx"?v??=ov(w(h)):ov(w(h))}catch(H){return Promise.reject(H)}};return{get spec(){return S},then(h,H){return q().then(h,H)},catch(h){return q().catch(h)},finally(h){return q().finally(h)},requestTransaction(h){let H=q(h);return H.requestTransaction?H.requestTransaction(h):H},[Symbol.toStringTag]:"PrismaPromise"}}}function ov(f){return typeof f.then=="function"?f:Promise.resolve(f)}var UJ={isEnabled(){return!1},getTraceParent(){return"00-10-10-00"},dispatchEngineSpans(){},getActiveContext(){},runInChildSpan(f,w){return w()}},VJ=class{isEnabled(){return this.getGlobalTracingHelper().isEnabled()}getTraceParent(f){return this.getGlobalTracingHelper().getTraceParent(f)}dispatchEngineSpans(f){return this.getGlobalTracingHelper().dispatchEngineSpans(f)}getActiveContext(){return this.getGlobalTracingHelper().getActiveContext()}runInChildSpan(f,w){return this.getGlobalTracingHelper().runInChildSpan(f,w)}getGlobalTracingHelper(){return globalThis.PRISMA_INSTRUMENTATION?.helper??UJ}};function LJ(){return new VJ}function NJ(f,w=()=>{}){let S,v=new Promise((q)=>S=q);return{then(q){return--f===0&&S(w()),q?.(v)}}}function KJ(f){return typeof f=="string"?f:f.reduce((w,S)=>{let v=typeof S=="string"?S:S.level;return v==="query"?w:w&&(S==="info"||w==="info")?"info":v},void 0)}var FJ=class{constructor(){this._middlewares=[]}use(f){this._middlewares.push(f)}get(f){return this._middlewares[f]}has(f){return!!this._middlewares[f]}length(){return this._middlewares.length}},CJ=d(hq());function dh(f){return typeof f.batchRequestIdx=="number"}function PJ(f){if(f.action!=="findUnique"&&f.action!=="findUniqueOrThrow")return;let w=[];return f.modelName&&w.push(f.modelName),f.query.arguments&&w.push(u2(f.query.arguments)),w.push(u2(f.query.selection)),w.join("")}function u2(f){return`(${Object.keys(f).sort().map((w)=>{let S=f[w];return typeof S=="object"&&S!==null?`(${w} ${u2(S)})`:w}).join(" ")})`}var kJ={aggregate:!1,aggregateRaw:!1,createMany:!0,createManyAndReturn:!0,createOne:!0,deleteMany:!0,deleteOne:!0,executeRaw:!0,findFirst:!1,findFirstOrThrow:!1,findMany:!1,findRaw:!1,findUnique:!1,findUniqueOrThrow:!1,groupBy:!1,queryRaw:!1,runCommandRaw:!0,updateMany:!0,updateManyAndReturn:!0,updateOne:!0,upsertOne:!0};function pv(f){return kJ[f]}var lJ=class{constructor(f){this.options=f,this.tickActive=!1,this.batches={}}request(f){let w=this.options.batchBy(f);return w?(this.batches[w]||(this.batches[w]=[],this.tickActive||(this.tickActive=!0,process.nextTick(()=>{this.dispatchBatches(),this.tickActive=!1}))),new Promise((S,v)=>{this.batches[w].push({request:f,resolve:S,reject:v})})):this.options.singleLoader(f)}dispatchBatches(){for(let f in this.batches){let w=this.batches[f];delete this.batches[f],w.length===1?this.options.singleLoader(w[0].request).then((S)=>{S instanceof Error?w[0].reject(S):w[0].resolve(S)}).catch((S)=>{w[0].reject(S)}):(w.sort((S,v)=>this.options.batchOrder(S.request,v.request)),this.options.batchLoader(w.map((S)=>S.request)).then((S)=>{if(S instanceof Error)for(let v=0;v<w.length;v++)w[v].reject(S);else for(let v=0;v<w.length;v++){let q=S[v];q instanceof Error?w[v].reject(q):w[v].resolve(q)}}).catch((S)=>{for(let v=0;v<w.length;v++)w[v].reject(S)}))}}get[Symbol.toStringTag](){return"DataLoader"}};function zw(f,w){if(w===null)return w;switch(f){case"bigint":return BigInt(w);case"bytes":{let{buffer:S,byteOffset:v,byteLength:q}=Buffer.from(w,"base64");return new Uint8Array(S,v,q)}case"decimal":return new L0(w);case"datetime":case"date":return new Date(w);case"time":return new Date(`1970-01-01T${w}Z`);case"bigint-array":return w.map((S)=>zw("bigint",S));case"bytes-array":return w.map((S)=>zw("bytes",S));case"decimal-array":return w.map((S)=>zw("decimal",S));case"datetime-array":return w.map((S)=>zw("datetime",S));case"date-array":return w.map((S)=>zw("date",S));case"time-array":return w.map((S)=>zw("time",S));default:return w}}function sh(f){let w=[],S=IJ(f);for(let v=0;v<f.rows.length;v++){let q=f.rows[v],h={...S};for(let H=0;H<q.length;H++)h[f.columns[H]]=zw(f.types[H],q[H]);w.push(h)}return w}function IJ(f){let w={};for(let S=0;S<f.columns.length;S++)w[f.columns[S]]=null;return w}var rJ=cf("prisma:client:request_handler"),xJ=class{constructor(f,w){this.logEmitter=w,this.client=f,this.dataloader=new lJ({batchLoader:Ab(async({requests:S,customDataProxyFetch:v})=>{let{transaction:q,otelParentCtx:h}=S[0],H=S.map((b)=>b.protocolQuery),$=this.client._tracingHelper.getTraceParent(h),j=S.some((b)=>pv(b.protocolQuery.action));return(await this.client._engine.requestBatch(H,{traceparent:$,transaction:yJ(q),containsWrite:j,customDataProxyFetch:v})).map((b,J)=>{if(b instanceof Error)return b;try{return this.mapQueryEngineResult(S[J],b)}catch(O){return O}})}),singleLoader:async(S)=>{let v=S.transaction?.kind==="itx"?Zh(S.transaction):void 0,q=await this.client._engine.request(S.protocolQuery,{traceparent:this.client._tracingHelper.getTraceParent(),interactiveTransaction:v,isWrite:pv(S.protocolQuery.action),customDataProxyFetch:S.customDataProxyFetch});return this.mapQueryEngineResult(S,q)},batchBy:(S)=>S.transaction?.id?`transaction-${S.transaction.id}`:PJ(S.protocolQuery),batchOrder(S,v){return S.transaction?.kind==="batch"&&v.transaction?.kind==="batch"?S.transaction.index-v.transaction.index:0}})}async request(f){try{return await this.dataloader.request(f)}catch(w){let{clientMethod:S,callsite:v,transaction:q,args:h,modelName:H}=f;this.handleAndLogRequestError({error:w,clientMethod:S,callsite:v,transaction:q,args:h,modelName:H,globalOmit:f.globalOmit})}}mapQueryEngineResult({dataPath:f,unpacker:w},S){let v=S?.data,q=this.unpack(v,f,w);return process.env.PRISMA_CLIENT_GET_TIME?{data:q}:q}handleAndLogRequestError(f){try{this.handleRequestError(f)}catch(w){throw this.logEmitter&&this.logEmitter.emit("error",{message:w.message,target:f.clientMethod,timestamp:new Date}),w}}handleRequestError({error:f,clientMethod:w,callsite:S,transaction:v,args:q,modelName:h,globalOmit:H}){if(rJ(f),mJ(f,v))throw f;if(f instanceof Bw&&TJ(f)){let j=th(f.meta);vh({args:q,errors:[j],callsite:S,errorFormat:this.client._errorFormat,originalMethod:w,clientVersion:this.client._clientVersion,globalOmit:H})}let $=f.message;if(S&&($=xq({callsite:S,originalMethod:w,isPanic:f.isPanic,showColors:this.client._errorFormat==="pretty",message:$})),$=this.sanitizeMessage($),f.code){let j=h?{modelName:h,...f.meta}:f.meta;throw new Bw($,{code:f.code,clientVersion:this.client._clientVersion,meta:j,batchRequestIdx:f.batchRequestIdx})}else{if(f.isPanic)throw new Ow($,this.client._clientVersion);if(f instanceof Mf)throw new Mf($,{clientVersion:this.client._clientVersion,batchRequestIdx:f.batchRequestIdx});if(f instanceof $f)throw new $f($,this.client._clientVersion);if(f instanceof Ow)throw new Ow($,this.client._clientVersion)}throw f.clientVersion=this.client._clientVersion,f}sanitizeMessage(f){return this.client._errorFormat&&this.client._errorFormat!=="pretty"?CJ.default(f):f}unpack(f,w,S){if(!f||(f.data&&(f=f.data),!f))return f;let v=Object.keys(f)[0],q=Object.values(f)[0],h=w.filter((j)=>j!=="select"&&j!=="include"),H=ch(q,h),$=v==="queryRaw"?sh(H):ES(H);return S?S($):$}get[Symbol.toStringTag](){return"RequestHandler"}};function yJ(f){if(f){if(f.kind==="batch")return{kind:"batch",options:{isolationLevel:f.isolationLevel}};if(f.kind==="itx")return{kind:"itx",options:Zh(f)};MS(f,"Unknown transaction kind")}}function Zh(f){return{id:f.id,payload:f.payload}}function mJ(f,w){return dh(f)&&w?.kind==="batch"&&f.batchRequestIdx!==w.index}function TJ(f){return f.code==="P2009"||f.code==="P2012"}function th(f){if(f.kind==="Union")return{kind:"Union",errors:f.errors.map(th)};if(Array.isArray(f.selectionPath)){let[,...w]=f.selectionPath;return{...f,selectionPath:w}}return f}var uJ="6.3.1",nJ=uJ,iJ=d(Hq()),t=class extends Error{constructor(f){super(f+`
Read more at https://pris.ly/d/client-constructor`),this.name="PrismaClientConstructorValidationError"}get[Symbol.toStringTag](){return"PrismaClientConstructorValidationError"}};hf(t,"PrismaClientConstructorValidationError");var dv=["datasources","datasourceUrl","errorFormat","adapter","log","transactionOptions","omit","__internal"],sv=["pretty","colorless","minimal"],Zv=["info","query","warn","error"],aJ={datasources:(f,{datasourceNames:w})=>{if(f){if(typeof f!="object"||Array.isArray(f))throw new t(`Invalid value ${JSON.stringify(f)} for "datasources" provided to PrismaClient constructor`);for(let[S,v]of Object.entries(f)){if(!w.includes(S)){let q=rw(S,w)||` Available datasources: ${w.join(", ")}`;throw new t(`Unknown datasource ${S} provided to PrismaClient constructor.${q}`)}if(typeof v!="object"||Array.isArray(v))throw new t(`Invalid value ${JSON.stringify(f)} for datasource "${S}" provided to PrismaClient constructor.
It should have this form: { url: "CONNECTION_STRING" }`);if(v&&typeof v=="object")for(let[q,h]of Object.entries(v)){if(q!=="url")throw new t(`Invalid value ${JSON.stringify(f)} for datasource "${S}" provided to PrismaClient constructor.
It should have this form: { url: "CONNECTION_STRING" }`);if(typeof h!="string")throw new t(`Invalid value ${JSON.stringify(h)} for datasource "${S}" provided to PrismaClient constructor.
It should have this form: { url: "CONNECTION_STRING" }`)}}}},adapter:(f,w)=>{if(!f&&M2(w.generator)==="client")throw new t('Using engine type "client" requires a driver adapter to be provided to PrismaClient constructor.');if(f===null)return;if(f===void 0)throw new t('"adapter" property must not be undefined, use null to conditionally disable driver adapters.');if(!ah(w).includes("driverAdapters"))throw new t('"adapter" property can only be provided to PrismaClient constructor when "driverAdapters" preview feature is enabled.');if(M2(w.generator)==="binary")throw new t('Cannot use a driver adapter with the "binary" Query Engine. Please use the "library" Query Engine.')},datasourceUrl:(f)=>{if(typeof f<"u"&&typeof f!="string")throw new t(`Invalid value ${JSON.stringify(f)} for "datasourceUrl" provided to PrismaClient constructor.
Expected string or undefined.`)},errorFormat:(f)=>{if(f){if(typeof f!="string")throw new t(`Invalid value ${JSON.stringify(f)} for "errorFormat" provided to PrismaClient constructor.`);if(!sv.includes(f)){let w=rw(f,sv);throw new t(`Invalid errorFormat ${f} provided to PrismaClient constructor.${w}`)}}},log:(f)=>{if(!f)return;if(!Array.isArray(f))throw new t(`Invalid value ${JSON.stringify(f)} for "log" provided to PrismaClient constructor.`);function w(S){if(typeof S=="string"&&!Zv.includes(S)){let v=rw(S,Zv);throw new t(`Invalid log level "${S}" provided to PrismaClient constructor.${v}`)}}for(let S of f){w(S);let v={level:w,emit:(q)=>{let h=["stdout","event"];if(!h.includes(q)){let H=rw(q,h);throw new t(`Invalid value ${JSON.stringify(q)} for "emit" in logLevel provided to PrismaClient constructor.${H}`)}}};if(S&&typeof S=="object")for(let[q,h]of Object.entries(S))if(v[q])v[q](h);else throw new t(`Invalid property ${q} for "log" provided to PrismaClient constructor`)}},transactionOptions:(f)=>{if(!f)return;let w=f.maxWait;if(w!=null&&w<=0)throw new t(`Invalid value ${w} for maxWait in "transactionOptions" provided to PrismaClient constructor. maxWait needs to be greater than 0`);let S=f.timeout;if(S!=null&&S<=0)throw new t(`Invalid value ${S} for timeout in "transactionOptions" provided to PrismaClient constructor. timeout needs to be greater than 0`)},omit:(f,w)=>{if(typeof f!="object")throw new t('"omit" option is expected to be an object.');if(f===null)throw new t('"omit" option can not be `null`');let S=[];for(let[v,q]of Object.entries(f)){let h=dJ(v,w.runtimeDataModel);if(!h){S.push({kind:"UnknownModel",modelKey:v});continue}for(let[H,$]of Object.entries(q)){let j=h.fields.find((b)=>b.name===H);if(!j){S.push({kind:"UnknownField",modelKey:v,fieldName:H});continue}if(j.relationName){S.push({kind:"RelationInOmit",modelKey:v,fieldName:H});continue}typeof $!="boolean"&&S.push({kind:"InvalidFieldValue",modelKey:v,fieldName:H})}}if(S.length>0)throw new t(sJ(f,S))},__internal:(f)=>{if(!f)return;let w=["debug","engine","configOverride"];if(typeof f!="object")throw new t(`Invalid value ${JSON.stringify(f)} for "__internal" to PrismaClient constructor`);for(let[S]of Object.entries(f))if(!w.includes(S)){let v=rw(S,w);throw new t(`Invalid property ${JSON.stringify(S)} for "__internal" provided to PrismaClient constructor.${v}`)}}};function oJ(f,w){for(let[S,v]of Object.entries(f)){if(!dv.includes(S)){let q=rw(S,dv);throw new t(`Unknown property ${S} provided to PrismaClient constructor.${q}`)}aJ[S](v,w)}if(f.datasourceUrl&&f.datasources)throw new t('Can not use "datasourceUrl" and "datasources" options at the same time. Pick one of them')}function rw(f,w){if(w.length===0||typeof f!="string")return"";let S=pJ(f,w);return S?` Did you mean "${S}"?`:""}function pJ(f,w){if(w.length===0)return null;let S=w.map((q)=>({value:q,distance:iJ.default(f,q)}));S.sort((q,h)=>q.distance<h.distance?-1:1);let v=S[0];return v.distance<3?v.value:null}function dJ(f,w){return tv(w.models,f)??tv(w.types,f)}function tv(f,w){let S=Object.keys(f).find((v)=>d2(v)===w);if(S)return f[S]}function sJ(f,w){let S=v1(f);for(let h of w)switch(h.kind){case"UnknownModel":S.arguments.getField(h.modelKey)?.markAsError(),S.addErrorMessage(()=>`Unknown model name: ${h.modelKey}.`);break;case"UnknownField":S.arguments.getDeepField([h.modelKey,h.fieldName])?.markAsError(),S.addErrorMessage(()=>`Model "${h.modelKey}" does not have a field named "${h.fieldName}".`);break;case"RelationInOmit":S.arguments.getDeepField([h.modelKey,h.fieldName])?.markAsError(),S.addErrorMessage(()=>'Relations are already excluded by default and can not be specified in "omit".');break;case"InvalidFieldValue":S.arguments.getDeepFieldValue([h.modelKey,h.fieldName])?.markAsError(),S.addErrorMessage(()=>"Omit field option value must be a boolean.");break}let{message:v,args:q}=Sh(S,"colorless");return`Error validating "omit" option:

${q}

${v}`}function ZJ(f){return f.length===0?Promise.resolve([]):new Promise((w,S)=>{let v=new Array(f.length),q=null,h=!1,H=0,$=()=>{h||(H++,H===f.length&&(h=!0,q?S(q):w(v)))},j=(b)=>{h||(h=!0,S(b))};for(let b=0;b<f.length;b++)f[b].then((J)=>{v[b]=J,$()},(J)=>{if(!dh(J)){j(J);return}J.batchRequestIdx===b?j(J):(q||(q=J),$())})})}var qw=cf("prisma:client");typeof globalThis=="object"&&(globalThis.NODE_CLIENT=!0);var tJ={requestArgsToMiddlewareArgs:(f)=>f,middlewareArgsToRequestArgs:(f)=>f},eJ=Symbol.for("prisma.client.transaction.id"),f9={id:0,nextId(){return++this.id}};function w9(f){class w{constructor(S){this._originalClient=this,this._middlewares=new FJ,this._createPrismaPromise=av(),this.$extends=Wb,f=S?.__internal?.configOverride?.(f)??f,zb(f),S&&oJ(S,f);let v=new Yj.EventEmitter().on("error",()=>{});this._extensions=qh.empty(),this._previewFeatures=ah(f),this._clientVersion=f.clientVersion??nJ,this._activeProvider=f.activeProvider,this._globalOmit=S?.omit,this._tracingHelper=LJ();let q={rootEnvPath:f.relativeEnvPaths.rootEnvPath&&HS.default.resolve(f.dirname,f.relativeEnvPaths.rootEnvPath),schemaEnvPath:f.relativeEnvPaths.schemaEnvPath&&HS.default.resolve(f.dirname,f.relativeEnvPaths.schemaEnvPath)},h;if(S?.adapter){h=Rj(S.adapter);let $=f.activeProvider==="postgresql"?"postgres":f.activeProvider;if(h.provider!==$)throw new $f(`The Driver Adapter \`${h.adapterName}\`, based on \`${h.provider}\`, is not compatible with the provider \`${$}\` specified in the Prisma schema.`,this._clientVersion);if(S.datasources||S.datasourceUrl!==void 0)throw new $f("Custom datasource configuration is not compatible with Prisma Driver Adapters. Please define the database connection string directly in the Driver Adapter configuration.",this._clientVersion)}let H=!h&&Yq(q,{conflictCheck:"none"})||f.injectableEdgeEnv?.();try{let $=S??{},j=$.__internal??{},b=j.debug===!0;b&&cf.enable("prisma:client");let J=HS.default.resolve(f.dirname,f.relativePath);Aj.default.existsSync(J)||(J=f.dirname),qw("dirname",f.dirname),qw("relativePath",f.relativePath),qw("cwd",J);let O=j.engine||{};if($.errorFormat?this._errorFormat=$.errorFormat:process.env.NO_COLOR?this._errorFormat="colorless":this._errorFormat="colorless",this._runtimeDataModel=f.runtimeDataModel,this._engineConfig={cwd:J,dirname:f.dirname,enableDebugLogs:b,allowTriggerPanic:O.allowTriggerPanic,datamodelPath:HS.default.join(f.dirname,f.filename??"schema.prisma"),prismaPath:O.binaryPath??void 0,engineEndpoint:O.endpoint,generator:f.generator,showColors:this._errorFormat==="pretty",logLevel:$.log&&KJ($.log),logQueries:$.log&&!!(typeof $.log=="string"?$.log==="query":$.log.find((g)=>typeof g=="string"?g==="query":g.level==="query")),env:H?.parsed??{},flags:[],engineWasm:f.engineWasm,compilerWasm:f.compilerWasm,clientVersion:f.clientVersion,engineVersion:f.engineVersion,previewFeatures:this._previewFeatures,activeProvider:f.activeProvider,inlineSchema:f.inlineSchema,overrideDatasources:_b($,f.datasourceNames),inlineDatasources:f.inlineDatasources,inlineSchemaHash:f.inlineSchemaHash,tracingHelper:this._tracingHelper,transactionOptions:{maxWait:$.transactionOptions?.maxWait??2000,timeout:$.transactionOptions?.timeout??5000,isolationLevel:$.transactionOptions?.isolationLevel},logEmitter:v,isBundled:f.isBundled,adapter:h},this._accelerateEngineConfig={...this._engineConfig,accelerateUtils:{resolveDatasourceUrl:b1,getBatchRequestPayload:H1,prismaGraphQLToJSError:$1,PrismaClientUnknownRequestError:Mf,PrismaClientInitializationError:$f,PrismaClientKnownRequestError:Bw,debug:cf("prisma:client:accelerateEngine"),engineVersion:Ej.version,clientVersion:f.clientVersion}},qw("clientVersion",f.clientVersion),this._engine=cJ(f,this._engineConfig),this._requestHandler=new xJ(this,v),$.log)for(let g of $.log){let B=typeof g=="string"?g:g.emit==="stdout"?g.level:null;B&&this.$on(B,(R)=>{D2.log(`${D2.tags[B]??""}`,R.message||R.query)})}this._metrics=new Bh(this._engine)}catch($){throw $.clientVersion=this._clientVersion,$}return this._appliedParent=y2(this)}get[Symbol.toStringTag](){return"PrismaClient"}$use(S){this._middlewares.use(S)}$on(S,v){S==="beforeExit"?this._engine.onBeforeExit(v):S&&this._engineConfig.logEmitter.on(S,v)}$connect(){try{return this._engine.start()}catch(S){throw S.clientVersion=this._clientVersion,S}}async $disconnect(){try{await this._engine.stop()}catch(S){throw S.clientVersion=this._clientVersion,S}finally{e$()}}$executeRawInternal(S,v,q,h){let H=this._activeProvider;return this._request({action:"executeRaw",args:q,transaction:S,clientMethod:v,argsMapper:iv({clientMethod:v,activeProvider:H}),callsite:X0(this._errorFormat),dataPath:[],middlewareArgsMapper:h})}$executeRaw(S,...v){return this._createPrismaPromise((q)=>{if(S.raw!==void 0||S.sql!==void 0){let[h,H]=ev(S,v);return nv(this._activeProvider,h.text,h.values,Array.isArray(S)?"prisma.$executeRaw`<SQL>`":"prisma.$executeRaw(sql`<SQL>`)"),this.$executeRawInternal(q,"$executeRaw",h,H)}throw new uf("`$executeRaw` is a tag function, please use it like the following:\n```\nconst result = await prisma.$executeRaw`UPDATE User SET cool = ${true} WHERE email = ${'user@email.com'};`\n```\n\nOr read our docs at https://www.prisma.io/docs/concepts/components/prisma-client/raw-database-access#executeraw\n",{clientVersion:this._clientVersion})})}$executeRawUnsafe(S,...v){return this._createPrismaPromise((q)=>(nv(this._activeProvider,S,v,"prisma.$executeRawUnsafe(<SQL>, [...values])"),this.$executeRawInternal(q,"$executeRawUnsafe",[S,...v])))}$runCommandRaw(S){if(f.activeProvider!=="mongodb")throw new uf(`The ${f.activeProvider} provider does not support $runCommandRaw. Use the mongodb provider.`,{clientVersion:this._clientVersion});return this._createPrismaPromise((v)=>this._request({args:S,clientMethod:"$runCommandRaw",dataPath:[],action:"runCommandRaw",argsMapper:EJ,callsite:X0(this._errorFormat),transaction:v}))}async $queryRawInternal(S,v,q,h){let H=this._activeProvider;return this._request({action:"queryRaw",args:q,transaction:S,clientMethod:v,argsMapper:iv({clientMethod:v,activeProvider:H}),callsite:X0(this._errorFormat),dataPath:[],middlewareArgsMapper:h})}$queryRaw(S,...v){return this._createPrismaPromise((q)=>{if(S.raw!==void 0||S.sql!==void 0)return this.$queryRawInternal(q,"$queryRaw",...ev(S,v));throw new uf("`$queryRaw` is a tag function, please use it like the following:\n```\nconst result = await prisma.$queryRaw`SELECT * FROM User WHERE id = ${1} OR email = ${'user@email.com'};`\n```\n\nOr read our docs at https://www.prisma.io/docs/concepts/components/prisma-client/raw-database-access#queryraw\n",{clientVersion:this._clientVersion})})}$queryRawTyped(S){return this._createPrismaPromise((v)=>{if(!this._hasPreviewFlag("typedSql"))throw new uf("`typedSql` preview feature must be enabled in order to access $queryRawTyped API",{clientVersion:this._clientVersion});return this.$queryRawInternal(v,"$queryRawTyped",S)})}$queryRawUnsafe(S,...v){return this._createPrismaPromise((q)=>this.$queryRawInternal(q,"$queryRawUnsafe",[S,...v]))}_transactionWithArray({promises:S,options:v}){let q=f9.nextId(),h=NJ(S.length),H=S.map(($,j)=>{if($?.[Symbol.toStringTag]!=="PrismaPromise")throw new Error("All elements of the array need to be Prisma Client promises. Hint: Please make sure you are not awaiting the Prisma client calls you intended to pass in the $transaction function.");let b=v?.isolationLevel??this._engineConfig.transactionOptions.isolationLevel,J={kind:"batch",id:q,index:j,isolationLevel:b,lock:h};return $.requestTransaction?.(J)??$});return ZJ(H)}async _transactionWithCallback({callback:S,options:v}){let q={traceparent:this._tracingHelper.getTraceParent()},h={maxWait:v?.maxWait??this._engineConfig.transactionOptions.maxWait,timeout:v?.timeout??this._engineConfig.transactionOptions.timeout,isolationLevel:v?.isolationLevel??this._engineConfig.transactionOptions.isolationLevel},H=await this._engine.transaction("start",q,h),$;try{let j={kind:"itx",...H};$=await S(this._createItxClient(j)),await this._engine.transaction("commit",q,H)}catch(j){throw await this._engine.transaction("rollback",q,H).catch(()=>{}),j}return $}_createItxClient(S){return y2(_0(Bb(this),[af("_appliedParent",()=>this._appliedParent._createItxClient(S)),af("_createPrismaPromise",()=>av(S)),af(eJ,()=>S.id),I2(zJ)]))}$transaction(S,v){let q;typeof S=="function"?this._engineConfig.adapter?.adapterName==="@prisma/adapter-d1"?q=()=>{throw new Error("Cloudflare D1 does not support interactive transactions. We recommend you to refactor your queries with that limitation in mind, and use batch transactions with `prisma.$transactions([])` where applicable.")}:q=()=>this._transactionWithCallback({callback:S,options:v}):q=()=>this._transactionWithArray({promises:S,options:v});let h={name:"transaction",attributes:{method:"$transaction"}};return this._tracingHelper.runInChildSpan(h,q)}_request(S){S.otelParentCtx=this._tracingHelper.getActiveContext();let v=S.middlewareArgsMapper??tJ,q={args:v.requestArgsToMiddlewareArgs(S.args),dataPath:S.dataPath,runInTransaction:!!S.transaction,action:S.action,model:S.model},h={middleware:{name:"middleware",middleware:!0,attributes:{method:"$use"},active:!1},operation:{name:"operation",attributes:{method:q.action,model:q.model,name:q.model?`${q.model}.${q.action}`:q.action}}},H=-1,$=async(j)=>{let b=this._middlewares.get(++H);if(b)return this._tracingHelper.runInChildSpan(h.middleware,(c)=>b(j,(U)=>(c?.end(),$(U))));let{runInTransaction:J,args:O,...g}=j,B={...S,...g};O&&(B.args=v.middlewareArgsToRequestArgs(O)),S.transaction!==void 0&&J===!1&&delete B.transaction;let R=await Yb(this,B);return B.model?cb({result:R,modelName:B.model,args:B.args,extensions:this._extensions,runtimeDataModel:this._runtimeDataModel,globalOmit:this._globalOmit}):R};return this._tracingHelper.runInChildSpan(h.operation,()=>new Qj.AsyncResource("prisma-client-request").runInAsyncScope(()=>$(q)))}async _executeRequest({args:S,clientMethod:v,dataPath:q,callsite:h,action:H,model:$,argsMapper:j,transaction:b,unpacker:J,otelParentCtx:O,customDataProxyFetch:g}){try{S=j?j(S):S;let B={name:"serialize"},R=this._tracingHelper.runInChildSpan(B,()=>Jh({modelName:$,runtimeDataModel:this._runtimeDataModel,action:H,args:S,clientMethod:v,callsite:h,extensions:this._extensions,errorFormat:this._errorFormat,clientVersion:this._clientVersion,previewFeatures:this._previewFeatures,globalOmit:this._globalOmit}));return cf.enabled("prisma:client")&&(qw("Prisma Client call:"),qw(`prisma.${v}(${Uj(S)})`),qw("Generated request:"),qw(JSON.stringify(R,null,2)+`
`)),b?.kind==="batch"&&await b.lock,this._requestHandler.request({protocolQuery:R,modelName:$,action:H,clientMethod:v,dataPath:q,callsite:h,args:S,extensions:this._extensions,transaction:b,unpacker:J,otelParentCtx:O,otelChildCtx:this._tracingHelper.getActiveContext(),globalOmit:this._globalOmit,customDataProxyFetch:g})}catch(B){throw B.clientVersion=this._clientVersion,B}}get $metrics(){if(!this._hasPreviewFlag("metrics"))throw new uf("`metrics` preview feature must be enabled in order to access metrics API",{clientVersion:this._clientVersion});return this._metrics}_hasPreviewFlag(S){return!!this._engineConfig.previewFeatures?.includes(S)}$applyPendingMigrations(){return this._engine.applyPendingMigrations()}}return w}function ev(f,w){return S9(f)?[new Gw(f,w),MJ]:[f,DJ]}function S9(f){return Array.isArray(f)&&Array.isArray(f.raw)}var v9=new Set(["toJSON","$$typeof","asymmetricMatch",Symbol.iterator,Symbol.toStringTag,Symbol.isConcatSpreadable,Symbol.toPrimitive]);function q9(f){return new Proxy(f,{get(w,S){if(S in w)return w[S];if(!v9.has(S))throw new TypeError(`Invalid enum value: ${String(S)}`)}})}function h9(f){Yq(f,{conflictCheck:"warn"})}/*! Bundled license information:

decimal.js/decimal.mjs:
  (*!
   *  decimal.js v10.4.3
   *  An arbitrary-precision Decimal type for JavaScript.
   *  https://github.com/MikeMcl/decimal.js
   *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
   *  MIT Licence
   *)
*/});var SH=a0((g1)=>{var __dirname="/home/josedv/Dev/Projects/naturale-pos/node_modules/.prisma/client";Object.defineProperty(g1,"__esModule",{value:!0});var{PrismaClientKnownRequestError:H9,PrismaClientUnknownRequestError:$9,PrismaClientRustPanicError:j9,PrismaClientInitializationError:b9,PrismaClientValidationError:J9,getPrismaClient:O9,sqltag:g9,empty:B9,join:W9,raw:R9,skip:mW,Decimal:G9,Debug:TW,objectEnumValues:uw,makeStrictEnum:X9,Extensions:wH,warnOnce:uW,defineDmmfProperty:c9,Public:E9,getRuntime:nW,createParam:iW}=PS(),jf={};g1.Prisma=jf;g1.$Enums={};jf.prismaVersion={client:"6.3.1",engine:"acc0b9dd43eb689cbd20c9470515d719db10d0b0"};jf.PrismaClientKnownRequestError=H9;jf.PrismaClientUnknownRequestError=$9;jf.PrismaClientRustPanicError=j9;jf.PrismaClientInitializationError=b9;jf.PrismaClientValidationError=J9;jf.Decimal=G9;jf.sql=g9;jf.empty=B9;jf.join=W9;jf.raw=R9;jf.validator=E9.validator;jf.getExtensionContext=wH.getExtensionContext;jf.defineExtension=wH.defineExtension;jf.DbNull=uw.instances.DbNull;jf.JsonNull=uw.instances.JsonNull;jf.AnyNull=uw.instances.AnyNull;jf.NullTypes={DbNull:uw.classes.DbNull,JsonNull:uw.classes.JsonNull,AnyNull:uw.classes.AnyNull};var fw=p("path");g1.Prisma.TransactionIsolationLevel=X9({ReadUncommitted:"ReadUncommitted",ReadCommitted:"ReadCommitted",RepeatableRead:"RepeatableRead",Serializable:"Serializable"});g1.Prisma.UserScalarFieldEnum={id:"id",username:"username",name:"name",password:"password",role:"role"};g1.Prisma.ProductScalarFieldEnum={id:"id",name:"name",description:"description",price:"price",stock:"stock",updatedAt:"updatedAt",categoryId:"categoryId"};g1.Prisma.SaleScalarFieldEnum={id:"id",total:"total",date:"date",updatedAt:"updatedAt",paymentMethod:"paymentMethod",userId:"userId"};g1.Prisma.ProductOnSaleScalarFieldEnum={saleId:"saleId",productId:"productId",quantity:"quantity",price:"price"};g1.Prisma.ProviderScalarFieldEnum={id:"id",name:"name",address:"address",phone:"phone",email:"email"};g1.Prisma.SupplyScalarFieldEnum={id:"id",providerId:"providerId",total:"total",date:"date"};g1.Prisma.ProductOnSupplyScalarFieldEnum={supplyId:"supplyId",productId:"productId",quantity:"quantity",price:"price"};g1.Prisma.CategoryScalarFieldEnum={id:"id",name:"name",description:"description"};g1.Prisma.SortOrder={asc:"asc",desc:"desc"};g1.Prisma.QueryMode={default:"default",insensitive:"insensitive"};g1.Prisma.NullsOrder={first:"first",last:"last"};g1.Role=g1.$Enums.Role={ADMIN:"ADMIN",USER:"USER"};g1.PAYMENT_METHOD=g1.$Enums.PAYMENT_METHOD={CASH:"CASH",CARD:"CARD",TRANSFER:"TRANSFER"};g1.Prisma.ModelName={User:"User",Product:"Product",Sale:"Sale",ProductOnSale:"ProductOnSale",Provider:"Provider",Supply:"Supply",ProductOnSupply:"ProductOnSupply",Category:"Category"};var zf={generator:{name:"client",provider:{fromEnvVar:null,value:"prisma-client-js"},output:{value:"/home/josedv/Dev/Projects/naturale-pos/node_modules/@prisma/client",fromEnvVar:null},config:{engineType:"library"},binaryTargets:[{fromEnvVar:null,value:"debian-openssl-3.0.x",native:!0}],previewFeatures:[],sourceFilePath:"/home/josedv/Dev/Projects/naturale-pos/packages/backend/prisma/schema.prisma"},relativeEnvPaths:{rootEnvPath:null,schemaEnvPath:"../../../packages/backend/.env"},relativePath:"../../../packages/backend/prisma",clientVersion:"6.3.1",engineVersion:"acc0b9dd43eb689cbd20c9470515d719db10d0b0",datasourceNames:["db"],activeProvider:"postgresql",postinstall:!1,inlineDatasources:{db:{url:{fromEnvVar:"DATABASE_URL",value:null}}},inlineSchema:`generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  ADMIN
  USER
}

enum PAYMENT_METHOD {
  CASH
  CARD
  TRANSFER

  @@map("payment_methods")
}

model User {
  id       String @id @default(cuid())
  username String @unique
  name     String
  password String
  sales    Sale[]
  role     Role   @default(USER)

  @@map("users")
}

model Product {
  id              String            @id @default(cuid())
  name            String
  description     String?
  price           Float
  stock           Int               @default(0)
  updatedAt       DateTime          @updatedAt
  category        Category          @relation(fields: [categoryId], references: [id], onDelete: SetDefault, onUpdate: Cascade)
  categoryId      Int               @default(0)
  ProductOnSale   ProductOnSale[]
  ProductOnSupply ProductOnSupply[]

  @@map("products")
}

model Sale {
  id            Int             @id @default(autoincrement())
  total         Float           @default(0)
  date          DateTime        @default(now())
  updatedAt     DateTime        @updatedAt
  paymentMethod PAYMENT_METHOD  @default(CASH)
  products      ProductOnSale[]
  userId        String?
  user          User?           @relation(fields: [userId], references: [id], onUpdate: Cascade, onDelete: SetNull)

  @@map("sales")
}

model ProductOnSale {
  saleId    Int
  productId String
  quantity  Int
  price     Float
  sale      Sale    @relation(fields: [saleId], references: [id], onUpdate: Cascade, onDelete: Cascade)
  product   Product @relation(fields: [productId], references: [id], onUpdate: Cascade, onDelete: Cascade)

  @@id([saleId, productId])
  @@map("products_on_sale")
}

model Provider {
  id       String   @id @default(cuid())
  name     String
  address  String?
  phone    String?
  email    String?
  supplies Supply[]

  @@map("providers")
}

model Supply {
  id             Int               @id @default(autoincrement())
  providerId     String            @default("0")
  total          Float             @default(0)
  date           DateTime          @default(now())
  supplyProducts ProductOnSupply[]
  provider       Provider          @relation(fields: [providerId], references: [id], onUpdate: Cascade, onDelete: SetDefault)

  @@map("supplies")
}

model ProductOnSupply {
  supplyId  Int
  productId String

  quantity Int
  price    Float
  supply   Supply  @relation(fields: [supplyId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  product  Product @relation(fields: [productId], references: [id], onDelete: Cascade, onUpdate: Cascade)

  @@id([supplyId, productId])
  @@map("products_on_supply")
}

model Category {
  id          Int       @id @default(autoincrement())
  name        String
  description String?
  products    Product[]

  @@map("categories")
}
`,inlineSchemaHash:"dbd9b9390508555f2883511130b44d7198aedc2b0eb97852e5f8eabd92ba9728",copyEngine:!0},fH=p("fs");zf.dirname=__dirname;if(!fH.existsSync(fw.join(__dirname,"schema.prisma"))){let f=["../../node_modules/.prisma/client","../node_modules/.prisma/client"],w=f.find((S)=>{return fH.existsSync(fw.join(process.cwd(),S,"schema.prisma"))})??f[0];zf.dirname=fw.join(process.cwd(),w),zf.isBundled=!0}zf.runtimeDataModel=JSON.parse('{"models":{"User":{"dbName":"users","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"cuid","args":[1]},"isGenerated":false,"isUpdatedAt":false},{"name":"username","kind":"scalar","isList":false,"isRequired":true,"isUnique":true,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"name","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"password","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"sales","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Sale","nativeType":null,"relationName":"SaleToUser","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"role","kind":"enum","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Role","nativeType":null,"default":"USER","isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Product":{"dbName":"products","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"cuid","args":[1]},"isGenerated":false,"isUpdatedAt":false},{"name":"name","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"description","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"price","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Float","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"stock","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Int","nativeType":null,"default":0,"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true},{"name":"category","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Category","nativeType":null,"relationName":"CategoryToProduct","relationFromFields":["categoryId"],"relationToFields":["id"],"relationOnDelete":"SetDefault","relationOnUpdate":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"categoryId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":true,"type":"Int","nativeType":null,"default":0,"isGenerated":false,"isUpdatedAt":false},{"name":"ProductOnSale","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ProductOnSale","nativeType":null,"relationName":"ProductToProductOnSale","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"ProductOnSupply","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ProductOnSupply","nativeType":null,"relationName":"ProductToProductOnSupply","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Sale":{"dbName":"sales","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"Int","nativeType":null,"default":{"name":"autoincrement","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"total","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Float","nativeType":null,"default":0,"isGenerated":false,"isUpdatedAt":false},{"name":"date","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"updatedAt","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"DateTime","nativeType":null,"isGenerated":false,"isUpdatedAt":true},{"name":"paymentMethod","kind":"enum","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"PAYMENT_METHOD","nativeType":null,"default":"CASH","isGenerated":false,"isUpdatedAt":false},{"name":"products","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ProductOnSale","nativeType":null,"relationName":"ProductOnSaleToSale","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"userId","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"user","kind":"object","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"User","nativeType":null,"relationName":"SaleToUser","relationFromFields":["userId"],"relationToFields":["id"],"relationOnDelete":"SetNull","relationOnUpdate":"Cascade","isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"ProductOnSale":{"dbName":"products_on_sale","schema":null,"fields":[{"name":"saleId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"productId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"quantity","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"price","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Float","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"sale","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Sale","nativeType":null,"relationName":"ProductOnSaleToSale","relationFromFields":["saleId"],"relationToFields":["id"],"relationOnDelete":"Cascade","relationOnUpdate":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"product","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Product","nativeType":null,"relationName":"ProductToProductOnSale","relationFromFields":["productId"],"relationToFields":["id"],"relationOnDelete":"Cascade","relationOnUpdate":"Cascade","isGenerated":false,"isUpdatedAt":false}],"primaryKey":{"name":null,"fields":["saleId","productId"]},"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Provider":{"dbName":"providers","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"String","nativeType":null,"default":{"name":"cuid","args":[1]},"isGenerated":false,"isUpdatedAt":false},{"name":"name","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"address","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"phone","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"email","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"supplies","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Supply","nativeType":null,"relationName":"ProviderToSupply","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Supply":{"dbName":"supplies","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"Int","nativeType":null,"default":{"name":"autoincrement","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"providerId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":true,"type":"String","nativeType":null,"default":"0","isGenerated":false,"isUpdatedAt":false},{"name":"total","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"Float","nativeType":null,"default":0,"isGenerated":false,"isUpdatedAt":false},{"name":"date","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":true,"type":"DateTime","nativeType":null,"default":{"name":"now","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"supplyProducts","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"ProductOnSupply","nativeType":null,"relationName":"ProductOnSupplyToSupply","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false},{"name":"provider","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Provider","nativeType":null,"relationName":"ProviderToSupply","relationFromFields":["providerId"],"relationToFields":["id"],"relationOnDelete":"SetDefault","relationOnUpdate":"Cascade","isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"ProductOnSupply":{"dbName":"products_on_supply","schema":null,"fields":[{"name":"supplyId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"productId","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":true,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"quantity","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Int","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"price","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Float","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"supply","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Supply","nativeType":null,"relationName":"ProductOnSupplyToSupply","relationFromFields":["supplyId"],"relationToFields":["id"],"relationOnDelete":"Cascade","relationOnUpdate":"Cascade","isGenerated":false,"isUpdatedAt":false},{"name":"product","kind":"object","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Product","nativeType":null,"relationName":"ProductToProductOnSupply","relationFromFields":["productId"],"relationToFields":["id"],"relationOnDelete":"Cascade","relationOnUpdate":"Cascade","isGenerated":false,"isUpdatedAt":false}],"primaryKey":{"name":null,"fields":["supplyId","productId"]},"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false},"Category":{"dbName":"categories","schema":null,"fields":[{"name":"id","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":true,"isReadOnly":false,"hasDefaultValue":true,"type":"Int","nativeType":null,"default":{"name":"autoincrement","args":[]},"isGenerated":false,"isUpdatedAt":false},{"name":"name","kind":"scalar","isList":false,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"description","kind":"scalar","isList":false,"isRequired":false,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"String","nativeType":null,"isGenerated":false,"isUpdatedAt":false},{"name":"products","kind":"object","isList":true,"isRequired":true,"isUnique":false,"isId":false,"isReadOnly":false,"hasDefaultValue":false,"type":"Product","nativeType":null,"relationName":"CategoryToProduct","relationFromFields":[],"relationToFields":[],"isGenerated":false,"isUpdatedAt":false}],"primaryKey":null,"uniqueFields":[],"uniqueIndexes":[],"isGenerated":false}},"enums":{"Role":{"values":[{"name":"ADMIN","dbName":null},{"name":"USER","dbName":null}],"dbName":null},"PAYMENT_METHOD":{"values":[{"name":"CASH","dbName":null},{"name":"CARD","dbName":null},{"name":"TRANSFER","dbName":null}],"dbName":"payment_methods"}},"types":{}}');c9(g1.Prisma,zf.runtimeDataModel);zf.engineWasm=void 0;zf.compilerWasm=void 0;var{warnEnvConflicts:Q9}=PS();Q9({rootEnvPath:zf.relativeEnvPaths.rootEnvPath&&fw.resolve(zf.dirname,zf.relativeEnvPaths.rootEnvPath),schemaEnvPath:zf.relativeEnvPaths.schemaEnvPath&&fw.resolve(zf.dirname,zf.relativeEnvPaths.schemaEnvPath)});var Y9=O9(zf);g1.PrismaClient=Y9;Object.assign(g1,jf);fw.join(__dirname,"libquery_engine-debian-openssl-3.0.x.so.node");fw.join(process.cwd(),"../../node_modules/.prisma/client/libquery_engine-debian-openssl-3.0.x.so.node");fw.join(__dirname,"schema.prisma");fw.join(process.cwd(),"../../node_modules/.prisma/client/schema.prisma")});var qH=a0((oW,vH)=>{vH.exports={...SH()}});var W1=a0((pW,hH)=>{hH.exports={...qH()}});var a1=async(f,w=Object.create(null))=>{let{all:S=!1,dot:v=!1}=w,h=(f instanceof o0?f.raw.headers:f.headers).get("Content-Type");if(h?.startsWith("multipart/form-data")||h?.startsWith("application/x-www-form-urlencoded"))return p4(f,{all:S,dot:v});return{}};async function p4(f,w){let S=await f.formData();if(S)return d4(S,w);return{}}function d4(f,w){let S=Object.create(null);if(f.forEach((v,q)=>{if(!(w.all||q.endsWith("[]")))S[q]=v;else s4(S,q,v)}),w.dot)Object.entries(S).forEach(([v,q])=>{if(v.includes("."))Z4(S,v,q),delete S[v]});return S}var s4=(f,w,S)=>{if(f[w]!==void 0)if(Array.isArray(f[w]))f[w].push(S);else f[w]=[f[w],S];else f[w]=S},Z4=(f,w,S)=>{let v=f,q=w.split(".");q.forEach((h,H)=>{if(H===q.length-1)v[h]=S;else{if(!v[h]||typeof v[h]!=="object"||Array.isArray(v[h])||v[h]instanceof File)v[h]=Object.create(null);v=v[h]}})};var dS=(f)=>{let w=f.split("/");if(w[0]==="")w.shift();return w},o1=(f)=>{let{groups:w,path:S}=t4(f),v=dS(S);return e4(v,w)},t4=(f)=>{let w=[];return f=f.replace(/\{[^}]+\}/g,(S,v)=>{let q=`@${v}`;return w.push([q,S]),q}),{groups:w,path:f}},e4=(f,w)=>{for(let S=w.length-1;S>=0;S--){let[v]=w[S];for(let q=f.length-1;q>=0;q--)if(f[q].includes(v)){f[q]=f[q].replace(v,w[S][1]);break}}return f},p0={},sS=(f,w)=>{if(f==="*")return"*";let S=f.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(S){let v=`${f}#${w}`;if(!p0[v])if(S[2])p0[v]=w&&w[0]!==":"&&w[0]!=="*"?[v,S[1],new RegExp(`^${S[2]}(?=/${w})`)]:[f,S[1],new RegExp(`^${S[2]}$`)];else p0[v]=[f,S[1],!0];return p0[v]}return null},ZS=(f,w)=>{try{return w(f)}catch{return f.replace(/(?:%[0-9A-Fa-f]{2})+/g,(S)=>{try{return w(S)}catch{return S}})}},f$=(f)=>ZS(f,decodeURI),tS=(f)=>{let w=f.url,S=w.indexOf("/",8),v=S;for(;v<w.length;v++){let q=w.charCodeAt(v);if(q===37){let h=w.indexOf("?",v),H=w.slice(S,h===-1?void 0:h);return f$(H.includes("%25")?H.replace(/%25/g,"%2525"):H)}else if(q===63)break}return w.slice(S,v)};var p1=(f)=>{let w=tS(f);return w.length>1&&w.at(-1)==="/"?w.slice(0,-1):w},Pw=(...f)=>{let w="",S=!1;for(let v of f){if(w.at(-1)==="/")w=w.slice(0,-1),S=!0;if(v[0]!=="/")v=`/${v}`;if(v==="/"&&S)w=`${w}/`;else if(v!=="/")w=`${w}${v}`;if(v==="/"&&w==="")w="/"}return w},d0=(f)=>{if(!f.match(/\:.+\?$/))return null;let w=f.split("/"),S=[],v="";return w.forEach((q)=>{if(q!==""&&!/\:/.test(q))v+="/"+q;else if(/\:/.test(q))if(/\?/.test(q)){if(S.length===0&&v==="")S.push("/");else S.push(v);let h=q.replace("?","");v+="/"+h,S.push(v)}else v+="/"+q}),S.filter((q,h,H)=>H.indexOf(q)===h)},pS=(f)=>{if(!/[%+]/.test(f))return f;if(f.indexOf("+")!==-1)f=f.replace(/\+/g," ");return f.indexOf("%")!==-1?$0(f):f},d1=(f,w,S)=>{let v;if(!S&&w&&!/[%+]/.test(w)){let H=f.indexOf(`?${w}`,8);if(H===-1)H=f.indexOf(`&${w}`,8);while(H!==-1){let $=f.charCodeAt(H+w.length+1);if($===61){let j=H+w.length+2,b=f.indexOf("&",j);return pS(f.slice(j,b===-1?void 0:b))}else if($==38||isNaN($))return"";H=f.indexOf(`&${w}`,H+1)}if(v=/[%+]/.test(f),!v)return}let q={};v??=/[%+]/.test(f);let h=f.indexOf("?",8);while(h!==-1){let H=f.indexOf("&",h+1),$=f.indexOf("=",h);if($>H&&H!==-1)$=-1;let j=f.slice(h+1,$===-1?H===-1?void 0:H:$);if(v)j=pS(j);if(h=H,j==="")continue;let b;if($===-1)b="";else if(b=f.slice($+1,H===-1?void 0:H),v)b=pS(b);if(S){if(!(q[j]&&Array.isArray(q[j])))q[j]=[];q[j].push(b)}else q[j]??=b}return w?q[w]:q},s1=d1,Z1=(f,w)=>{return d1(f,w,!0)},$0=decodeURIComponent;var t1=(f)=>ZS(f,$0),o0=class{raw;#f;#w;routeIndex=0;path;bodyCache={};constructor(f,w="/",S=[[]]){this.raw=f,this.path=w,this.#w=S,this.#f={}}param(f){return f?this.#v(f):this.#h()}#v(f){let w=this.#w[0][this.routeIndex][1][f],S=this.#q(w);return S?/\%/.test(S)?t1(S):S:void 0}#h(){let f={},w=Object.keys(this.#w[0][this.routeIndex][1]);for(let S of w){let v=this.#q(this.#w[0][this.routeIndex][1][S]);if(v&&typeof v==="string")f[S]=/\%/.test(v)?t1(v):v}return f}#q(f){return this.#w[1]?this.#w[1][f]:f}query(f){return s1(this.url,f)}queries(f){return Z1(this.url,f)}header(f){if(f)return this.raw.headers.get(f)??void 0;let w={};return this.raw.headers.forEach((S,v)=>{w[v]=S}),w}async parseBody(f){return this.bodyCache.parsedBody??=await a1(this,f)}#S=(f)=>{let{bodyCache:w,raw:S}=this,v=w[f];if(v)return v;let q=Object.keys(w)[0];if(q)return w[q].then((h)=>{if(q==="json")h=JSON.stringify(h);return new Response(h)[f]()});return w[f]=S[f]()};json(){return this.#S("json")}text(){return this.#S("text")}arrayBuffer(){return this.#S("arrayBuffer")}blob(){return this.#S("blob")}formData(){return this.#S("formData")}addValidatedData(f,w){this.#f[f]=w}valid(f){return this.#f[f]}get url(){return this.raw.url}get method(){return this.raw.method}get matchedRoutes(){return this.#w[0].map(([[,f]])=>f)}get routePath(){return this.#w[0].map(([[,f]])=>f)[this.routeIndex].path}};var e1={Stringify:1,BeforeStream:2,Stream:3},w$=(f,w)=>{let S=new String(f);return S.isEscaped=!0,S.callbacks=w,S};var eS=async(f,w,S,v,q)=>{if(typeof f==="object"&&!(f instanceof String)){if(!(f instanceof Promise))f=f.toString();if(f instanceof Promise)f=await f}let h=f.callbacks;if(!h?.length)return Promise.resolve(f);if(q)q[0]+=f;else q=[f];let H=Promise.all(h.map(($)=>$({phase:w,buffer:q,context:v}))).then(($)=>Promise.all($.filter(Boolean).map((j)=>eS(j,w,!1,v,q))).then(()=>q[0]));if(S)return w$(await H,h);else return H};var S$="text/plain; charset=UTF-8",f2=(f,w={})=>{for(let S of Object.keys(w))f.set(S,w[S]);return f},s0=class{#f;#w;env={};#v;finalized=!1;error;#h=200;#q;#S;#H;#j;#b=!0;#g;#J;#O;#B;#W;constructor(f,w){if(this.#f=f,w)this.#q=w.executionCtx,this.env=w.env,this.#O=w.notFoundHandler,this.#W=w.path,this.#B=w.matchResult}get req(){return this.#w??=new o0(this.#f,this.#W,this.#B),this.#w}get event(){if(this.#q&&"respondWith"in this.#q)return this.#q;else throw Error("This context has no FetchEvent")}get executionCtx(){if(this.#q)return this.#q;else throw Error("This context has no ExecutionContext")}get res(){return this.#b=!1,this.#j||=new Response("404 Not Found",{status:404})}set res(f){if(this.#b=!1,this.#j&&f)try{for(let[w,S]of this.#j.headers.entries()){if(w==="content-type")continue;if(w==="set-cookie"){let v=this.#j.headers.getSetCookie();f.headers.delete("set-cookie");for(let q of v)f.headers.append("set-cookie",q)}else f.headers.set(w,S)}}catch(w){if(w instanceof TypeError&&w.message.includes("immutable")){this.res=new Response(f.body,{headers:f.headers,status:f.status});return}else throw w}this.#j=f,this.finalized=!0}render=(...f)=>{return this.#J??=(w)=>this.html(w),this.#J(...f)};setLayout=(f)=>this.#g=f;getLayout=()=>this.#g;setRenderer=(f)=>{this.#J=f};header=(f,w,S)=>{if(w===void 0){if(this.#S)this.#S.delete(f);else if(this.#H)delete this.#H[f.toLocaleLowerCase()];if(this.finalized)this.res.headers.delete(f);return}if(S?.append){if(!this.#S)this.#b=!1,this.#S=new Headers(this.#H),this.#H={};this.#S.append(f,w)}else if(this.#S)this.#S.set(f,w);else this.#H??={},this.#H[f.toLowerCase()]=w;if(this.finalized)if(S?.append)this.res.headers.append(f,w);else this.res.headers.set(f,w)};status=(f)=>{this.#b=!1,this.#h=f};set=(f,w)=>{this.#v??=new Map,this.#v.set(f,w)};get=(f)=>{return this.#v?this.#v.get(f):void 0};get var(){if(!this.#v)return{};return Object.fromEntries(this.#v)}#$(f,w,S){if(this.#b&&!S&&!w&&this.#h===200)return new Response(f,{headers:this.#H});if(w&&typeof w!=="number"){let q=new Headers(w.headers);if(this.#S)this.#S.forEach((H,$)=>{if($==="set-cookie")q.append($,H);else q.set($,H)});let h=f2(q,this.#H);return new Response(f,{headers:h,status:w.status??this.#h})}let v=typeof w==="number"?w:this.#h;if(this.#H??={},this.#S??=new Headers,f2(this.#S,this.#H),this.#j)this.#j.headers.forEach((q,h)=>{if(h==="set-cookie")this.#S?.append(h,q);else this.#S?.set(h,q)}),f2(this.#S,this.#H);S??={};for(let[q,h]of Object.entries(S))if(typeof h==="string")this.#S.set(q,h);else{this.#S.delete(q);for(let H of h)this.#S.append(q,H)}return new Response(f,{status:v,headers:this.#S})}newResponse=(...f)=>this.#$(...f);body=(f,w,S)=>{return typeof w==="number"?this.#$(f,w,S):this.#$(f,w)};text=(f,w,S)=>{if(!this.#H){if(this.#b&&!S&&!w)return new Response(f);this.#H={}}if(this.#H["content-type"]=S$,typeof w==="number")return this.#$(f,w,S);return this.#$(f,w)};json=(f,w,S)=>{let v=JSON.stringify(f);return this.#H??={},this.#H["content-type"]="application/json",typeof w==="number"?this.#$(v,w,S):this.#$(v,w)};html=(f,w,S)=>{if(this.#H??={},this.#H["content-type"]="text/html; charset=UTF-8",typeof f==="object")return eS(f,e1.Stringify,!1,{}).then((v)=>{return typeof w==="number"?this.#$(v,w,S):this.#$(v,w)});return typeof w==="number"?this.#$(f,w,S):this.#$(f,w)};redirect=(f,w)=>{return this.#S??=new Headers,this.#S.set("Location",String(f)),this.newResponse(null,w??302)};notFound=()=>{return this.#O??=()=>new Response,this.#O(this)}};var w2=(f,w,S)=>{return(v,q)=>{let h=-1,H=v instanceof s0;return $(0);async function $(j){if(j<=h)throw new Error("next() called multiple times");h=j;let b,J=!1,O;if(f[j]){if(O=f[j][0][0],H)v.req.routeIndex=j}else O=j===f.length&&q||void 0;if(!O){if(H&&v.finalized===!1&&S)b=await S(v)}else try{b=await O(v,()=>{return $(j+1)})}catch(g){if(g instanceof Error&&H&&w)v.error=g,b=await w(g,v),J=!0;else throw g}if(b&&(v.finalized===!1||J))v.res=b;return v}}};var qf="ALL",fv="all",wv=["get","post","put","delete","options","patch"],Z0="Can not add a route since the matcher is already built.",t0=class extends Error{};var S2="__COMPOSED_HANDLER";var v$=(f)=>{return f.text("404 Not Found",404)},Sv=(f,w)=>{if("getResponse"in f)return f.getResponse();return console.error(f),w.text("Internal Server Error",500)},v2=class{get;post;put;delete;options;patch;all;on;use;router;getPath;_basePath="/";#f="/";routes=[];constructor(f={}){[...wv,fv].forEach((v)=>{this[v]=(q,...h)=>{if(typeof q==="string")this.#f=q;else this.#h(v,this.#f,q);return h.forEach((H)=>{this.#h(v,this.#f,H)}),this}}),this.on=(v,q,...h)=>{for(let H of[q].flat()){this.#f=H;for(let $ of[v].flat())h.map((j)=>{this.#h($.toUpperCase(),this.#f,j)})}return this},this.use=(v,...q)=>{if(typeof v==="string")this.#f=v;else this.#f="*",q.unshift(v);return q.forEach((h)=>{this.#h(qf,this.#f,h)}),this};let S=f.strict??!0;delete f.strict,Object.assign(this,f),this.getPath=S?f.getPath??tS:p1}#w(){let f=new v2({router:this.router,getPath:this.getPath});return f.routes=this.routes,f}#v=v$;errorHandler=Sv;route(f,w){let S=this.basePath(f);return w.routes.map((v)=>{let q;if(w.errorHandler===Sv)q=v.handler;else q=async(h,H)=>(await w2([],w.errorHandler)(h,()=>v.handler(h,H))).res,q[S2]=v.handler;S.#h(v.method,v.path,q)}),this}basePath(f){let w=this.#w();return w._basePath=Pw(this._basePath,f),w}onError=(f)=>{return this.errorHandler=f,this};notFound=(f)=>{return this.#v=f,this};mount(f,w,S){let v,q;if(S)if(typeof S==="function")q=S;else q=S.optionHandler,v=S.replaceRequest;let h=q?($)=>{let j=q($);return Array.isArray(j)?j:[j]}:($)=>{let j=void 0;try{j=$.executionCtx}catch{}return[$.env,j]};v||=(()=>{let $=Pw(this._basePath,f),j=$==="/"?0:$.length;return(b)=>{let J=new URL(b.url);return J.pathname=J.pathname.slice(j)||"/",new Request(J,b)}})();let H=async($,j)=>{let b=await w(v($.req.raw),...h($));if(b)return b;await j()};return this.#h(qf,Pw(f,"*"),H),this}#h(f,w,S){f=f.toUpperCase(),w=Pw(this._basePath,w);let v={path:w,method:f,handler:S};this.router.add(f,w,[S,v]),this.routes.push(v)}#q(f,w){if(f instanceof Error)return this.errorHandler(f,w);throw f}#S(f,w,S,v){if(v==="HEAD")return(async()=>new Response(null,await this.#S(f,w,S,"GET")))();let q=this.getPath(f,{env:S}),h=this.router.match(v,q),H=new s0(f,{path:q,matchResult:h,env:S,executionCtx:w,notFoundHandler:this.#v});if(h[0].length===1){let j;try{j=h[0][0][0][0](H,async()=>{H.res=await this.#v(H)})}catch(b){return this.#q(b,H)}return j instanceof Promise?j.then((b)=>b||(H.finalized?H.res:this.#v(H))).catch((b)=>this.#q(b,H)):j??this.#v(H)}let $=w2(h[0],this.errorHandler,this.#v);return(async()=>{try{let j=await $(H);if(!j.finalized)throw new Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return j.res}catch(j){return this.#q(j,H)}})()}fetch=(f,...w)=>{return this.#S(f,w[1],w[0],f.method)};request=(f,w,S,v)=>{if(f instanceof Request)return this.fetch(w?new Request(f,w):f,S,v);return f=f.toString(),this.fetch(new Request(/^https?:\/\//.test(f)?f:`http://localhost${Pw("/",f)}`,w),S,v)};fire=()=>{addEventListener("fetch",(f)=>{f.respondWith(this.#S(f.request,f,void 0,f.request.method))})}};var e0="[^/]+",j0=".*",b0="(?:|/.*)",kw=Symbol(),q$=new Set(".\\+*[^]$()");function h$(f,w){if(f.length===1)return w.length===1?f<w?-1:1:-1;if(w.length===1)return 1;if(f===j0||f===b0)return 1;else if(w===j0||w===b0)return-1;if(f===e0)return 1;else if(w===e0)return-1;return f.length===w.length?f<w?-1:1:w.length-f.length}var fS=class{#f;#w;#v=Object.create(null);insert(f,w,S,v,q){if(f.length===0){if(this.#f!==void 0)throw kw;if(q)return;this.#f=w;return}let[h,...H]=f,$=h==="*"?H.length===0?["","",j0]:["","",e0]:h==="/*"?["","",b0]:h.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/),j;if($){let b=$[1],J=$[2]||e0;if(b&&$[2]){if(J=J.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(J))throw kw}if(j=this.#v[J],!j){if(Object.keys(this.#v).some((O)=>O!==j0&&O!==b0))throw kw;if(q)return;if(j=this.#v[J]=new fS,b!=="")j.#w=v.varIndex++}if(!q&&b!=="")S.push([b,j.#w])}else if(j=this.#v[h],!j){if(Object.keys(this.#v).some((b)=>b.length>1&&b!==j0&&b!==b0))throw kw;if(q)return;j=this.#v[h]=new fS}j.insert(H,w,S,v,q)}buildRegExpStr(){let w=Object.keys(this.#v).sort(h$).map((S)=>{let v=this.#v[S];return(typeof v.#w==="number"?`(${S})@${v.#w}`:q$.has(S)?`\\${S}`:S)+v.buildRegExpStr()});if(typeof this.#f==="number")w.unshift(`#${this.#f}`);if(w.length===0)return"";if(w.length===1)return w[0];return"(?:"+w.join("|")+")"}};var vv=class{#f={varIndex:0};#w=new fS;insert(f,w,S){let v=[],q=[];for(let H=0;;){let $=!1;if(f=f.replace(/\{[^}]+\}/g,(j)=>{let b=`@\\${H}`;return q[H]=[b,j],H++,$=!0,b}),!$)break}let h=f.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let H=q.length-1;H>=0;H--){let[$]=q[H];for(let j=h.length-1;j>=0;j--)if(h[j].indexOf($)!==-1){h[j]=h[j].replace($,q[H][1]);break}}return this.#w.insert(h,w,v,this.#f,S),v}buildRegExp(){let f=this.#w.buildRegExpStr();if(f==="")return[/^$/,[],[]];let w=0,S=[],v=[];return f=f.replace(/#(\d+)|@(\d+)|\.\*\$/g,(q,h,H)=>{if(h!==void 0)return S[++w]=Number(h),"$()";if(H!==void 0)return v[Number(H)]=++w,"";return""}),[new RegExp(`^${f}`),S,v]}};var qv=[],H$=[/^$/,[],Object.create(null)],hv=Object.create(null);function Hv(f){return hv[f]??=new RegExp(f==="*"?"":`^${f.replace(/\/\*$|([.\\+*[^\]$()])/g,(w,S)=>S?`\\${S}`:"(?:|/.*)")}$`)}function $$(){hv=Object.create(null)}function j$(f){let w=new vv,S=[];if(f.length===0)return H$;let v=f.map((b)=>[!/\*|\/:/.test(b[0]),...b]).sort(([b,J],[O,g])=>b?1:O?-1:J.length-g.length),q=Object.create(null);for(let b=0,J=-1,O=v.length;b<O;b++){let[g,B,R]=v[b];if(g)q[B]=[R.map(([U])=>[U,Object.create(null)]),qv];else J++;let c;try{c=w.insert(B,J,g)}catch(U){throw U===kw?new t0(B):U}if(g)continue;S[J]=R.map(([U,C])=>{let r=Object.create(null);C-=1;for(;C>=0;C--){let[N,s]=c[C];r[N]=s}return[U,r]})}let[h,H,$]=w.buildRegExp();for(let b=0,J=S.length;b<J;b++)for(let O=0,g=S[b].length;O<g;O++){let B=S[b][O]?.[1];if(!B)continue;let R=Object.keys(B);for(let c=0,U=R.length;c<U;c++)B[R[c]]=$[B[R[c]]]}let j=[];for(let b in H)j[b]=S[H[b]];return[h,j,q]}function lw(f,w){if(!f)return;for(let S of Object.keys(f).sort((v,q)=>q.length-v.length))if(Hv(S).test(w))return[...f[S]];return}var q2=class{name="RegExpRouter";#f;#w;constructor(){this.#f={[qf]:Object.create(null)},this.#w={[qf]:Object.create(null)}}add(f,w,S){let v=this.#f,q=this.#w;if(!v||!q)throw new Error(Z0);if(!v[f])[v,q].forEach(($)=>{$[f]=Object.create(null),Object.keys($[qf]).forEach((j)=>{$[f][j]=[...$[qf][j]]})});if(w==="/*")w="*";let h=(w.match(/\/:/g)||[]).length;if(/\*$/.test(w)){let $=Hv(w);if(f===qf)Object.keys(v).forEach((j)=>{v[j][w]||=lw(v[j],w)||lw(v[qf],w)||[]});else v[f][w]||=lw(v[f],w)||lw(v[qf],w)||[];Object.keys(v).forEach((j)=>{if(f===qf||f===j)Object.keys(v[j]).forEach((b)=>{$.test(b)&&v[j][b].push([S,h])})}),Object.keys(q).forEach((j)=>{if(f===qf||f===j)Object.keys(q[j]).forEach((b)=>$.test(b)&&q[j][b].push([S,h]))});return}let H=d0(w)||[w];for(let $=0,j=H.length;$<j;$++){let b=H[$];Object.keys(q).forEach((J)=>{if(f===qf||f===J)q[J][b]||=[...lw(v[J],b)||lw(v[qf],b)||[]],q[J][b].push([S,h-j+$+1])})}}match(f,w){$$();let S=this.#v();return this.match=(v,q)=>{let h=S[v]||S[qf],H=h[2][q];if(H)return H;let $=q.match(h[0]);if(!$)return[[],qv];let j=$.indexOf("",1);return[h[1][j],$]},this.match(f,w)}#v(){let f=Object.create(null);return Object.keys(this.#w).concat(Object.keys(this.#f)).forEach((w)=>{f[w]||=this.#h(w)}),this.#f=this.#w=void 0,f}#h(f){let w=[],S=f===qf;if([this.#f,this.#w].forEach((v)=>{let q=v[f]?Object.keys(v[f]).map((h)=>[h,v[f][h]]):[];if(q.length!==0)S||=!0,w.push(...q);else if(f!==qf)w.push(...Object.keys(v[qf]).map((h)=>[h,v[qf][h]]))}),!S)return null;else return j$(w)}};var h2=class{name="SmartRouter";#f=[];#w=[];constructor(f){this.#f=f.routers}add(f,w,S){if(!this.#w)throw new Error(Z0);this.#w.push([f,w,S])}match(f,w){if(!this.#w)throw new Error("Fatal error");let S=this.#f,v=this.#w,q=S.length,h=0,H;for(;h<q;h++){let $=S[h];try{for(let j=0,b=v.length;j<b;j++)$.add(...v[j]);H=$.match(f,w)}catch(j){if(j instanceof t0)continue;throw j}this.match=$.match.bind($),this.#f=[$],this.#w=void 0;break}if(h===q)throw new Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,H}get activeRouter(){if(this.#w||this.#f.length!==1)throw new Error("No active router has been determined yet.");return this.#f[0]}};var J0=Object.create(null),H2=class{#f;#w;#v;#h=0;#q=J0;constructor(f,w,S){if(this.#w=S||Object.create(null),this.#f=[],f&&w){let v=Object.create(null);v[f]={handler:w,possibleKeys:[],score:0},this.#f=[v]}this.#v=[]}insert(f,w,S){this.#h=++this.#h;let v=this,q=o1(w),h=[];for(let j=0,b=q.length;j<b;j++){let J=q[j],O=q[j+1],g=sS(J,O),B=Array.isArray(g)?g[0]:J;if(Object.keys(v.#w).includes(B)){v=v.#w[B];let R=sS(J,O);if(R)h.push(R[1]);continue}if(v.#w[B]=new H2,g)v.#v.push(g),h.push(g[1]);v=v.#w[B]}let H=Object.create(null),$={handler:S,possibleKeys:h.filter((j,b,J)=>J.indexOf(j)===b),score:this.#h};return H[f]=$,v.#f.push(H),v}#S(f,w,S,v){let q=[];for(let h=0,H=f.#f.length;h<H;h++){let $=f.#f[h],j=$[w]||$[qf],b={};if(j!==void 0){if(j.params=Object.create(null),q.push(j),S!==J0||v&&v!==J0)for(let J=0,O=j.possibleKeys.length;J<O;J++){let g=j.possibleKeys[J],B=b[j.score];j.params[g]=v?.[g]&&!B?v[g]:S[g]??v?.[g],b[j.score]=!0}}}return q}search(f,w){let S=[];this.#q=J0;let q=[this],h=dS(w),H=[];for(let $=0,j=h.length;$<j;$++){let b=h[$],J=$===j-1,O=[];for(let g=0,B=q.length;g<B;g++){let R=q[g],c=R.#w[b];if(c)if(c.#q=R.#q,J){if(c.#w["*"])S.push(...this.#S(c.#w["*"],f,R.#q));S.push(...this.#S(c,f,R.#q))}else O.push(c);for(let U=0,C=R.#v.length;U<C;U++){let r=R.#v[U],N=R.#q===J0?{}:{...R.#q};if(r==="*"){let M=R.#w["*"];if(M)S.push(...this.#S(M,f,R.#q)),M.#q=N,O.push(M);continue}if(b==="")continue;let[s,gf,a]=r,y=R.#w[s],X=h.slice($).join("/");if(a instanceof RegExp){let M=a.exec(X);if(M){if(N[gf]=M[0],S.push(...this.#S(y,f,R.#q,N)),Object.keys(y.#w).length){y.#q=N;let x=M[0].match(/\//)?.length??0;(H[x]||=[]).push(y)}continue}}if(a===!0||a.test(b))if(N[gf]=b,J){if(S.push(...this.#S(y,f,N,R.#q)),y.#w["*"])S.push(...this.#S(y.#w["*"],f,N,R.#q))}else y.#q=N,O.push(y)}}q=O.concat(H.shift()??[])}if(S.length>1)S.sort(($,j)=>{return $.score-j.score});return[S.map(({handler:$,params:j})=>[$,j])]}};var $2=class{name="TrieRouter";#f;constructor(){this.#f=new H2}add(f,w,S){let v=d0(w);if(v){for(let q=0,h=v.length;q<h;q++)this.#f.insert(f,v[q],S);return}this.#f.insert(f,w,S)}match(f,w){return this.#f.search(f,w)}};var Hf=class extends v2{constructor(f={}){super(f);this.router=f.router??new h2({routers:[new q2,new $2]})}};function $v(){let{process:f,Deno:w}=globalThis;return!(typeof w?.noColor==="boolean"?w.noColor:f!==void 0?"NO_COLOR"in f?.env:!1)}var b$=(f)=>{let[w,S]=[",","."];return f.map((q)=>q.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+w)).join(S)},J$=(f)=>{let w=Date.now()-f;return b$([w<1000?w+"ms":Math.round(w/1000)+"s"])},O$=(f)=>{if($v())switch(f/100|0){case 5:return`\x1B[31m${f}\x1B[0m`;case 4:return`\x1B[33m${f}\x1B[0m`;case 3:return`\x1B[36m${f}\x1B[0m`;case 2:return`\x1B[32m${f}\x1B[0m`}return`${f}`};function jv(f,w,S,v,q=0,h){let H=w==="<--"?`${w} ${S} ${v}`:`${w} ${S} ${v} ${O$(q)} ${h}`;f(H)}var bv=(f=console.log)=>{return async function w(S,v){let{method:q,url:h}=S.req,H=h.slice(h.indexOf("/",8));jv(f,"<--",q,H);let $=Date.now();await v(),jv(f,"-->",q,H,S.res.status,J$($))}};var Jv=(f)=>{let S={...{origin:"*",allowMethods:["GET","HEAD","PUT","POST","DELETE","PATCH"],allowHeaders:[],exposeHeaders:[]},...f},v=((q)=>{if(typeof q==="string")if(q==="*")return()=>q;else return(h)=>q===h?h:null;else if(typeof q==="function")return q;else return(h)=>q.includes(h)?h:null})(S.origin);return async function q(h,H){function $(b,J){h.res.headers.set(b,J)}let j=v(h.req.header("origin")||"",h);if(j)$("Access-Control-Allow-Origin",j);if(S.origin!=="*"){let b=h.req.header("Vary");if(b)$("Vary",b);else $("Vary","Origin")}if(S.credentials)$("Access-Control-Allow-Credentials","true");if(S.exposeHeaders?.length)$("Access-Control-Expose-Headers",S.exposeHeaders.join(","));if(h.req.method==="OPTIONS"){if(S.maxAge!=null)$("Access-Control-Max-Age",S.maxAge.toString());if(S.allowMethods?.length)$("Access-Control-Allow-Methods",S.allowMethods.join(","));let b=S.allowHeaders;if(!b?.length){let J=h.req.header("Access-Control-Request-Headers");if(J)b=J.split(/\s*,\s*/)}if(b?.length)$("Access-Control-Allow-Headers",b.join(",")),h.res.headers.append("Vary","Access-Control-Request-Headers");return h.res.headers.delete("Content-Length"),h.res.headers.delete("Content-Type"),new Response(null,{headers:h.res.headers,status:204,statusText:"No Content"})}await H()}};var HH=i0(W1(),1),_=new HH.PrismaClient({omit:{user:{password:!0}}});var bf=class extends Error{res;status;constructor(f=500,w){super(w?.message,{cause:w?.cause});this.res=w?.res,this.status=f}getResponse(){if(this.res)return new Response(this.res.body,{status:this.status,headers:this.res.headers});return new Response(this.message,{status:this.status})}};async function $H(f){let w=await Bun.password.hash(f.password),S=f.username.toLowerCase();return await _.user.create({data:{...f,username:S,password:w}})}async function jH({username:f,password:w}){f=f.toLowerCase();let S=await _.user.findUniqueOrThrow({where:{username:f},omit:{password:!1}});if(!await Bun.password.verify(w,S.password))throw new bf(401,{message:"Invalid password"});return S}async function bH({id:f,newPassword:w}){let S=await Bun.password.hash(w);return await _.user.update({where:{id:f},data:{password:S}})}async function JH(f){return await _.user.findUniqueOrThrow({where:{id:f}})}async function OH(){return await _.user.findMany()}var gH={name:"HMAC",hash:"SHA-256"},M9=async(f)=>{let w=typeof f==="string"?new TextEncoder().encode(f):f;return await crypto.subtle.importKey("raw",w,gH,!1,["sign","verify"])};var D9=async(f,w,S)=>{try{let v=atob(f),q=new Uint8Array(v.length);for(let h=0,H=v.length;h<H;h++)q[h]=v.charCodeAt(h);return await crypto.subtle.verify(gH,S,q,new TextEncoder().encode(w))}catch{return!1}},U9=/^[\w!#$%&'*.^`|~+-]+$/,V9=/^[ !#-:<-[\]-~]*$/,kS=(f,w)=>{if(w&&f.indexOf(w)===-1)return{};let S=f.trim().split(";"),v={};for(let q of S){q=q.trim();let h=q.indexOf("=");if(h===-1)continue;let H=q.substring(0,h).trim();if(w&&w!==H||!U9.test(H))continue;let $=q.substring(h+1).trim();if($.startsWith('"')&&$.endsWith('"'))$=$.slice(1,-1);if(V9.test($)){if(v[H]=$0($),w)break}}return v},R1=async(f,w,S)=>{let v={},q=await M9(w);for(let[h,H]of Object.entries(kS(f,S))){let $=H.lastIndexOf(".");if($<1)continue;let j=H.substring(0,$),b=H.substring($+1);if(b.length!==44||!b.endsWith("="))continue;let J=await D9(b,j,q);v[h]=J?j:!1}return v},L9=(f,w,S={})=>{let v=`${f}=${w}`;if(f.startsWith("__Secure-")&&!S.secure)throw new Error("__Secure- Cookie must have Secure attributes");if(f.startsWith("__Host-")){if(!S.secure)throw new Error("__Host- Cookie must have Secure attributes");if(S.path!=="/")throw new Error('__Host- Cookie must have Path attributes with "/"');if(S.domain)throw new Error("__Host- Cookie must not have Domain attributes")}if(S&&typeof S.maxAge==="number"&&S.maxAge>=0){if(S.maxAge>34560000)throw new Error("Cookies Max-Age SHOULD NOT be greater than 400 days (34560000 seconds) in duration.");v+=`; Max-Age=${S.maxAge|0}`}if(S.domain&&S.prefix!=="host")v+=`; Domain=${S.domain}`;if(S.path)v+=`; Path=${S.path}`;if(S.expires){if(S.expires.getTime()-Date.now()>34560000000)throw new Error("Cookies Expires SHOULD NOT be greater than 400 days (34560000 seconds) in the future.");v+=`; Expires=${S.expires.toUTCString()}`}if(S.httpOnly)v+="; HttpOnly";if(S.secure)v+="; Secure";if(S.sameSite)v+=`; SameSite=${S.sameSite.charAt(0).toUpperCase()+S.sameSite.slice(1)}`;if(S.priority)v+=`; Priority=${S.priority}`;if(S.partitioned){if(!S.secure)throw new Error("Partitioned Cookie must have Secure attributes");v+="; Partitioned"}return v},lS=(f,w,S)=>{return w=encodeURIComponent(w),L9(f,w,S)};var Uw=(f,w,S)=>{let v=f.req.raw.headers.get("Cookie");if(typeof w==="string"){if(!v)return;let h=w;if(S==="secure")h="__Secure-"+w;else if(S==="host")h="__Host-"+w;return kS(v,h)[h]}if(!v)return{};return kS(v)},G1=async(f,w,S,v)=>{let q=f.req.raw.headers.get("Cookie");if(typeof S==="string"){if(!q)return;let H=S;if(v==="secure")H="__Secure-"+S;else if(v==="host")H="__Host-"+S;return(await R1(q,w,H))[H]}if(!q)return{};return await R1(q,w)},IS=(f,w,S,v)=>{let q;if(v?.prefix==="secure")q=lS("__Secure-"+w,S,{path:"/",...v,secure:!0});else if(v?.prefix==="host")q=lS("__Host-"+w,S,{...v,path:"/",secure:!0,domain:void 0});else q=lS(w,S,{path:"/",...v});f.header("Set-Cookie",q,{append:!0})};var BH=(f,w,S)=>{let v=Uw(f,w);return IS(f,w,"",{...S,maxAge:0}),v};var WH=(f,w)=>{return new Response(f,{headers:{"Content-Type":w}}).formData()};var N9=/^application\/([a-z-\.]+\+)?json(;\s*[a-zA-Z0-9\-]+\=([^;]+))*$/,K9=/^multipart\/form-data(;\s?boundary=[a-zA-Z0-9'"()+_,\-./:=?]+)?$/,F9=/^application\/x-www-form-urlencoded(;\s*[a-zA-Z0-9\-]+\=([^;]+))*$/,X1=(f,w)=>{return async(S,v)=>{let q={},h=S.req.header("Content-Type");switch(f){case"json":if(!h||!N9.test(h))break;try{q=await S.req.json()}catch{throw new bf(400,{message:"Malformed JSON in request body"})}break;case"form":{if(!h||!(K9.test(h)||F9.test(h)))break;let $;if(S.req.bodyCache.formData)$=await S.req.bodyCache.formData;else try{let b=await S.req.arrayBuffer();$=await WH(b,h),S.req.bodyCache.formData=$}catch(b){let J="Malformed FormData request.";throw J+=b instanceof Error?` ${b.message}`:` ${String(b)}`,new bf(400,{message:J})}let j={};$.forEach((b,J)=>{if(J.endsWith("[]"))(j[J]??=[]).push(b);else if(Array.isArray(j[J]))j[J].push(b);else if(J in j)j[J]=[j[J],b];else j[J]=b}),q=j;break}case"query":q=Object.fromEntries(Object.entries(S.req.queries()).map(([$,j])=>{return j.length===1?[$,j[0]]:[$,j]}));break;case"param":q=S.req.param();break;case"header":q=S.req.header();break;case"cookie":q=Uw(S);break}let H=await w(q,S);if(H instanceof Response)return H;S.req.addValidatedData(f,H),await v()}};var n;(function(f){f.assertEqual=(q)=>q;function w(q){}f.assertIs=w;function S(q){throw new Error}f.assertNever=S,f.arrayToEnum=(q)=>{let h={};for(let H of q)h[H]=H;return h},f.getValidEnumValues=(q)=>{let h=f.objectKeys(q).filter(($)=>typeof q[q[$]]!=="number"),H={};for(let $ of h)H[$]=q[$];return f.objectValues(H)},f.objectValues=(q)=>{return f.objectKeys(q).map(function(h){return q[h]})},f.objectKeys=typeof Object.keys==="function"?(q)=>Object.keys(q):(q)=>{let h=[];for(let H in q)if(Object.prototype.hasOwnProperty.call(q,H))h.push(H);return h},f.find=(q,h)=>{for(let H of q)if(h(H))return H;return},f.isInteger=typeof Number.isInteger==="function"?(q)=>Number.isInteger(q):(q)=>typeof q==="number"&&isFinite(q)&&Math.floor(q)===q;function v(q,h=" | "){return q.map((H)=>typeof H==="string"?`'${H}'`:H).join(h)}f.joinValues=v,f.jsonStringifyReplacer=(q,h)=>{if(typeof h==="bigint")return h.toString();return h}})(n||(n={}));var E1;(function(f){f.mergeShapes=(w,S)=>{return{...w,...S}}})(E1||(E1={}));var Q=n.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Sw=(f)=>{switch(typeof f){case"undefined":return Q.undefined;case"string":return Q.string;case"number":return isNaN(f)?Q.nan:Q.number;case"boolean":return Q.boolean;case"function":return Q.function;case"bigint":return Q.bigint;case"symbol":return Q.symbol;case"object":if(Array.isArray(f))return Q.array;if(f===null)return Q.null;if(f.then&&typeof f.then==="function"&&f.catch&&typeof f.catch==="function")return Q.promise;if(typeof Map!=="undefined"&&f instanceof Map)return Q.map;if(typeof Set!=="undefined"&&f instanceof Set)return Q.set;if(typeof Date!=="undefined"&&f instanceof Date)return Q.date;return Q.object;default:return Q.unknown}},G=n.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),C9=(f)=>{return JSON.stringify(f,null,2).replace(/"([^"]+)":/g,"$1:")};class Df extends Error{get errors(){return this.issues}constructor(f){super();this.issues=[],this.addIssue=(S)=>{this.issues=[...this.issues,S]},this.addIssues=(S=[])=>{this.issues=[...this.issues,...S]};let w=new.target.prototype;if(Object.setPrototypeOf)Object.setPrototypeOf(this,w);else this.__proto__=w;this.name="ZodError",this.issues=f}format(f){let w=f||function(q){return q.message},S={_errors:[]},v=(q)=>{for(let h of q.issues)if(h.code==="invalid_union")h.unionErrors.map(v);else if(h.code==="invalid_return_type")v(h.returnTypeError);else if(h.code==="invalid_arguments")v(h.argumentsError);else if(h.path.length===0)S._errors.push(w(h));else{let H=S,$=0;while($<h.path.length){let j=h.path[$];if($!==h.path.length-1)H[j]=H[j]||{_errors:[]};else H[j]=H[j]||{_errors:[]},H[j]._errors.push(w(h));H=H[j],$++}}};return v(this),S}static assert(f){if(!(f instanceof Df))throw new Error(`Not a ZodError: ${f}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,n.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(f=(w)=>w.message){let w={},S=[];for(let v of this.issues)if(v.path.length>0)w[v.path[0]]=w[v.path[0]]||[],w[v.path[0]].push(f(v));else S.push(f(v));return{formErrors:S,fieldErrors:w}}get formErrors(){return this.flatten()}}Df.create=(f)=>{return new Df(f)};var ow=(f,w)=>{let S;switch(f.code){case G.invalid_type:if(f.received===Q.undefined)S="Required";else S=`Expected ${f.expected}, received ${f.received}`;break;case G.invalid_literal:S=`Invalid literal value, expected ${JSON.stringify(f.expected,n.jsonStringifyReplacer)}`;break;case G.unrecognized_keys:S=`Unrecognized key(s) in object: ${n.joinValues(f.keys,", ")}`;break;case G.invalid_union:S="Invalid input";break;case G.invalid_union_discriminator:S=`Invalid discriminator value. Expected ${n.joinValues(f.options)}`;break;case G.invalid_enum_value:S=`Invalid enum value. Expected ${n.joinValues(f.options)}, received '${f.received}'`;break;case G.invalid_arguments:S="Invalid function arguments";break;case G.invalid_return_type:S="Invalid function return type";break;case G.invalid_date:S="Invalid date";break;case G.invalid_string:if(typeof f.validation==="object")if("includes"in f.validation){if(S=`Invalid input: must include "${f.validation.includes}"`,typeof f.validation.position==="number")S=`${S} at one or more positions greater than or equal to ${f.validation.position}`}else if("startsWith"in f.validation)S=`Invalid input: must start with "${f.validation.startsWith}"`;else if("endsWith"in f.validation)S=`Invalid input: must end with "${f.validation.endsWith}"`;else n.assertNever(f.validation);else if(f.validation!=="regex")S=`Invalid ${f.validation}`;else S="Invalid";break;case G.too_small:if(f.type==="array")S=`Array must contain ${f.exact?"exactly":f.inclusive?"at least":"more than"} ${f.minimum} element(s)`;else if(f.type==="string")S=`String must contain ${f.exact?"exactly":f.inclusive?"at least":"over"} ${f.minimum} character(s)`;else if(f.type==="number")S=`Number must be ${f.exact?"exactly equal to ":f.inclusive?"greater than or equal to ":"greater than "}${f.minimum}`;else if(f.type==="date")S=`Date must be ${f.exact?"exactly equal to ":f.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(f.minimum))}`;else S="Invalid input";break;case G.too_big:if(f.type==="array")S=`Array must contain ${f.exact?"exactly":f.inclusive?"at most":"less than"} ${f.maximum} element(s)`;else if(f.type==="string")S=`String must contain ${f.exact?"exactly":f.inclusive?"at most":"under"} ${f.maximum} character(s)`;else if(f.type==="number")S=`Number must be ${f.exact?"exactly":f.inclusive?"less than or equal to":"less than"} ${f.maximum}`;else if(f.type==="bigint")S=`BigInt must be ${f.exact?"exactly":f.inclusive?"less than or equal to":"less than"} ${f.maximum}`;else if(f.type==="date")S=`Date must be ${f.exact?"exactly":f.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(f.maximum))}`;else S="Invalid input";break;case G.custom:S="Invalid input";break;case G.invalid_intersection_types:S="Intersection results could not be merged";break;case G.not_multiple_of:S=`Number must be a multiple of ${f.multipleOf}`;break;case G.not_finite:S="Number must be finite";break;default:S=w.defaultError,n.assertNever(f)}return{message:S}},cH=ow;function P9(f){cH=f}function rS(){return cH}var xS=(f)=>{let{data:w,path:S,errorMaps:v,issueData:q}=f,h=[...S,...q.path||[]],H={...q,path:h};if(q.message!==void 0)return{...q,path:h,message:q.message};let $="",j=v.filter((b)=>!!b).slice().reverse();for(let b of j)$=b(H,{data:w,defaultError:$}).message;return{...q,path:h,message:$}},k9=[];function E(f,w){let S=rS(),v=xS({issueData:w,data:f.data,path:f.path,errorMaps:[f.common.contextualErrorMap,f.schemaErrorMap,S,S===ow?void 0:ow].filter((q)=>!!q)});f.common.issues.push(v)}class Gf{constructor(){this.value="valid"}dirty(){if(this.value==="valid")this.value="dirty"}abort(){if(this.value!=="aborted")this.value="aborted"}static mergeArray(f,w){let S=[];for(let v of w){if(v.status==="aborted")return L;if(v.status==="dirty")f.dirty();S.push(v.value)}return{status:f.value,value:S}}static async mergeObjectAsync(f,w){let S=[];for(let v of w){let q=await v.key,h=await v.value;S.push({key:q,value:h})}return Gf.mergeObjectSync(f,S)}static mergeObjectSync(f,w){let S={};for(let v of w){let{key:q,value:h}=v;if(q.status==="aborted")return L;if(h.status==="aborted")return L;if(q.status==="dirty")f.dirty();if(h.status==="dirty")f.dirty();if(q.value!=="__proto__"&&(typeof h.value!=="undefined"||v.alwaysSet))S[q.value]=h.value}return{status:f.value,value:S}}}var L=Object.freeze({status:"aborted"}),iw=(f)=>({status:"dirty",value:f}),Qf=(f)=>({status:"valid",value:f}),Q1=(f)=>f.status==="aborted",Y1=(f)=>f.status==="dirty",Vw=(f)=>f.status==="valid",l0=(f)=>typeof Promise!=="undefined"&&f instanceof Promise;function yS(f,w,S,v){if(S==="a"&&!v)throw new TypeError("Private accessor was defined without a getter");if(typeof w==="function"?f!==w||!v:!w.has(f))throw new TypeError("Cannot read private member from an object whose class did not declare it");return S==="m"?v:S==="a"?v.call(f):v?v.value:w.get(f)}function EH(f,w,S,v,q){if(v==="m")throw new TypeError("Private method is not writable");if(v==="a"&&!q)throw new TypeError("Private accessor was defined without a setter");if(typeof w==="function"?f!==w||!q:!w.has(f))throw new TypeError("Cannot write private member to an object whose class did not declare it");return v==="a"?q.call(f,S):q?q.value=S:w.set(f,S),S}var Y;(function(f){f.errToObj=(w)=>typeof w==="string"?{message:w}:w||{},f.toString=(w)=>typeof w==="string"?w:w===null||w===void 0?void 0:w.message})(Y||(Y={}));var P0,k0;class If{constructor(f,w,S,v){this._cachedPath=[],this.parent=f,this.data=w,this._path=S,this._key=v}get path(){if(!this._cachedPath.length)if(this._key instanceof Array)this._cachedPath.push(...this._path,...this._key);else this._cachedPath.push(...this._path,this._key);return this._cachedPath}}var RH=(f,w)=>{if(Vw(w))return{success:!0,data:w.value};else{if(!f.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let S=new Df(f.common.issues);return this._error=S,this._error}}}};function k(f){if(!f)return{};let{errorMap:w,invalid_type_error:S,required_error:v,description:q}=f;if(w&&(S||v))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if(w)return{errorMap:w,description:q};return{errorMap:(H,$)=>{var j,b;let{message:J}=f;if(H.code==="invalid_enum_value")return{message:J!==null&&J!==void 0?J:$.defaultError};if(typeof $.data==="undefined")return{message:(j=J!==null&&J!==void 0?J:v)!==null&&j!==void 0?j:$.defaultError};if(H.code!=="invalid_type")return{message:$.defaultError};return{message:(b=J!==null&&J!==void 0?J:S)!==null&&b!==void 0?b:$.defaultError}},description:q}}class I{get description(){return this._def.description}_getType(f){return Sw(f.data)}_getOrReturnCtx(f,w){return w||{common:f.parent.common,data:f.data,parsedType:Sw(f.data),schemaErrorMap:this._def.errorMap,path:f.path,parent:f.parent}}_processInputParams(f){return{status:new Gf,ctx:{common:f.parent.common,data:f.data,parsedType:Sw(f.data),schemaErrorMap:this._def.errorMap,path:f.path,parent:f.parent}}}_parseSync(f){let w=this._parse(f);if(l0(w))throw new Error("Synchronous parse encountered promise.");return w}_parseAsync(f){let w=this._parse(f);return Promise.resolve(w)}parse(f,w){let S=this.safeParse(f,w);if(S.success)return S.data;throw S.error}safeParse(f,w){var S;let v={common:{issues:[],async:(S=w===null||w===void 0?void 0:w.async)!==null&&S!==void 0?S:!1,contextualErrorMap:w===null||w===void 0?void 0:w.errorMap},path:(w===null||w===void 0?void 0:w.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:f,parsedType:Sw(f)},q=this._parseSync({data:f,path:v.path,parent:v});return RH(v,q)}"~validate"(f){var w,S;let v={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:f,parsedType:Sw(f)};if(!this["~standard"].async)try{let q=this._parseSync({data:f,path:[],parent:v});return Vw(q)?{value:q.value}:{issues:v.common.issues}}catch(q){if((S=(w=q===null||q===void 0?void 0:q.message)===null||w===void 0?void 0:w.toLowerCase())===null||S===void 0?void 0:S.includes("encountered"))this["~standard"].async=!0;v.common={issues:[],async:!0}}return this._parseAsync({data:f,path:[],parent:v}).then((q)=>Vw(q)?{value:q.value}:{issues:v.common.issues})}async parseAsync(f,w){let S=await this.safeParseAsync(f,w);if(S.success)return S.data;throw S.error}async safeParseAsync(f,w){let S={common:{issues:[],contextualErrorMap:w===null||w===void 0?void 0:w.errorMap,async:!0},path:(w===null||w===void 0?void 0:w.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:f,parsedType:Sw(f)},v=this._parse({data:f,path:S.path,parent:S}),q=await(l0(v)?v:Promise.resolve(v));return RH(S,q)}refine(f,w){let S=(v)=>{if(typeof w==="string"||typeof w==="undefined")return{message:w};else if(typeof w==="function")return w(v);else return w};return this._refinement((v,q)=>{let h=f(v),H=()=>q.addIssue({code:G.custom,...S(v)});if(typeof Promise!=="undefined"&&h instanceof Promise)return h.then(($)=>{if(!$)return H(),!1;else return!0});if(!h)return H(),!1;else return!0})}refinement(f,w){return this._refinement((S,v)=>{if(!f(S))return v.addIssue(typeof w==="function"?w(S,v):w),!1;else return!0})}_refinement(f){return new Nf({schema:this,typeName:V.ZodEffects,effect:{type:"refinement",refinement:f}})}superRefine(f){return this._refinement(f)}constructor(f){this.spa=this.safeParseAsync,this._def=f,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:(w)=>this["~validate"](w)}}optional(){return lf.create(this,this._def)}nullable(){return vw.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return kf.create(this)}promise(){return Fw.create(this,this._def)}or(f){return Zw.create([this,f],this._def)}and(f){return tw.create(this,f,this._def)}transform(f){return new Nf({...k(this._def),schema:this,typeName:V.ZodEffects,effect:{type:"transform",transform:f}})}default(f){let w=typeof f==="function"?f:()=>f;return new S0({...k(this._def),innerType:this,defaultValue:w,typeName:V.ZodDefault})}brand(){return new TS({typeName:V.ZodBranded,type:this,...k(this._def)})}catch(f){let w=typeof f==="function"?f:()=>f;return new v0({...k(this._def),innerType:this,catchValue:w,typeName:V.ZodCatch})}describe(f){return new this.constructor({...this._def,description:f})}pipe(f){return T0.create(this,f)}readonly(){return q0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}var l9=/^c[^\s-]{8,}$/i,I9=/^[0-9a-z]+$/,r9=/^[0-9A-HJKMNP-TV-Z]{26}$/i,x9=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,y9=/^[a-z0-9_-]{21}$/i,m9=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,T9=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,u9=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,n9="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",c1,i9=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,a9=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,o9=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,p9=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,d9=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,s9=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,QH="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Z9=new RegExp(`^${QH}$`);function YH(f){let w="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";if(f.precision)w=`${w}\\.\\d{${f.precision}}`;else if(f.precision==null)w=`${w}(\\.\\d+)?`;return w}function t9(f){return new RegExp(`^${YH(f)}$`)}function AH(f){let w=`${QH}T${YH(f)}`,S=[];if(S.push(f.local?"Z?":"Z"),f.offset)S.push("([+-]\\d{2}:?\\d{2})");return w=`${w}(${S.join("|")})`,new RegExp(`^${w}$`)}function e9(f,w){if((w==="v4"||!w)&&i9.test(f))return!0;if((w==="v6"||!w)&&o9.test(f))return!0;return!1}function fO(f,w){if(!m9.test(f))return!1;try{let[S]=f.split("."),v=S.replace(/-/g,"+").replace(/_/g,"/").padEnd(S.length+(4-S.length%4)%4,"="),q=JSON.parse(atob(v));if(typeof q!=="object"||q===null)return!1;if(!q.typ||!q.alg)return!1;if(w&&q.alg!==w)return!1;return!0}catch(S){return!1}}function wO(f,w){if((w==="v4"||!w)&&a9.test(f))return!0;if((w==="v6"||!w)&&p9.test(f))return!0;return!1}class Pf extends I{_parse(f){if(this._def.coerce)f.data=String(f.data);if(this._getType(f)!==Q.string){let q=this._getOrReturnCtx(f);return E(q,{code:G.invalid_type,expected:Q.string,received:q.parsedType}),L}let S=new Gf,v=void 0;for(let q of this._def.checks)if(q.kind==="min"){if(f.data.length<q.value)v=this._getOrReturnCtx(f,v),E(v,{code:G.too_small,minimum:q.value,type:"string",inclusive:!0,exact:!1,message:q.message}),S.dirty()}else if(q.kind==="max"){if(f.data.length>q.value)v=this._getOrReturnCtx(f,v),E(v,{code:G.too_big,maximum:q.value,type:"string",inclusive:!0,exact:!1,message:q.message}),S.dirty()}else if(q.kind==="length"){let h=f.data.length>q.value,H=f.data.length<q.value;if(h||H){if(v=this._getOrReturnCtx(f,v),h)E(v,{code:G.too_big,maximum:q.value,type:"string",inclusive:!0,exact:!0,message:q.message});else if(H)E(v,{code:G.too_small,minimum:q.value,type:"string",inclusive:!0,exact:!0,message:q.message});S.dirty()}}else if(q.kind==="email"){if(!u9.test(f.data))v=this._getOrReturnCtx(f,v),E(v,{validation:"email",code:G.invalid_string,message:q.message}),S.dirty()}else if(q.kind==="emoji"){if(!c1)c1=new RegExp(n9,"u");if(!c1.test(f.data))v=this._getOrReturnCtx(f,v),E(v,{validation:"emoji",code:G.invalid_string,message:q.message}),S.dirty()}else if(q.kind==="uuid"){if(!x9.test(f.data))v=this._getOrReturnCtx(f,v),E(v,{validation:"uuid",code:G.invalid_string,message:q.message}),S.dirty()}else if(q.kind==="nanoid"){if(!y9.test(f.data))v=this._getOrReturnCtx(f,v),E(v,{validation:"nanoid",code:G.invalid_string,message:q.message}),S.dirty()}else if(q.kind==="cuid"){if(!l9.test(f.data))v=this._getOrReturnCtx(f,v),E(v,{validation:"cuid",code:G.invalid_string,message:q.message}),S.dirty()}else if(q.kind==="cuid2"){if(!I9.test(f.data))v=this._getOrReturnCtx(f,v),E(v,{validation:"cuid2",code:G.invalid_string,message:q.message}),S.dirty()}else if(q.kind==="ulid"){if(!r9.test(f.data))v=this._getOrReturnCtx(f,v),E(v,{validation:"ulid",code:G.invalid_string,message:q.message}),S.dirty()}else if(q.kind==="url")try{new URL(f.data)}catch(h){v=this._getOrReturnCtx(f,v),E(v,{validation:"url",code:G.invalid_string,message:q.message}),S.dirty()}else if(q.kind==="regex"){if(q.regex.lastIndex=0,!q.regex.test(f.data))v=this._getOrReturnCtx(f,v),E(v,{validation:"regex",code:G.invalid_string,message:q.message}),S.dirty()}else if(q.kind==="trim")f.data=f.data.trim();else if(q.kind==="includes"){if(!f.data.includes(q.value,q.position))v=this._getOrReturnCtx(f,v),E(v,{code:G.invalid_string,validation:{includes:q.value,position:q.position},message:q.message}),S.dirty()}else if(q.kind==="toLowerCase")f.data=f.data.toLowerCase();else if(q.kind==="toUpperCase")f.data=f.data.toUpperCase();else if(q.kind==="startsWith"){if(!f.data.startsWith(q.value))v=this._getOrReturnCtx(f,v),E(v,{code:G.invalid_string,validation:{startsWith:q.value},message:q.message}),S.dirty()}else if(q.kind==="endsWith"){if(!f.data.endsWith(q.value))v=this._getOrReturnCtx(f,v),E(v,{code:G.invalid_string,validation:{endsWith:q.value},message:q.message}),S.dirty()}else if(q.kind==="datetime"){if(!AH(q).test(f.data))v=this._getOrReturnCtx(f,v),E(v,{code:G.invalid_string,validation:"datetime",message:q.message}),S.dirty()}else if(q.kind==="date"){if(!Z9.test(f.data))v=this._getOrReturnCtx(f,v),E(v,{code:G.invalid_string,validation:"date",message:q.message}),S.dirty()}else if(q.kind==="time"){if(!t9(q).test(f.data))v=this._getOrReturnCtx(f,v),E(v,{code:G.invalid_string,validation:"time",message:q.message}),S.dirty()}else if(q.kind==="duration"){if(!T9.test(f.data))v=this._getOrReturnCtx(f,v),E(v,{validation:"duration",code:G.invalid_string,message:q.message}),S.dirty()}else if(q.kind==="ip"){if(!e9(f.data,q.version))v=this._getOrReturnCtx(f,v),E(v,{validation:"ip",code:G.invalid_string,message:q.message}),S.dirty()}else if(q.kind==="jwt"){if(!fO(f.data,q.alg))v=this._getOrReturnCtx(f,v),E(v,{validation:"jwt",code:G.invalid_string,message:q.message}),S.dirty()}else if(q.kind==="cidr"){if(!wO(f.data,q.version))v=this._getOrReturnCtx(f,v),E(v,{validation:"cidr",code:G.invalid_string,message:q.message}),S.dirty()}else if(q.kind==="base64"){if(!d9.test(f.data))v=this._getOrReturnCtx(f,v),E(v,{validation:"base64",code:G.invalid_string,message:q.message}),S.dirty()}else if(q.kind==="base64url"){if(!s9.test(f.data))v=this._getOrReturnCtx(f,v),E(v,{validation:"base64url",code:G.invalid_string,message:q.message}),S.dirty()}else n.assertNever(q);return{status:S.value,value:f.data}}_regex(f,w,S){return this.refinement((v)=>f.test(v),{validation:w,code:G.invalid_string,...Y.errToObj(S)})}_addCheck(f){return new Pf({...this._def,checks:[...this._def.checks,f]})}email(f){return this._addCheck({kind:"email",...Y.errToObj(f)})}url(f){return this._addCheck({kind:"url",...Y.errToObj(f)})}emoji(f){return this._addCheck({kind:"emoji",...Y.errToObj(f)})}uuid(f){return this._addCheck({kind:"uuid",...Y.errToObj(f)})}nanoid(f){return this._addCheck({kind:"nanoid",...Y.errToObj(f)})}cuid(f){return this._addCheck({kind:"cuid",...Y.errToObj(f)})}cuid2(f){return this._addCheck({kind:"cuid2",...Y.errToObj(f)})}ulid(f){return this._addCheck({kind:"ulid",...Y.errToObj(f)})}base64(f){return this._addCheck({kind:"base64",...Y.errToObj(f)})}base64url(f){return this._addCheck({kind:"base64url",...Y.errToObj(f)})}jwt(f){return this._addCheck({kind:"jwt",...Y.errToObj(f)})}ip(f){return this._addCheck({kind:"ip",...Y.errToObj(f)})}cidr(f){return this._addCheck({kind:"cidr",...Y.errToObj(f)})}datetime(f){var w,S;if(typeof f==="string")return this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:f});return this._addCheck({kind:"datetime",precision:typeof(f===null||f===void 0?void 0:f.precision)==="undefined"?null:f===null||f===void 0?void 0:f.precision,offset:(w=f===null||f===void 0?void 0:f.offset)!==null&&w!==void 0?w:!1,local:(S=f===null||f===void 0?void 0:f.local)!==null&&S!==void 0?S:!1,...Y.errToObj(f===null||f===void 0?void 0:f.message)})}date(f){return this._addCheck({kind:"date",message:f})}time(f){if(typeof f==="string")return this._addCheck({kind:"time",precision:null,message:f});return this._addCheck({kind:"time",precision:typeof(f===null||f===void 0?void 0:f.precision)==="undefined"?null:f===null||f===void 0?void 0:f.precision,...Y.errToObj(f===null||f===void 0?void 0:f.message)})}duration(f){return this._addCheck({kind:"duration",...Y.errToObj(f)})}regex(f,w){return this._addCheck({kind:"regex",regex:f,...Y.errToObj(w)})}includes(f,w){return this._addCheck({kind:"includes",value:f,position:w===null||w===void 0?void 0:w.position,...Y.errToObj(w===null||w===void 0?void 0:w.message)})}startsWith(f,w){return this._addCheck({kind:"startsWith",value:f,...Y.errToObj(w)})}endsWith(f,w){return this._addCheck({kind:"endsWith",value:f,...Y.errToObj(w)})}min(f,w){return this._addCheck({kind:"min",value:f,...Y.errToObj(w)})}max(f,w){return this._addCheck({kind:"max",value:f,...Y.errToObj(w)})}length(f,w){return this._addCheck({kind:"length",value:f,...Y.errToObj(w)})}nonempty(f){return this.min(1,Y.errToObj(f))}trim(){return new Pf({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Pf({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Pf({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((f)=>f.kind==="datetime")}get isDate(){return!!this._def.checks.find((f)=>f.kind==="date")}get isTime(){return!!this._def.checks.find((f)=>f.kind==="time")}get isDuration(){return!!this._def.checks.find((f)=>f.kind==="duration")}get isEmail(){return!!this._def.checks.find((f)=>f.kind==="email")}get isURL(){return!!this._def.checks.find((f)=>f.kind==="url")}get isEmoji(){return!!this._def.checks.find((f)=>f.kind==="emoji")}get isUUID(){return!!this._def.checks.find((f)=>f.kind==="uuid")}get isNANOID(){return!!this._def.checks.find((f)=>f.kind==="nanoid")}get isCUID(){return!!this._def.checks.find((f)=>f.kind==="cuid")}get isCUID2(){return!!this._def.checks.find((f)=>f.kind==="cuid2")}get isULID(){return!!this._def.checks.find((f)=>f.kind==="ulid")}get isIP(){return!!this._def.checks.find((f)=>f.kind==="ip")}get isCIDR(){return!!this._def.checks.find((f)=>f.kind==="cidr")}get isBase64(){return!!this._def.checks.find((f)=>f.kind==="base64")}get isBase64url(){return!!this._def.checks.find((f)=>f.kind==="base64url")}get minLength(){let f=null;for(let w of this._def.checks)if(w.kind==="min"){if(f===null||w.value>f)f=w.value}return f}get maxLength(){let f=null;for(let w of this._def.checks)if(w.kind==="max"){if(f===null||w.value<f)f=w.value}return f}}Pf.create=(f)=>{var w;return new Pf({checks:[],typeName:V.ZodString,coerce:(w=f===null||f===void 0?void 0:f.coerce)!==null&&w!==void 0?w:!1,...k(f)})};function SO(f,w){let S=(f.toString().split(".")[1]||"").length,v=(w.toString().split(".")[1]||"").length,q=S>v?S:v,h=parseInt(f.toFixed(q).replace(".","")),H=parseInt(w.toFixed(q).replace(".",""));return h%H/Math.pow(10,q)}class cw extends I{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(f){if(this._def.coerce)f.data=Number(f.data);if(this._getType(f)!==Q.number){let q=this._getOrReturnCtx(f);return E(q,{code:G.invalid_type,expected:Q.number,received:q.parsedType}),L}let S=void 0,v=new Gf;for(let q of this._def.checks)if(q.kind==="int"){if(!n.isInteger(f.data))S=this._getOrReturnCtx(f,S),E(S,{code:G.invalid_type,expected:"integer",received:"float",message:q.message}),v.dirty()}else if(q.kind==="min"){if(q.inclusive?f.data<q.value:f.data<=q.value)S=this._getOrReturnCtx(f,S),E(S,{code:G.too_small,minimum:q.value,type:"number",inclusive:q.inclusive,exact:!1,message:q.message}),v.dirty()}else if(q.kind==="max"){if(q.inclusive?f.data>q.value:f.data>=q.value)S=this._getOrReturnCtx(f,S),E(S,{code:G.too_big,maximum:q.value,type:"number",inclusive:q.inclusive,exact:!1,message:q.message}),v.dirty()}else if(q.kind==="multipleOf"){if(SO(f.data,q.value)!==0)S=this._getOrReturnCtx(f,S),E(S,{code:G.not_multiple_of,multipleOf:q.value,message:q.message}),v.dirty()}else if(q.kind==="finite"){if(!Number.isFinite(f.data))S=this._getOrReturnCtx(f,S),E(S,{code:G.not_finite,message:q.message}),v.dirty()}else n.assertNever(q);return{status:v.value,value:f.data}}gte(f,w){return this.setLimit("min",f,!0,Y.toString(w))}gt(f,w){return this.setLimit("min",f,!1,Y.toString(w))}lte(f,w){return this.setLimit("max",f,!0,Y.toString(w))}lt(f,w){return this.setLimit("max",f,!1,Y.toString(w))}setLimit(f,w,S,v){return new cw({...this._def,checks:[...this._def.checks,{kind:f,value:w,inclusive:S,message:Y.toString(v)}]})}_addCheck(f){return new cw({...this._def,checks:[...this._def.checks,f]})}int(f){return this._addCheck({kind:"int",message:Y.toString(f)})}positive(f){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Y.toString(f)})}negative(f){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Y.toString(f)})}nonpositive(f){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Y.toString(f)})}nonnegative(f){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Y.toString(f)})}multipleOf(f,w){return this._addCheck({kind:"multipleOf",value:f,message:Y.toString(w)})}finite(f){return this._addCheck({kind:"finite",message:Y.toString(f)})}safe(f){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Y.toString(f)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Y.toString(f)})}get minValue(){let f=null;for(let w of this._def.checks)if(w.kind==="min"){if(f===null||w.value>f)f=w.value}return f}get maxValue(){let f=null;for(let w of this._def.checks)if(w.kind==="max"){if(f===null||w.value<f)f=w.value}return f}get isInt(){return!!this._def.checks.find((f)=>f.kind==="int"||f.kind==="multipleOf"&&n.isInteger(f.value))}get isFinite(){let f=null,w=null;for(let S of this._def.checks)if(S.kind==="finite"||S.kind==="int"||S.kind==="multipleOf")return!0;else if(S.kind==="min"){if(w===null||S.value>w)w=S.value}else if(S.kind==="max"){if(f===null||S.value<f)f=S.value}return Number.isFinite(w)&&Number.isFinite(f)}}cw.create=(f)=>{return new cw({checks:[],typeName:V.ZodNumber,coerce:(f===null||f===void 0?void 0:f.coerce)||!1,...k(f)})};class Ew extends I{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte}_parse(f){if(this._def.coerce)try{f.data=BigInt(f.data)}catch(q){return this._getInvalidInput(f)}if(this._getType(f)!==Q.bigint)return this._getInvalidInput(f);let S=void 0,v=new Gf;for(let q of this._def.checks)if(q.kind==="min"){if(q.inclusive?f.data<q.value:f.data<=q.value)S=this._getOrReturnCtx(f,S),E(S,{code:G.too_small,type:"bigint",minimum:q.value,inclusive:q.inclusive,message:q.message}),v.dirty()}else if(q.kind==="max"){if(q.inclusive?f.data>q.value:f.data>=q.value)S=this._getOrReturnCtx(f,S),E(S,{code:G.too_big,type:"bigint",maximum:q.value,inclusive:q.inclusive,message:q.message}),v.dirty()}else if(q.kind==="multipleOf"){if(f.data%q.value!==BigInt(0))S=this._getOrReturnCtx(f,S),E(S,{code:G.not_multiple_of,multipleOf:q.value,message:q.message}),v.dirty()}else n.assertNever(q);return{status:v.value,value:f.data}}_getInvalidInput(f){let w=this._getOrReturnCtx(f);return E(w,{code:G.invalid_type,expected:Q.bigint,received:w.parsedType}),L}gte(f,w){return this.setLimit("min",f,!0,Y.toString(w))}gt(f,w){return this.setLimit("min",f,!1,Y.toString(w))}lte(f,w){return this.setLimit("max",f,!0,Y.toString(w))}lt(f,w){return this.setLimit("max",f,!1,Y.toString(w))}setLimit(f,w,S,v){return new Ew({...this._def,checks:[...this._def.checks,{kind:f,value:w,inclusive:S,message:Y.toString(v)}]})}_addCheck(f){return new Ew({...this._def,checks:[...this._def.checks,f]})}positive(f){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Y.toString(f)})}negative(f){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Y.toString(f)})}nonpositive(f){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Y.toString(f)})}nonnegative(f){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Y.toString(f)})}multipleOf(f,w){return this._addCheck({kind:"multipleOf",value:f,message:Y.toString(w)})}get minValue(){let f=null;for(let w of this._def.checks)if(w.kind==="min"){if(f===null||w.value>f)f=w.value}return f}get maxValue(){let f=null;for(let w of this._def.checks)if(w.kind==="max"){if(f===null||w.value<f)f=w.value}return f}}Ew.create=(f)=>{var w;return new Ew({checks:[],typeName:V.ZodBigInt,coerce:(w=f===null||f===void 0?void 0:f.coerce)!==null&&w!==void 0?w:!1,...k(f)})};class pw extends I{_parse(f){if(this._def.coerce)f.data=Boolean(f.data);if(this._getType(f)!==Q.boolean){let S=this._getOrReturnCtx(f);return E(S,{code:G.invalid_type,expected:Q.boolean,received:S.parsedType}),L}return Qf(f.data)}}pw.create=(f)=>{return new pw({typeName:V.ZodBoolean,coerce:(f===null||f===void 0?void 0:f.coerce)||!1,...k(f)})};class Lw extends I{_parse(f){if(this._def.coerce)f.data=new Date(f.data);if(this._getType(f)!==Q.date){let q=this._getOrReturnCtx(f);return E(q,{code:G.invalid_type,expected:Q.date,received:q.parsedType}),L}if(isNaN(f.data.getTime())){let q=this._getOrReturnCtx(f);return E(q,{code:G.invalid_date}),L}let S=new Gf,v=void 0;for(let q of this._def.checks)if(q.kind==="min"){if(f.data.getTime()<q.value)v=this._getOrReturnCtx(f,v),E(v,{code:G.too_small,message:q.message,inclusive:!0,exact:!1,minimum:q.value,type:"date"}),S.dirty()}else if(q.kind==="max"){if(f.data.getTime()>q.value)v=this._getOrReturnCtx(f,v),E(v,{code:G.too_big,message:q.message,inclusive:!0,exact:!1,maximum:q.value,type:"date"}),S.dirty()}else n.assertNever(q);return{status:S.value,value:new Date(f.data.getTime())}}_addCheck(f){return new Lw({...this._def,checks:[...this._def.checks,f]})}min(f,w){return this._addCheck({kind:"min",value:f.getTime(),message:Y.toString(w)})}max(f,w){return this._addCheck({kind:"max",value:f.getTime(),message:Y.toString(w)})}get minDate(){let f=null;for(let w of this._def.checks)if(w.kind==="min"){if(f===null||w.value>f)f=w.value}return f!=null?new Date(f):null}get maxDate(){let f=null;for(let w of this._def.checks)if(w.kind==="max"){if(f===null||w.value<f)f=w.value}return f!=null?new Date(f):null}}Lw.create=(f)=>{return new Lw({checks:[],coerce:(f===null||f===void 0?void 0:f.coerce)||!1,typeName:V.ZodDate,...k(f)})};class I0 extends I{_parse(f){if(this._getType(f)!==Q.symbol){let S=this._getOrReturnCtx(f);return E(S,{code:G.invalid_type,expected:Q.symbol,received:S.parsedType}),L}return Qf(f.data)}}I0.create=(f)=>{return new I0({typeName:V.ZodSymbol,...k(f)})};class dw extends I{_parse(f){if(this._getType(f)!==Q.undefined){let S=this._getOrReturnCtx(f);return E(S,{code:G.invalid_type,expected:Q.undefined,received:S.parsedType}),L}return Qf(f.data)}}dw.create=(f)=>{return new dw({typeName:V.ZodUndefined,...k(f)})};class sw extends I{_parse(f){if(this._getType(f)!==Q.null){let S=this._getOrReturnCtx(f);return E(S,{code:G.invalid_type,expected:Q.null,received:S.parsedType}),L}return Qf(f.data)}}sw.create=(f)=>{return new sw({typeName:V.ZodNull,...k(f)})};class Nw extends I{constructor(){super(...arguments);this._any=!0}_parse(f){return Qf(f.data)}}Nw.create=(f)=>{return new Nw({typeName:V.ZodAny,...k(f)})};class Xw extends I{constructor(){super(...arguments);this._unknown=!0}_parse(f){return Qf(f.data)}}Xw.create=(f)=>{return new Xw({typeName:V.ZodUnknown,...k(f)})};class df extends I{_parse(f){let w=this._getOrReturnCtx(f);return E(w,{code:G.invalid_type,expected:Q.never,received:w.parsedType}),L}}df.create=(f)=>{return new df({typeName:V.ZodNever,...k(f)})};class r0 extends I{_parse(f){if(this._getType(f)!==Q.undefined){let S=this._getOrReturnCtx(f);return E(S,{code:G.invalid_type,expected:Q.void,received:S.parsedType}),L}return Qf(f.data)}}r0.create=(f)=>{return new r0({typeName:V.ZodVoid,...k(f)})};class kf extends I{_parse(f){let{ctx:w,status:S}=this._processInputParams(f),v=this._def;if(w.parsedType!==Q.array)return E(w,{code:G.invalid_type,expected:Q.array,received:w.parsedType}),L;if(v.exactLength!==null){let h=w.data.length>v.exactLength.value,H=w.data.length<v.exactLength.value;if(h||H)E(w,{code:h?G.too_big:G.too_small,minimum:H?v.exactLength.value:void 0,maximum:h?v.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:v.exactLength.message}),S.dirty()}if(v.minLength!==null){if(w.data.length<v.minLength.value)E(w,{code:G.too_small,minimum:v.minLength.value,type:"array",inclusive:!0,exact:!1,message:v.minLength.message}),S.dirty()}if(v.maxLength!==null){if(w.data.length>v.maxLength.value)E(w,{code:G.too_big,maximum:v.maxLength.value,type:"array",inclusive:!0,exact:!1,message:v.maxLength.message}),S.dirty()}if(w.common.async)return Promise.all([...w.data].map((h,H)=>{return v.type._parseAsync(new If(w,h,w.path,H))})).then((h)=>{return Gf.mergeArray(S,h)});let q=[...w.data].map((h,H)=>{return v.type._parseSync(new If(w,h,w.path,H))});return Gf.mergeArray(S,q)}get element(){return this._def.type}min(f,w){return new kf({...this._def,minLength:{value:f,message:Y.toString(w)}})}max(f,w){return new kf({...this._def,maxLength:{value:f,message:Y.toString(w)}})}length(f,w){return new kf({...this._def,exactLength:{value:f,message:Y.toString(w)}})}nonempty(f){return this.min(1,f)}}kf.create=(f,w)=>{return new kf({type:f,minLength:null,maxLength:null,exactLength:null,typeName:V.ZodArray,...k(w)})};function nw(f){if(f instanceof wf){let w={};for(let S in f.shape){let v=f.shape[S];w[S]=lf.create(nw(v))}return new wf({...f._def,shape:()=>w})}else if(f instanceof kf)return new kf({...f._def,type:nw(f.element)});else if(f instanceof lf)return lf.create(nw(f.unwrap()));else if(f instanceof vw)return vw.create(nw(f.unwrap()));else if(f instanceof sf)return sf.create(f.items.map((w)=>nw(w)));else return f}class wf extends I{constructor(){super(...arguments);this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let f=this._def.shape(),w=n.objectKeys(f);return this._cached={shape:f,keys:w}}_parse(f){if(this._getType(f)!==Q.object){let j=this._getOrReturnCtx(f);return E(j,{code:G.invalid_type,expected:Q.object,received:j.parsedType}),L}let{status:S,ctx:v}=this._processInputParams(f),{shape:q,keys:h}=this._getCached(),H=[];if(!(this._def.catchall instanceof df&&this._def.unknownKeys==="strip")){for(let j in v.data)if(!h.includes(j))H.push(j)}let $=[];for(let j of h){let b=q[j],J=v.data[j];$.push({key:{status:"valid",value:j},value:b._parse(new If(v,J,v.path,j)),alwaysSet:j in v.data})}if(this._def.catchall instanceof df){let j=this._def.unknownKeys;if(j==="passthrough")for(let b of H)$.push({key:{status:"valid",value:b},value:{status:"valid",value:v.data[b]}});else if(j==="strict"){if(H.length>0)E(v,{code:G.unrecognized_keys,keys:H}),S.dirty()}else if(j==="strip");else throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let j=this._def.catchall;for(let b of H){let J=v.data[b];$.push({key:{status:"valid",value:b},value:j._parse(new If(v,J,v.path,b)),alwaysSet:b in v.data})}}if(v.common.async)return Promise.resolve().then(async()=>{let j=[];for(let b of $){let J=await b.key,O=await b.value;j.push({key:J,value:O,alwaysSet:b.alwaysSet})}return j}).then((j)=>{return Gf.mergeObjectSync(S,j)});else return Gf.mergeObjectSync(S,$)}get shape(){return this._def.shape()}strict(f){return Y.errToObj,new wf({...this._def,unknownKeys:"strict",...f!==void 0?{errorMap:(w,S)=>{var v,q,h,H;let $=(h=(q=(v=this._def).errorMap)===null||q===void 0?void 0:q.call(v,w,S).message)!==null&&h!==void 0?h:S.defaultError;if(w.code==="unrecognized_keys")return{message:(H=Y.errToObj(f).message)!==null&&H!==void 0?H:$};return{message:$}}}:{}})}strip(){return new wf({...this._def,unknownKeys:"strip"})}passthrough(){return new wf({...this._def,unknownKeys:"passthrough"})}extend(f){return new wf({...this._def,shape:()=>({...this._def.shape(),...f})})}merge(f){return new wf({unknownKeys:f._def.unknownKeys,catchall:f._def.catchall,shape:()=>({...this._def.shape(),...f._def.shape()}),typeName:V.ZodObject})}setKey(f,w){return this.augment({[f]:w})}catchall(f){return new wf({...this._def,catchall:f})}pick(f){let w={};return n.objectKeys(f).forEach((S)=>{if(f[S]&&this.shape[S])w[S]=this.shape[S]}),new wf({...this._def,shape:()=>w})}omit(f){let w={};return n.objectKeys(this.shape).forEach((S)=>{if(!f[S])w[S]=this.shape[S]}),new wf({...this._def,shape:()=>w})}deepPartial(){return nw(this)}partial(f){let w={};return n.objectKeys(this.shape).forEach((S)=>{let v=this.shape[S];if(f&&!f[S])w[S]=v;else w[S]=v.optional()}),new wf({...this._def,shape:()=>w})}required(f){let w={};return n.objectKeys(this.shape).forEach((S)=>{if(f&&!f[S])w[S]=this.shape[S];else{let q=this.shape[S];while(q instanceof lf)q=q._def.innerType;w[S]=q}}),new wf({...this._def,shape:()=>w})}keyof(){return zH(n.objectKeys(this.shape))}}wf.create=(f,w)=>{return new wf({shape:()=>f,unknownKeys:"strip",catchall:df.create(),typeName:V.ZodObject,...k(w)})};wf.strictCreate=(f,w)=>{return new wf({shape:()=>f,unknownKeys:"strict",catchall:df.create(),typeName:V.ZodObject,...k(w)})};wf.lazycreate=(f,w)=>{return new wf({shape:f,unknownKeys:"strip",catchall:df.create(),typeName:V.ZodObject,...k(w)})};class Zw extends I{_parse(f){let{ctx:w}=this._processInputParams(f),S=this._def.options;function v(q){for(let H of q)if(H.result.status==="valid")return H.result;for(let H of q)if(H.result.status==="dirty")return w.common.issues.push(...H.ctx.common.issues),H.result;let h=q.map((H)=>new Df(H.ctx.common.issues));return E(w,{code:G.invalid_union,unionErrors:h}),L}if(w.common.async)return Promise.all(S.map(async(q)=>{let h={...w,common:{...w.common,issues:[]},parent:null};return{result:await q._parseAsync({data:w.data,path:w.path,parent:h}),ctx:h}})).then(v);else{let q=void 0,h=[];for(let $ of S){let j={...w,common:{...w.common,issues:[]},parent:null},b=$._parseSync({data:w.data,path:w.path,parent:j});if(b.status==="valid")return b;else if(b.status==="dirty"&&!q)q={result:b,ctx:j};if(j.common.issues.length)h.push(j.common.issues)}if(q)return w.common.issues.push(...q.ctx.common.issues),q.result;let H=h.map(($)=>new Df($));return E(w,{code:G.invalid_union,unionErrors:H}),L}}get options(){return this._def.options}}Zw.create=(f,w)=>{return new Zw({options:f,typeName:V.ZodUnion,...k(w)})};var ww=(f)=>{if(f instanceof ew)return ww(f.schema);else if(f instanceof Nf)return ww(f.innerType());else if(f instanceof f0)return[f.value];else if(f instanceof Qw)return f.options;else if(f instanceof w0)return n.objectValues(f.enum);else if(f instanceof S0)return ww(f._def.innerType);else if(f instanceof dw)return[void 0];else if(f instanceof sw)return[null];else if(f instanceof lf)return[void 0,...ww(f.unwrap())];else if(f instanceof vw)return[null,...ww(f.unwrap())];else if(f instanceof TS)return ww(f.unwrap());else if(f instanceof q0)return ww(f.unwrap());else if(f instanceof v0)return ww(f._def.innerType);else return[]};class mS extends I{_parse(f){let{ctx:w}=this._processInputParams(f);if(w.parsedType!==Q.object)return E(w,{code:G.invalid_type,expected:Q.object,received:w.parsedType}),L;let S=this.discriminator,v=w.data[S],q=this.optionsMap.get(v);if(!q)return E(w,{code:G.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[S]}),L;if(w.common.async)return q._parseAsync({data:w.data,path:w.path,parent:w});else return q._parseSync({data:w.data,path:w.path,parent:w})}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(f,w,S){let v=new Map;for(let q of w){let h=ww(q.shape[f]);if(!h.length)throw new Error(`A discriminator value for key \`${f}\` could not be extracted from all schema options`);for(let H of h){if(v.has(H))throw new Error(`Discriminator property ${String(f)} has duplicate value ${String(H)}`);v.set(H,q)}}return new mS({typeName:V.ZodDiscriminatedUnion,discriminator:f,options:w,optionsMap:v,...k(S)})}}function A1(f,w){let S=Sw(f),v=Sw(w);if(f===w)return{valid:!0,data:f};else if(S===Q.object&&v===Q.object){let q=n.objectKeys(w),h=n.objectKeys(f).filter(($)=>q.indexOf($)!==-1),H={...f,...w};for(let $ of h){let j=A1(f[$],w[$]);if(!j.valid)return{valid:!1};H[$]=j.data}return{valid:!0,data:H}}else if(S===Q.array&&v===Q.array){if(f.length!==w.length)return{valid:!1};let q=[];for(let h=0;h<f.length;h++){let H=f[h],$=w[h],j=A1(H,$);if(!j.valid)return{valid:!1};q.push(j.data)}return{valid:!0,data:q}}else if(S===Q.date&&v===Q.date&&+f===+w)return{valid:!0,data:f};else return{valid:!1}}class tw extends I{_parse(f){let{status:w,ctx:S}=this._processInputParams(f),v=(q,h)=>{if(Q1(q)||Q1(h))return L;let H=A1(q.value,h.value);if(!H.valid)return E(S,{code:G.invalid_intersection_types}),L;if(Y1(q)||Y1(h))w.dirty();return{status:w.value,value:H.data}};if(S.common.async)return Promise.all([this._def.left._parseAsync({data:S.data,path:S.path,parent:S}),this._def.right._parseAsync({data:S.data,path:S.path,parent:S})]).then(([q,h])=>v(q,h));else return v(this._def.left._parseSync({data:S.data,path:S.path,parent:S}),this._def.right._parseSync({data:S.data,path:S.path,parent:S}))}}tw.create=(f,w,S)=>{return new tw({left:f,right:w,typeName:V.ZodIntersection,...k(S)})};class sf extends I{_parse(f){let{status:w,ctx:S}=this._processInputParams(f);if(S.parsedType!==Q.array)return E(S,{code:G.invalid_type,expected:Q.array,received:S.parsedType}),L;if(S.data.length<this._def.items.length)return E(S,{code:G.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),L;if(!this._def.rest&&S.data.length>this._def.items.length)E(S,{code:G.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),w.dirty();let q=[...S.data].map((h,H)=>{let $=this._def.items[H]||this._def.rest;if(!$)return null;return $._parse(new If(S,h,S.path,H))}).filter((h)=>!!h);if(S.common.async)return Promise.all(q).then((h)=>{return Gf.mergeArray(w,h)});else return Gf.mergeArray(w,q)}get items(){return this._def.items}rest(f){return new sf({...this._def,rest:f})}}sf.create=(f,w)=>{if(!Array.isArray(f))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new sf({items:f,typeName:V.ZodTuple,rest:null,...k(w)})};class x0 extends I{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(f){let{status:w,ctx:S}=this._processInputParams(f);if(S.parsedType!==Q.object)return E(S,{code:G.invalid_type,expected:Q.object,received:S.parsedType}),L;let v=[],q=this._def.keyType,h=this._def.valueType;for(let H in S.data)v.push({key:q._parse(new If(S,H,S.path,H)),value:h._parse(new If(S,S.data[H],S.path,H)),alwaysSet:H in S.data});if(S.common.async)return Gf.mergeObjectAsync(w,v);else return Gf.mergeObjectSync(w,v)}get element(){return this._def.valueType}static create(f,w,S){if(w instanceof I)return new x0({keyType:f,valueType:w,typeName:V.ZodRecord,...k(S)});return new x0({keyType:Pf.create(),valueType:f,typeName:V.ZodRecord,...k(w)})}}class y0 extends I{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(f){let{status:w,ctx:S}=this._processInputParams(f);if(S.parsedType!==Q.map)return E(S,{code:G.invalid_type,expected:Q.map,received:S.parsedType}),L;let v=this._def.keyType,q=this._def.valueType,h=[...S.data.entries()].map(([H,$],j)=>{return{key:v._parse(new If(S,H,S.path,[j,"key"])),value:q._parse(new If(S,$,S.path,[j,"value"]))}});if(S.common.async){let H=new Map;return Promise.resolve().then(async()=>{for(let $ of h){let j=await $.key,b=await $.value;if(j.status==="aborted"||b.status==="aborted")return L;if(j.status==="dirty"||b.status==="dirty")w.dirty();H.set(j.value,b.value)}return{status:w.value,value:H}})}else{let H=new Map;for(let $ of h){let{key:j,value:b}=$;if(j.status==="aborted"||b.status==="aborted")return L;if(j.status==="dirty"||b.status==="dirty")w.dirty();H.set(j.value,b.value)}return{status:w.value,value:H}}}}y0.create=(f,w,S)=>{return new y0({valueType:w,keyType:f,typeName:V.ZodMap,...k(S)})};class Kw extends I{_parse(f){let{status:w,ctx:S}=this._processInputParams(f);if(S.parsedType!==Q.set)return E(S,{code:G.invalid_type,expected:Q.set,received:S.parsedType}),L;let v=this._def;if(v.minSize!==null){if(S.data.size<v.minSize.value)E(S,{code:G.too_small,minimum:v.minSize.value,type:"set",inclusive:!0,exact:!1,message:v.minSize.message}),w.dirty()}if(v.maxSize!==null){if(S.data.size>v.maxSize.value)E(S,{code:G.too_big,maximum:v.maxSize.value,type:"set",inclusive:!0,exact:!1,message:v.maxSize.message}),w.dirty()}let q=this._def.valueType;function h($){let j=new Set;for(let b of $){if(b.status==="aborted")return L;if(b.status==="dirty")w.dirty();j.add(b.value)}return{status:w.value,value:j}}let H=[...S.data.values()].map(($,j)=>q._parse(new If(S,$,S.path,j)));if(S.common.async)return Promise.all(H).then(($)=>h($));else return h(H)}min(f,w){return new Kw({...this._def,minSize:{value:f,message:Y.toString(w)}})}max(f,w){return new Kw({...this._def,maxSize:{value:f,message:Y.toString(w)}})}size(f,w){return this.min(f,w).max(f,w)}nonempty(f){return this.min(1,f)}}Kw.create=(f,w)=>{return new Kw({valueType:f,minSize:null,maxSize:null,typeName:V.ZodSet,...k(w)})};class aw extends I{constructor(){super(...arguments);this.validate=this.implement}_parse(f){let{ctx:w}=this._processInputParams(f);if(w.parsedType!==Q.function)return E(w,{code:G.invalid_type,expected:Q.function,received:w.parsedType}),L;function S(H,$){return xS({data:H,path:w.path,errorMaps:[w.common.contextualErrorMap,w.schemaErrorMap,rS(),ow].filter((j)=>!!j),issueData:{code:G.invalid_arguments,argumentsError:$}})}function v(H,$){return xS({data:H,path:w.path,errorMaps:[w.common.contextualErrorMap,w.schemaErrorMap,rS(),ow].filter((j)=>!!j),issueData:{code:G.invalid_return_type,returnTypeError:$}})}let q={errorMap:w.common.contextualErrorMap},h=w.data;if(this._def.returns instanceof Fw){let H=this;return Qf(async function(...$){let j=new Df([]),b=await H._def.args.parseAsync($,q).catch((g)=>{throw j.addIssue(S($,g)),j}),J=await Reflect.apply(h,this,b);return await H._def.returns._def.type.parseAsync(J,q).catch((g)=>{throw j.addIssue(v(J,g)),j})})}else{let H=this;return Qf(function(...$){let j=H._def.args.safeParse($,q);if(!j.success)throw new Df([S($,j.error)]);let b=Reflect.apply(h,this,j.data),J=H._def.returns.safeParse(b,q);if(!J.success)throw new Df([v(b,J.error)]);return J.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...f){return new aw({...this._def,args:sf.create(f).rest(Xw.create())})}returns(f){return new aw({...this._def,returns:f})}implement(f){return this.parse(f)}strictImplement(f){return this.parse(f)}static create(f,w,S){return new aw({args:f?f:sf.create([]).rest(Xw.create()),returns:w||Xw.create(),typeName:V.ZodFunction,...k(S)})}}class ew extends I{get schema(){return this._def.getter()}_parse(f){let{ctx:w}=this._processInputParams(f);return this._def.getter()._parse({data:w.data,path:w.path,parent:w})}}ew.create=(f,w)=>{return new ew({getter:f,typeName:V.ZodLazy,...k(w)})};class f0 extends I{_parse(f){if(f.data!==this._def.value){let w=this._getOrReturnCtx(f);return E(w,{received:w.data,code:G.invalid_literal,expected:this._def.value}),L}return{status:"valid",value:f.data}}get value(){return this._def.value}}f0.create=(f,w)=>{return new f0({value:f,typeName:V.ZodLiteral,...k(w)})};function zH(f,w){return new Qw({values:f,typeName:V.ZodEnum,...k(w)})}class Qw extends I{constructor(){super(...arguments);P0.set(this,void 0)}_parse(f){if(typeof f.data!=="string"){let w=this._getOrReturnCtx(f),S=this._def.values;return E(w,{expected:n.joinValues(S),received:w.parsedType,code:G.invalid_type}),L}if(!yS(this,P0,"f"))EH(this,P0,new Set(this._def.values),"f");if(!yS(this,P0,"f").has(f.data)){let w=this._getOrReturnCtx(f),S=this._def.values;return E(w,{received:w.data,code:G.invalid_enum_value,options:S}),L}return Qf(f.data)}get options(){return this._def.values}get enum(){let f={};for(let w of this._def.values)f[w]=w;return f}get Values(){let f={};for(let w of this._def.values)f[w]=w;return f}get Enum(){let f={};for(let w of this._def.values)f[w]=w;return f}extract(f,w=this._def){return Qw.create(f,{...this._def,...w})}exclude(f,w=this._def){return Qw.create(this.options.filter((S)=>!f.includes(S)),{...this._def,...w})}}P0=new WeakMap;Qw.create=zH;class w0 extends I{constructor(){super(...arguments);k0.set(this,void 0)}_parse(f){let w=n.getValidEnumValues(this._def.values),S=this._getOrReturnCtx(f);if(S.parsedType!==Q.string&&S.parsedType!==Q.number){let v=n.objectValues(w);return E(S,{expected:n.joinValues(v),received:S.parsedType,code:G.invalid_type}),L}if(!yS(this,k0,"f"))EH(this,k0,new Set(n.getValidEnumValues(this._def.values)),"f");if(!yS(this,k0,"f").has(f.data)){let v=n.objectValues(w);return E(S,{received:S.data,code:G.invalid_enum_value,options:v}),L}return Qf(f.data)}get enum(){return this._def.values}}k0=new WeakMap;w0.create=(f,w)=>{return new w0({values:f,typeName:V.ZodNativeEnum,...k(w)})};class Fw extends I{unwrap(){return this._def.type}_parse(f){let{ctx:w}=this._processInputParams(f);if(w.parsedType!==Q.promise&&w.common.async===!1)return E(w,{code:G.invalid_type,expected:Q.promise,received:w.parsedType}),L;let S=w.parsedType===Q.promise?w.data:Promise.resolve(w.data);return Qf(S.then((v)=>{return this._def.type.parseAsync(v,{path:w.path,errorMap:w.common.contextualErrorMap})}))}}Fw.create=(f,w)=>{return new Fw({type:f,typeName:V.ZodPromise,...k(w)})};class Nf extends I{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===V.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(f){let{status:w,ctx:S}=this._processInputParams(f),v=this._def.effect||null,q={addIssue:(h)=>{if(E(S,h),h.fatal)w.abort();else w.dirty()},get path(){return S.path}};if(q.addIssue=q.addIssue.bind(q),v.type==="preprocess"){let h=v.transform(S.data,q);if(S.common.async)return Promise.resolve(h).then(async(H)=>{if(w.value==="aborted")return L;let $=await this._def.schema._parseAsync({data:H,path:S.path,parent:S});if($.status==="aborted")return L;if($.status==="dirty")return iw($.value);if(w.value==="dirty")return iw($.value);return $});else{if(w.value==="aborted")return L;let H=this._def.schema._parseSync({data:h,path:S.path,parent:S});if(H.status==="aborted")return L;if(H.status==="dirty")return iw(H.value);if(w.value==="dirty")return iw(H.value);return H}}if(v.type==="refinement"){let h=(H)=>{let $=v.refinement(H,q);if(S.common.async)return Promise.resolve($);if($ instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return H};if(S.common.async===!1){let H=this._def.schema._parseSync({data:S.data,path:S.path,parent:S});if(H.status==="aborted")return L;if(H.status==="dirty")w.dirty();return h(H.value),{status:w.value,value:H.value}}else return this._def.schema._parseAsync({data:S.data,path:S.path,parent:S}).then((H)=>{if(H.status==="aborted")return L;if(H.status==="dirty")w.dirty();return h(H.value).then(()=>{return{status:w.value,value:H.value}})})}if(v.type==="transform")if(S.common.async===!1){let h=this._def.schema._parseSync({data:S.data,path:S.path,parent:S});if(!Vw(h))return h;let H=v.transform(h.value,q);if(H instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:w.value,value:H}}else return this._def.schema._parseAsync({data:S.data,path:S.path,parent:S}).then((h)=>{if(!Vw(h))return h;return Promise.resolve(v.transform(h.value,q)).then((H)=>({status:w.value,value:H}))});n.assertNever(v)}}Nf.create=(f,w,S)=>{return new Nf({schema:f,typeName:V.ZodEffects,effect:w,...k(S)})};Nf.createWithPreprocess=(f,w,S)=>{return new Nf({schema:w,effect:{type:"preprocess",transform:f},typeName:V.ZodEffects,...k(S)})};class lf extends I{_parse(f){if(this._getType(f)===Q.undefined)return Qf(void 0);return this._def.innerType._parse(f)}unwrap(){return this._def.innerType}}lf.create=(f,w)=>{return new lf({innerType:f,typeName:V.ZodOptional,...k(w)})};class vw extends I{_parse(f){if(this._getType(f)===Q.null)return Qf(null);return this._def.innerType._parse(f)}unwrap(){return this._def.innerType}}vw.create=(f,w)=>{return new vw({innerType:f,typeName:V.ZodNullable,...k(w)})};class S0 extends I{_parse(f){let{ctx:w}=this._processInputParams(f),S=w.data;if(w.parsedType===Q.undefined)S=this._def.defaultValue();return this._def.innerType._parse({data:S,path:w.path,parent:w})}removeDefault(){return this._def.innerType}}S0.create=(f,w)=>{return new S0({innerType:f,typeName:V.ZodDefault,defaultValue:typeof w.default==="function"?w.default:()=>w.default,...k(w)})};class v0 extends I{_parse(f){let{ctx:w}=this._processInputParams(f),S={...w,common:{...w.common,issues:[]}},v=this._def.innerType._parse({data:S.data,path:S.path,parent:{...S}});if(l0(v))return v.then((q)=>{return{status:"valid",value:q.status==="valid"?q.value:this._def.catchValue({get error(){return new Df(S.common.issues)},input:S.data})}});else return{status:"valid",value:v.status==="valid"?v.value:this._def.catchValue({get error(){return new Df(S.common.issues)},input:S.data})}}removeCatch(){return this._def.innerType}}v0.create=(f,w)=>{return new v0({innerType:f,typeName:V.ZodCatch,catchValue:typeof w.catch==="function"?w.catch:()=>w.catch,...k(w)})};class m0 extends I{_parse(f){if(this._getType(f)!==Q.nan){let S=this._getOrReturnCtx(f);return E(S,{code:G.invalid_type,expected:Q.nan,received:S.parsedType}),L}return{status:"valid",value:f.data}}}m0.create=(f)=>{return new m0({typeName:V.ZodNaN,...k(f)})};var vO=Symbol("zod_brand");class TS extends I{_parse(f){let{ctx:w}=this._processInputParams(f),S=w.data;return this._def.type._parse({data:S,path:w.path,parent:w})}unwrap(){return this._def.type}}class T0 extends I{_parse(f){let{status:w,ctx:S}=this._processInputParams(f);if(S.common.async)return(async()=>{let q=await this._def.in._parseAsync({data:S.data,path:S.path,parent:S});if(q.status==="aborted")return L;if(q.status==="dirty")return w.dirty(),iw(q.value);else return this._def.out._parseAsync({data:q.value,path:S.path,parent:S})})();else{let v=this._def.in._parseSync({data:S.data,path:S.path,parent:S});if(v.status==="aborted")return L;if(v.status==="dirty")return w.dirty(),{status:"dirty",value:v.value};else return this._def.out._parseSync({data:v.value,path:S.path,parent:S})}}static create(f,w){return new T0({in:f,out:w,typeName:V.ZodPipeline})}}class q0 extends I{_parse(f){let w=this._def.innerType._parse(f),S=(v)=>{if(Vw(v))v.value=Object.freeze(v.value);return v};return l0(w)?w.then((v)=>S(v)):S(w)}unwrap(){return this._def.innerType}}q0.create=(f,w)=>{return new q0({innerType:f,typeName:V.ZodReadonly,...k(w)})};function GH(f,w){let S=typeof f==="function"?f(w):typeof f==="string"?{message:f}:f;return typeof S==="string"?{message:S}:S}function _H(f,w={},S){if(f)return Nw.create().superRefine((v,q)=>{var h,H;let $=f(v);if($ instanceof Promise)return $.then((j)=>{var b,J;if(!j){let O=GH(w,v),g=(J=(b=O.fatal)!==null&&b!==void 0?b:S)!==null&&J!==void 0?J:!0;q.addIssue({code:"custom",...O,fatal:g})}});if(!$){let j=GH(w,v),b=(H=(h=j.fatal)!==null&&h!==void 0?h:S)!==null&&H!==void 0?H:!0;q.addIssue({code:"custom",...j,fatal:b})}return});return Nw.create()}var qO={object:wf.lazycreate},V;(function(f){f.ZodString="ZodString",f.ZodNumber="ZodNumber",f.ZodNaN="ZodNaN",f.ZodBigInt="ZodBigInt",f.ZodBoolean="ZodBoolean",f.ZodDate="ZodDate",f.ZodSymbol="ZodSymbol",f.ZodUndefined="ZodUndefined",f.ZodNull="ZodNull",f.ZodAny="ZodAny",f.ZodUnknown="ZodUnknown",f.ZodNever="ZodNever",f.ZodVoid="ZodVoid",f.ZodArray="ZodArray",f.ZodObject="ZodObject",f.ZodUnion="ZodUnion",f.ZodDiscriminatedUnion="ZodDiscriminatedUnion",f.ZodIntersection="ZodIntersection",f.ZodTuple="ZodTuple",f.ZodRecord="ZodRecord",f.ZodMap="ZodMap",f.ZodSet="ZodSet",f.ZodFunction="ZodFunction",f.ZodLazy="ZodLazy",f.ZodLiteral="ZodLiteral",f.ZodEnum="ZodEnum",f.ZodEffects="ZodEffects",f.ZodNativeEnum="ZodNativeEnum",f.ZodOptional="ZodOptional",f.ZodNullable="ZodNullable",f.ZodDefault="ZodDefault",f.ZodCatch="ZodCatch",f.ZodPromise="ZodPromise",f.ZodBranded="ZodBranded",f.ZodPipeline="ZodPipeline",f.ZodReadonly="ZodReadonly"})(V||(V={}));var hO=(f,w={message:`Input not instance of ${f.name}`})=>_H((S)=>S instanceof f,w),MH=Pf.create,DH=cw.create,HO=m0.create,$O=Ew.create,UH=pw.create,jO=Lw.create,bO=I0.create,JO=dw.create,OO=sw.create,gO=Nw.create,BO=Xw.create,WO=df.create,RO=r0.create,GO=kf.create,XO=wf.create,cO=wf.strictCreate,EO=Zw.create,QO=mS.create,YO=tw.create,AO=sf.create,zO=x0.create,_O=y0.create,MO=Kw.create,DO=aw.create,UO=ew.create,VO=f0.create,LO=Qw.create,NO=w0.create,KO=Fw.create,XH=Nf.create,FO=lf.create,CO=vw.create,PO=Nf.createWithPreprocess,kO=T0.create,lO=()=>MH().optional(),IO=()=>DH().optional(),rO=()=>UH().optional(),xO={string:(f)=>Pf.create({...f,coerce:!0}),number:(f)=>cw.create({...f,coerce:!0}),boolean:(f)=>pw.create({...f,coerce:!0}),bigint:(f)=>Ew.create({...f,coerce:!0}),date:(f)=>Lw.create({...f,coerce:!0})},yO=L,A=Object.freeze({__proto__:null,defaultErrorMap:ow,setErrorMap:P9,getErrorMap:rS,makeIssue:xS,EMPTY_PATH:k9,addIssueToContext:E,ParseStatus:Gf,INVALID:L,DIRTY:iw,OK:Qf,isAborted:Q1,isDirty:Y1,isValid:Vw,isAsync:l0,get util(){return n},get objectUtil(){return E1},ZodParsedType:Q,getParsedType:Sw,ZodType:I,datetimeRegex:AH,ZodString:Pf,ZodNumber:cw,ZodBigInt:Ew,ZodBoolean:pw,ZodDate:Lw,ZodSymbol:I0,ZodUndefined:dw,ZodNull:sw,ZodAny:Nw,ZodUnknown:Xw,ZodNever:df,ZodVoid:r0,ZodArray:kf,ZodObject:wf,ZodUnion:Zw,ZodDiscriminatedUnion:mS,ZodIntersection:tw,ZodTuple:sf,ZodRecord:x0,ZodMap:y0,ZodSet:Kw,ZodFunction:aw,ZodLazy:ew,ZodLiteral:f0,ZodEnum:Qw,ZodNativeEnum:w0,ZodPromise:Fw,ZodEffects:Nf,ZodTransformer:Nf,ZodOptional:lf,ZodNullable:vw,ZodDefault:S0,ZodCatch:v0,ZodNaN:m0,BRAND:vO,ZodBranded:TS,ZodPipeline:T0,ZodReadonly:q0,custom:_H,Schema:I,ZodSchema:I,late:qO,get ZodFirstPartyTypeKind(){return V},coerce:xO,any:gO,array:GO,bigint:$O,boolean:UH,date:jO,discriminatedUnion:QO,effect:XH,enum:LO,function:DO,instanceof:hO,intersection:YO,lazy:UO,literal:VO,map:_O,nan:HO,nativeEnum:NO,never:WO,null:OO,nullable:CO,number:DH,object:XO,oboolean:rO,onumber:IO,optional:FO,ostring:lO,pipeline:kO,preprocess:PO,promise:KO,record:zO,set:MO,strictObject:cO,string:MH,symbol:bO,transformer:XH,tuple:AO,undefined:JO,union:EO,unknown:BO,void:RO,NEVER:yO,ZodIssueCode:G,quotelessJson:C9,ZodError:Df});var VH=(f,w,S)=>X1(f,async(v,q)=>{let h=v;if(f==="header"&&w instanceof wf){let $=Object.keys(w.shape),j=Object.fromEntries($.map((b)=>[b.toLowerCase(),b]));h=Object.fromEntries(Object.entries(v).map(([b,J])=>[j[b]||b,J]))}let H=await w.safeParseAsync(h);if(S){let $=await S({data:h,...H,target:f},q);if($){if($ instanceof Response)return $;if("response"in $)return $.response}}if(!H.success)return q.json(H,400);return H.data});var F=(f,w)=>VH(f,w,(S,v)=>{if(!S.success)throw new bf(400,{cause:S.error})});var z1=(f)=>{return M1(f.replace(/_|-/g,(w)=>({_:"/","-":"+"})[w]??w))},_1=(f)=>mO(f).replace(/\/|\+/g,(w)=>({"/":"_","+":"-"})[w]??w),mO=(f)=>{let w="",S=new Uint8Array(f);for(let v=0,q=S.length;v<q;v++)w+=String.fromCharCode(S[v]);return btoa(w)},M1=(f)=>{let w=atob(f),S=new Uint8Array(new ArrayBuffer(w.length)),v=w.length/2;for(let q=0,h=w.length-1;q<=v;q++,h--)S[q]=w.charCodeAt(q),S[h]=w.charCodeAt(h);return S};var D1=((f)=>{return f.HS256="HS256",f.HS384="HS384",f.HS512="HS512",f.RS256="RS256",f.RS384="RS384",f.RS512="RS512",f.PS256="PS256",f.PS384="PS384",f.PS512="PS512",f.ES256="ES256",f.ES384="ES384",f.ES512="ES512",f.EdDSA="EdDSA",f})(D1||{});var TO={deno:"Deno",bun:"Bun",workerd:"Cloudflare-Workers",node:"Node.js"},LH=()=>{let f=globalThis;if(typeof navigator!=="undefined"&&typeof navigator.userAgent==="string"){for(let[S,v]of Object.entries(TO))if(uO(v))return S}if(typeof f?.EdgeRuntime==="string")return"edge-light";if(f?.fastly!==void 0)return"fastly";if(f?.process?.release?.name==="node")return"node";return"other"},uO=(f)=>{return navigator.userAgent.startsWith(f)};var NH=class extends Error{constructor(f){super(`${f} is not an implemented algorithm`);this.name="JwtAlgorithmNotImplemented"}},u0=class extends Error{constructor(f){super(`invalid JWT token: ${f}`);this.name="JwtTokenInvalid"}},KH=class extends Error{constructor(f){super(`token (${f}) is being used before it's valid`);this.name="JwtTokenNotBefore"}},FH=class extends Error{constructor(f){super(`token (${f}) expired`);this.name="JwtTokenExpired"}},CH=class extends Error{constructor(f,w){super(`Incorrect "iat" claim must be a older than "${f}" (iat: "${w}")`);this.name="JwtTokenIssuedAt"}},U1=class extends Error{constructor(f){super(`jwt header is invalid: ${JSON.stringify(f)}`);this.name="JwtHeaderInvalid"}},PH=class extends Error{constructor(f){super(`required "kid" in jwt header: ${JSON.stringify(f)}`);this.name="JwtHeaderRequiresKid"}},kH=class extends Error{constructor(f){super(`token(${f}) signature mismatched`);this.name="JwtTokenSignatureMismatched"}},h0=((f)=>{return f.Encrypt="encrypt",f.Decrypt="decrypt",f.Sign="sign",f.Verify="verify",f.DeriveKey="deriveKey",f.DeriveBits="deriveBits",f.WrapKey="wrapKey",f.UnwrapKey="unwrapKey",f})(h0||{});var Yw=new TextEncoder,lH=new TextDecoder;async function rH(f,w,S){let v=yH(w),q=await nO(f,v);return await crypto.subtle.sign(v,q,S)}async function xH(f,w,S,v){let q=yH(w),h=await iO(f,q);return await crypto.subtle.verify(q,h,S,v)}function V1(f){return M1(f.replace(/-+(BEGIN|END).*/g,"").replace(/\s/g,""))}async function nO(f,w){if(!crypto.subtle||!crypto.subtle.importKey)throw new Error("`crypto.subtle.importKey` is undefined. JWT auth middleware requires it.");if(mH(f)){if(f.type!=="private"&&f.type!=="secret")throw new Error(`unexpected key type: CryptoKey.type is ${f.type}, expected private or secret`);return f}let S=[h0.Sign];if(typeof f==="object")return await crypto.subtle.importKey("jwk",f,w,!1,S);if(f.includes("PRIVATE"))return await crypto.subtle.importKey("pkcs8",V1(f),w,!1,S);return await crypto.subtle.importKey("raw",Yw.encode(f),w,!1,S)}async function iO(f,w){if(!crypto.subtle||!crypto.subtle.importKey)throw new Error("`crypto.subtle.importKey` is undefined. JWT auth middleware requires it.");if(mH(f)){if(f.type==="public"||f.type==="secret")return f;f=await IH(f)}if(typeof f==="string"&&f.includes("PRIVATE")){let v=await crypto.subtle.importKey("pkcs8",V1(f),w,!0,[h0.Sign]);f=await IH(v)}let S=[h0.Verify];if(typeof f==="object")return await crypto.subtle.importKey("jwk",f,w,!1,S);if(f.includes("PUBLIC"))return await crypto.subtle.importKey("spki",V1(f),w,!1,S);return await crypto.subtle.importKey("raw",Yw.encode(f),w,!1,S)}async function IH(f){if(f.type!=="private")throw new Error(`unexpected key type: ${f.type}`);if(!f.extractable)throw new Error("unexpected private key is unextractable");let w=await crypto.subtle.exportKey("jwk",f),{kty:S}=w,{alg:v,e:q,n:h}=w,{crv:H,x:$,y:j}=w;return{kty:S,alg:v,e:q,n:h,crv:H,x:$,y:j,key_ops:[h0.Verify]}}function yH(f){switch(f){case"HS256":return{name:"HMAC",hash:{name:"SHA-256"}};case"HS384":return{name:"HMAC",hash:{name:"SHA-384"}};case"HS512":return{name:"HMAC",hash:{name:"SHA-512"}};case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"RS384":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case"RS512":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case"PS256":return{name:"RSA-PSS",hash:{name:"SHA-256"},saltLength:32};case"PS384":return{name:"RSA-PSS",hash:{name:"SHA-384"},saltLength:48};case"PS512":return{name:"RSA-PSS",hash:{name:"SHA-512"},saltLength:64};case"ES256":return{name:"ECDSA",hash:{name:"SHA-256"},namedCurve:"P-256"};case"ES384":return{name:"ECDSA",hash:{name:"SHA-384"},namedCurve:"P-384"};case"ES512":return{name:"ECDSA",hash:{name:"SHA-512"},namedCurve:"P-521"};case"EdDSA":return{name:"Ed25519",namedCurve:"Ed25519"};default:throw new NH(f)}}function mH(f){if(LH()==="node"&&!!crypto.webcrypto)return f instanceof crypto.webcrypto.CryptoKey;return f instanceof CryptoKey}var L1=(f)=>_1(Yw.encode(JSON.stringify(f))).replace(/=/g,""),aO=(f)=>_1(f).replace(/=/g,""),N1=(f)=>JSON.parse(lH.decode(z1(f)));function TH(f){if(typeof f==="object"&&f!==null){let w=f;return"alg"in w&&Object.values(D1).includes(w.alg)&&(!("typ"in w)||w.typ==="JWT")}return!1}var uH=async(f,w,S="HS256")=>{let v=L1(f),q;if(typeof w==="object"&&"alg"in w)S=w.alg,q=L1({alg:S,typ:"JWT",kid:w.kid});else q=L1({alg:S,typ:"JWT"});let h=`${q}.${v}`,H=await rH(w,S,Yw.encode(h)),$=aO(H);return`${h}.${$}`},K1=async(f,w,S="HS256")=>{let v=f.split(".");if(v.length!==3)throw new u0(f);let{header:q,payload:h}=F1(f);if(!TH(q))throw new U1(q);let H=Date.now()/1000|0;if(h.nbf&&h.nbf>H)throw new KH(f);if(h.exp&&h.exp<=H)throw new FH(f);if(h.iat&&H<h.iat)throw new CH(H,h.iat);let $=f.substring(0,f.lastIndexOf("."));if(!await xH(w,S,z1(v[2]),Yw.encode($)))throw new kH(f);return h},nH=async(f,w,S)=>{let v=oO(f);if(!TH(v))throw new U1(v);if(!v.kid)throw new PH(v);let q=typeof w.keys==="function"?await w.keys():w.keys;if(w.jwks_uri){let H=await fetch(w.jwks_uri,S);if(!H.ok)throw new Error(`failed to fetch JWKS from ${w.jwks_uri}`);let $=await H.json();if(!$.keys)throw new Error('invalid JWKS response. "keys" field is missing');if(!Array.isArray($.keys))throw new Error('invalid JWKS response. "keys" field is not an array');if(q)q.push(...$.keys);else q=$.keys}else if(!q)throw new Error('verifyFromJwks requires options for either "keys" or "jwks_uri" or both');let h=q.find((H)=>H.kid===v.kid);if(!h)throw new u0(f);return await K1(f,h,h.alg)},F1=(f)=>{try{let[w,S]=f.split("."),v=N1(w),q=N1(S);return{header:v,payload:q}}catch{throw new u0(f)}},oO=(f)=>{try{let[w]=f.split(".");return N1(w)}catch{throw new u0(f)}};var n0={sign:uH,verify:K1,decode:F1,verifyFromJwks:nH};var P1=(f)=>{if(!f||!f.secret)throw new Error('JWT auth middleware requires options for "secret"');if(!crypto.subtle||!crypto.subtle.importKey)throw new Error("`crypto.subtle.importKey` is undefined. JWT auth middleware requires it.");return async function w(S,v){let q=S.req.raw.headers.get("Authorization"),h;if(q){let j=q.split(/\s+/);if(j.length!==2)throw new bf(401,{message:"invalid credentials structure",res:C1({ctx:S,error:"invalid_request",errDescription:"invalid credentials structure"})});else h=j[1]}else if(f.cookie)if(typeof f.cookie=="string")h=Uw(S,f.cookie);else if(f.cookie.secret)if(f.cookie.prefixOptions)h=await G1(S,f.cookie.secret,f.cookie.key,f.cookie.prefixOptions);else h=await G1(S,f.cookie.secret,f.cookie.key);else if(f.cookie.prefixOptions)h=Uw(S,f.cookie.key,f.cookie.prefixOptions);else h=Uw(S,f.cookie.key);if(!h)throw new bf(401,{message:"no authorization included in request",res:C1({ctx:S,error:"invalid_request",errDescription:"no authorization included in request"})});let H,$;try{H=await n0.verify(h,f.secret,f.alg)}catch(j){$=j}if(!H)throw new bf(401,{message:"Unauthorized",res:C1({ctx:S,error:"invalid_token",statusText:"Unauthorized",errDescription:"token verification failure"}),cause:$});S.set("jwtPayload",H),await v()}};function C1(f){return new Response("Unauthorized",{status:401,statusText:f.statusText,headers:{"WWW-Authenticate":`Bearer realm="${f.ctx.req.url}",error="${f.error}",error_description="${f.errDescription}"`}})}var pO=n0.verify,dO=n0.decode,uS=n0.sign;var _f=()=>P1({secret:Bun.env.JWT_SECRET,cookie:"token"}),Aw=(f)=>{return async(w,S)=>{if(w.get("jwtPayload").role!==f)throw new bf(403,{message:"Forbidden"});await S()}};var nS=()=>Math.floor(Date.now()/1000)+86400,iH=A.object({username:A.string(),password:A.string()}),aH=new Hf().post("/register",F("json",iH.extend({name:A.string()})),async(f)=>{let w=await f.req.valid("json"),S=await $H(w),v=await uS({sub:S.id,role:S.role,exp:nS()},Bun.env.JWT_SECRET);return IS(f,"token",v,{httpOnly:!0,secure:Bun.env.NODE_ENV==="production",sameSite:"Lax",expires:new Date(nS()*1000),maxAge:86400}),f.json(S)}).post("/login",F("json",iH),async(f)=>{let w=f.req.valid("json"),S=await jH(w),v=await uS({sub:S.id,role:S.role,exp:nS()},Bun.env.JWT_SECRET);return IS(f,"token",v,{httpOnly:!0,secure:Bun.env.NODE_ENV==="production",sameSite:"Lax",expires:new Date(nS()*1000),maxAge:86400}),f.json(S)}).post("/change-password",_f(),F("json",A.object({newPassword:A.string()})),async(f)=>{let{sub:w}=f.get("jwtPayload");if((await JH(w)).id!==w)throw new bf(403,{message:"Forbidden"});let{newPassword:q}=f.req.valid("json");return await bH({id:w,newPassword:q}),f.json({message:"Password changed"})}).get("/logout",_f(),(f)=>{return BH(f,"token"),f.json({message:"Logged out"})}).get("/",_f(),Aw("ADMIN"),async(f)=>{let w=await OH();return f.json(w)});async function oH(f){return await _.product.create({data:f,include:{category:!0}})}async function pH(f){return await _.product.findUniqueOrThrow({where:{id:f},include:{category:!0}})}async function dH(){return await _.product.findMany({include:{category:!0}})}async function sH(f,w){return await _.product.update({where:{id:f},data:w,include:{category:!0}})}async function ZH(f){return await _.product.delete({where:{id:f}})}var tH=A.object({name:A.string(),description:A.string().optional(),price:A.number(),categoryId:A.number()}),k1=A.object({id:A.string()}),eH=new Hf().get("/",async(f)=>{let w=await dH();return f.json(w)}).get("/:id",F("param",k1),async(f)=>{let{id:w}=f.req.valid("param"),S=await pH(w);return f.json(S)}).use(_f()).use(Aw("ADMIN")).post("/",F("json",tH),async(f)=>{let w=await f.req.valid("json"),S=await oH(w);return f.json(S)}).put("/:id",F("param",k1),F("json",tH.partial()),async(f)=>{let{id:w}=f.req.valid("param"),S=await f.req.valid("json"),v=await sH(w,S);return f.json(v)}).delete("/:id",F("param",k1),async(f)=>{let{id:w}=f.req.valid("param");return await ZH(w),f.json({message:"Product deleted"})});async function f4(f){return await _.category.create({data:f})}async function w4(f){return await _.category.findUniqueOrThrow({where:{id:f}})}async function S4(){return await _.category.findMany({orderBy:{id:"asc"}})}async function v4(f,w){return await _.category.update({where:{id:f},data:w})}async function q4(f){return await _.category.delete({where:{id:f}})}var h4=A.object({name:A.string(),description:A.string().optional()}),l1=A.object({id:A.string().regex(/^\d+$/).transform(Number)}),H4=new Hf().get("/",async(f)=>{let w=await S4();return f.json(w)}).get("/:id",F("param",l1),async(f)=>{let{id:w}=f.req.valid("param"),S=await w4(w);return f.json(S)}).use(_f()).use(Aw("ADMIN")).post("/",F("json",h4),async(f)=>{let w=f.req.valid("json"),S=await f4(w);return f.json(S)}).put("/:id",F("param",l1),F("json",h4.partial()),async(f)=>{let{id:w}=f.req.valid("param"),S=f.req.valid("json"),v=await v4(w,S);return f.json(v)}).delete("/:id",F("param",l1),async(f)=>{let{id:w}=f.req.valid("param");return await q4(w),f.json({message:"Category deleted"})});async function $4(f){return await _.provider.create({data:f})}async function j4(f){return await _.provider.findUniqueOrThrow({where:{id:f}})}async function b4(){return await _.provider.findMany()}async function J4(f,w){return await _.provider.update({where:{id:f},data:w})}async function O4(f){return await _.provider.delete({where:{id:f}})}var g4=A.object({name:A.string(),address:A.string().optional(),phone:A.string().optional(),email:A.string().optional()}),I1=A.object({id:A.string()}),B4=new Hf().get("/",async(f)=>{let w=await b4();return f.json(w)}).get("/:id",F("param",I1),async(f)=>{let{id:w}=f.req.valid("param"),S=await j4(w);return f.json(S)}).use(_f()).use(Aw("ADMIN")).post("/",F("json",g4),async(f)=>{let w=f.req.valid("json"),S=await $4(w);return f.json(S)}).put("/:id",F("param",I1),F("json",g4.partial()),async(f)=>{let{id:w}=f.req.valid("param"),S=f.req.valid("json"),v=await J4(w,S);return f.json(v)}).delete("/:id",F("param",I1),async(f)=>{let{id:w}=f.req.valid("param");return await O4(w),f.json({message:"Provider deleted"})});async function W4(f){return await _.sale.create({data:{userId:f},include:{user:!0,products:{include:{product:!0}}}})}async function R4(f){return await _.sale.findUniqueOrThrow({where:{id:f},include:{user:!0,products:{include:{product:!0}}}})}async function G4(f){let w=new Date(f),S=new Date(f).setDate(w.getDate()+1);return await _.sale.findMany({where:{date:{gte:new Date(w),lte:new Date(S)}},include:{user:!0,products:{include:{product:!0}}},orderBy:{date:"desc"}})}async function X4(f){let v=(await _.sale.findUniqueOrThrow({where:{id:f},include:{user:!0,products:{include:{product:!0}}}})).products.map((h)=>{let{productId:H,quantity:$}=h;return{productId:H,quantity:$}}).map((h)=>{return _.product.update({where:{id:h.productId},data:{stock:{increment:h.quantity}}})}),q=await _.$transaction([...v,_.sale.delete({where:{id:f}})]);return q[q.length-1]}async function c4(f,w){return await _.sale.update({where:{id:f},data:w,include:{user:!0,products:{include:{product:!0}}}})}var E4=i0(W1(),1);var sO=A.object({paymentMethod:A.nativeEnum(E4.$Enums.PAYMENT_METHOD)}),r1=A.object({id:A.string().regex(/^\d+$/).transform(Number)}),ZO=A.object({date:A.string().transform((f)=>{let w=new Date(f);if(isNaN(w.getTime()))throw new Error("Invalid date");return w})}),Q4=new Hf().use(_f()).get("/",F("query",ZO),async(f)=>{let{date:w}=f.req.valid("query"),S=await G4(w);return f.json(S)}).get("/:id",F("param",r1),async(f)=>{let{id:w}=f.req.valid("param"),S=await R4(w);return f.json(S)}).post("/",async(f)=>{let{sub:w}=f.get("jwtPayload"),S=await W4(w);return f.json(S)}).delete("/:id",F("param",r1),async(f)=>{let{id:w}=f.req.valid("param"),S=await X4(w);return f.json(S)}).put("/:id",F("param",r1),F("json",sO),async(f)=>{let{id:w}=f.req.valid("param"),S=f.req.valid("json"),v=await c4(w,S);return f.json(v)});async function Y4(f){return await _.supply.create({data:{providerId:f},include:{provider:!0,supplyProducts:{include:{product:!0}}}})}async function A4(f){return await _.supply.findUniqueOrThrow({where:{id:f},include:{provider:!0,supplyProducts:{include:{product:!0}}}})}async function z4(f){let w=new Date(f),S=new Date(f).setDate(w.getDate()+1);return await _.supply.findMany({where:{date:{gte:new Date(w),lte:new Date(S)}},include:{provider:!0,supplyProducts:{include:{product:!0}}},orderBy:{date:"desc"}})}async function _4(f){let v=(await _.supply.findUniqueOrThrow({where:{id:f},include:{provider:!0,supplyProducts:{include:{product:!0}}}})).supplyProducts.map((h)=>{let{productId:H,quantity:$}=h;return{productId:H,quantity:$}}).map((h)=>{return _.product.update({where:{id:h.productId},data:{stock:{decrement:h.quantity}}})}),q=await _.$transaction([...v,_.supply.delete({where:{id:f}})]);return q[q.length-1]}var tO=A.object({providerId:A.string()}),M4=A.object({id:A.string().regex(/^\d+$/).transform(Number)}),eO=A.object({date:A.string().transform((f)=>{let w=new Date(f);if(isNaN(w.getTime()))throw new Error("Invalid date");return w})}),D4=new Hf().get("/",F("query",eO),async(f)=>{let{date:w}=f.req.valid("query"),S=await z4(w);return f.json(S)}).get("/:id",F("param",M4),async(f)=>{let{id:w}=f.req.valid("param"),S=await A4(w);return f.json(S)}).post("/",F("json",tO),async(f)=>{let{providerId:w}=f.req.valid("json"),S=await Y4(w);return f.json(S)}).delete("/:id",F("param",M4),async(f)=>{let{id:w}=f.req.valid("param");return await _4(w),f.json({message:"Supply deleted"})});async function U4(f,w,S){let{price:v}=await _.product.findUniqueOrThrow({where:{id:w}});return await _.sale.update({where:{id:f},data:{products:{upsert:{where:{saleId_productId:{saleId:f,productId:w}},create:{quantity:S.quantity,price:v,productId:w},update:{quantity:{increment:S.quantity}}},update:{where:{saleId_productId:{saleId:f,productId:w}},data:{product:{update:{stock:{decrement:S.quantity}}}}}},total:{increment:S.quantity*v}},include:{user:!0,products:{include:{product:!0}}}})}async function V4(f,w){let S=await _.productOnSale.findUniqueOrThrow({where:{saleId_productId:{saleId:f,productId:w}}});return await _.sale.update({where:{id:f},data:{total:{decrement:S.quantity*S.price},products:{update:{where:{saleId_productId:{saleId:f,productId:w}},data:{product:{update:{stock:{increment:S.quantity}}}}},delete:{saleId_productId:{saleId:f,productId:w}}}},include:{user:!0,products:{include:{product:!0}}}})}async function L4(f,w,S){let v=await _.productOnSale.findUniqueOrThrow({where:{saleId_productId:{saleId:f,productId:w}}}),q=S.unitPrice*S.quantity-v.price*v.quantity,h=v.quantity-S.quantity;return await _.sale.update({where:{id:f},data:{total:{increment:q},products:{update:{where:{saleId_productId:{saleId:f,productId:w}},data:{quantity:S.quantity,price:S.unitPrice,product:{update:{stock:{increment:h}}}}}}},include:{user:!0,products:{include:{product:!0}}}})}var N4=A.object({quantity:A.number(),unitPrice:A.number()}),x1=A.object({saleId:A.string().regex(/^\d+$/).transform(Number),productId:A.string()}),K4=new Hf().post("/:productId",F("param",x1),F("json",N4.omit({unitPrice:!0})),async(f)=>{let{saleId:w,productId:S}=f.req.valid("param"),v=f.req.valid("json"),q=await U4(w,S,v);return f.json(q)}).delete("/:productId",F("param",x1),async(f)=>{let{saleId:w,productId:S}=f.req.valid("param"),v=await V4(w,S);return f.json(v)}).put("/:productId",F("param",x1),F("json",N4),async(f)=>{let{saleId:w,productId:S}=f.req.valid("param"),v=f.req.valid("json"),q=await L4(w,S,v);return f.json(q)});async function F4(f,w,S){return await _.supply.update({where:{id:f},data:{supplyProducts:{upsert:{where:{supplyId_productId:{supplyId:f,productId:w}},create:{quantity:S.quantity,price:S.unitPrice,productId:w},update:{quantity:{increment:S.quantity}}},update:{where:{supplyId_productId:{supplyId:f,productId:w}},data:{product:{update:{stock:{increment:S.quantity}}}}}},total:{increment:S.quantity*S.unitPrice}},include:{provider:!0,supplyProducts:{include:{product:!0}}}})}async function C4(f,w){let S=await _.productOnSupply.findUniqueOrThrow({where:{supplyId_productId:{supplyId:f,productId:w}}});return await _.supply.update({where:{id:f},data:{total:{decrement:S.quantity*S.price},supplyProducts:{update:{where:{supplyId_productId:{supplyId:f,productId:w}},data:{product:{update:{stock:{decrement:S.quantity}}}}},delete:{supplyId_productId:{supplyId:f,productId:w}}}},include:{provider:!0,supplyProducts:{include:{product:!0}}}})}async function P4(f,w,S){let v=await _.productOnSupply.findUniqueOrThrow({where:{supplyId_productId:{supplyId:f,productId:w}}}),q=S.unitPrice*S.quantity-v.price*v.quantity,h=v.quantity-S.quantity;return await _.supply.update({where:{id:f},data:{total:{increment:q},supplyProducts:{update:{where:{supplyId_productId:{supplyId:f,productId:w}},data:{quantity:S.quantity,price:S.unitPrice,product:{update:{stock:{increment:h}}}}}}},include:{provider:!0,supplyProducts:{include:{product:!0}}}})}var k4=A.object({quantity:A.number(),unitPrice:A.number()}),y1=A.object({supplyId:A.string().regex(/^\d+$/).transform(Number),productId:A.string()}),l4=new Hf().post("/:productId",F("param",y1),F("json",k4),async(f)=>{let{supplyId:w,productId:S}=f.req.valid("param"),v=f.req.valid("json"),q=await F4(w,S,v);return f.json(q)}).delete("/:productId",F("param",y1),async(f)=>{let{supplyId:w,productId:S}=f.req.valid("param"),v=await C4(w,S);return f.json(v)}).put("/:productId",F("param",y1),F("json",k4),async(f)=>{let{supplyId:w,productId:S}=f.req.valid("param"),v=f.req.valid("json"),q=await P4(w,S,v);return f.json(q)});import{promisify as fg}from"util";import{execFile as wg}from"child_process";var I4=fg(wg),V7=p("path"),r4=new Hf().route("/users",aH).get("/backups",async(f)=>{let S=`exec ${Bun.env.DATABASE_CONTAINER} ls -l /var/db_backups`,v=await I4("docker",S.split(" "));if(v.stderr)throw new bf(500,{message:v.stderr});console.log(v.stdout);let q=v.stdout.split(`
`).filter((h)=>h.includes(".dump")).map((h)=>{let H=h.split(" "),$=H.at(-1),j=H.at(-5);return{name:$,size:j+" bytes"}});return f.json({files:q})}).post("/backups",async(f)=>{let w=Bun.env.DATABASE_CONTAINER,S=await I4("ls");if(S.stderr)throw new bf(500,{message:S.stderr});return f.json({message:S.stdout})}).use(_f()).route("/products",eH).route("/categories",H4).route("/providers",B4).route("/sales/:saleId/products",K4).route("/sales",Q4).route("/supplies/:supplyId/products",l4).route("/supplies",D4);var iS=i0(PS(),1);var m1={RecordNotFound:"P2025",UniqueConstraintViolation:"P2002",ForeignKeyConstraintViolation:"P2020"};async function x4(f,w){if(Bun.env.NODE_ENV!=="production")console.log("<--------- Error Handler --------->"),console.log(f),console.log("</--------- Error Handler --------->");let S=w.json({message:"Internal Server Error"},500);if(f instanceof bf)return f.getResponse();if(f instanceof iS.PrismaClientKnownRequestError)switch(f.code){case m1.RecordNotFound:let v=f.meta?.modelName??"Record",q=f.meta?.cause??"not found";return w.text(`${v} not found ${q}`,404);case m1.UniqueConstraintViolation:let h=f.meta?.target??"field",H=f.meta?.value??"value";return w.json({message:`A record with ${h} ${H} already exists`},409);case m1.ForeignKeyConstraintViolation:let $=f.meta?.relationName??"relation";return w.json({message:`Cannot delete record because of existing ${$}`},409);default:return S}if(f instanceof iS.PrismaClientInitializationError)return w.json({message:"Database is not connected"},500);return S}import{existsSync as Jg}from"fs";import{stat as $g}from"fs/promises";var y4=/^\s*(?:text\/(?!event-stream(?:[;\s]|$))[^;\s]+|application\/(?:javascript|json|xml|xml-dtd|ecmascript|dart|postscript|rtf|tar|toml|vnd\.dart|vnd\.ms-fontobject|vnd\.ms-opentype|wasm|x-httpd-php|x-javascript|x-ns-proxy-autoconfig|x-sh|x-tar|x-virtualbox-hdd|x-virtualbox-ova|x-virtualbox-ovf|x-virtualbox-vbox|x-virtualbox-vdi|x-virtualbox-vhd|x-virtualbox-vmdk|x-www-form-urlencoded)|font\/(?:otf|ttf)|image\/(?:bmp|vnd\.adobe\.photoshop|vnd\.microsoft\.icon|vnd\.ms-dds|x-icon|x-ms-bmp)|message\/rfc822|model\/gltf-binary|x-shader\/x-fragment|x-shader\/x-vertex|[^;\s]+?\+(?:json|text|xml|yaml))(?:[;\s]|$)/i;var m4=(f)=>{let w=f.filename,S=f.defaultDocument||"index.html";if(w.endsWith("/"))w=w.concat(S);else if(!w.match(/\.[a-zA-Z0-9_-]+$/))w=w.concat("/"+S);return aS({root:f.root,filename:w})},aS=(f)=>{let w=f.root||"",S=f.filename;if(/(?:^|[\/\\])\.\.(?:$|[\/\\])/.test(S))return;S=S.replace(/^\.?[\/\\]/,""),S=S.replace(/\\/,"/"),w=w.replace(/\/$/,"");let v=w?w+"/"+S:S;if(v=v.replace(/^\.?\//,""),w[0]!=="/"&&v[0]==="/")return;return v};var T1=(f,w=vg)=>{let S=/\.([a-zA-Z0-9]+?)$/,v=f.match(S);if(!v)return;let q=w[v[1]];if(q&&q.startsWith("text"))q+="; charset=utf-8";return q};var Sg={aac:"audio/aac",avi:"video/x-msvideo",avif:"image/avif",av1:"video/av1",bin:"application/octet-stream",bmp:"image/bmp",css:"text/css",csv:"text/csv",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gif:"image/gif",gz:"application/gzip",htm:"text/html",html:"text/html",ico:"image/x-icon",ics:"text/calendar",jpeg:"image/jpeg",jpg:"image/jpeg",js:"text/javascript",json:"application/json",jsonld:"application/ld+json",map:"application/json",mid:"audio/x-midi",midi:"audio/x-midi",mjs:"text/javascript",mp3:"audio/mpeg",mp4:"video/mp4",mpeg:"video/mpeg",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",opus:"audio/opus",otf:"font/otf",pdf:"application/pdf",png:"image/png",rtf:"application/rtf",svg:"image/svg+xml",tif:"image/tiff",tiff:"image/tiff",ts:"video/mp2t",ttf:"font/ttf",txt:"text/plain",wasm:"application/wasm",webm:"video/webm",weba:"audio/webm",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xml:"application/xml",zip:"application/zip","3gp":"video/3gpp","3g2":"video/3gpp2",gltf:"model/gltf+json",glb:"model/gltf-binary"},vg=Sg;var T4={br:".br",zstd:".zst",gzip:".gz"},qg=Object.keys(T4),hg="index.html",Hg=(f)=>f,u4=(f)=>{let w=!1,S;if(f.root)if(f.root.startsWith("/"))w=!0,S=new URL(`file://${f.root}`).pathname;else S=f.root;return async(v,q)=>{if(v.finalized){await q();return}let h=f.path??decodeURI(v.req.path);if(h=f.rewriteRequestPath?f.rewriteRequestPath(h):h,!h.endsWith("/")&&f.isDir){let J=aS({filename:h,root:S});if(J&&await f.isDir(J))h+="/"}let H=m4({filename:h,root:S,defaultDocument:hg});if(!H)return await q();if(w)H="/"+H;let $=f.getContent,j=f.pathResolve??Hg;H=j(H);let b=await $(H,v);if(!b){let J=aS({filename:h,root:S});if(!J)return await q();if(J=j(J),J!==H){if(b=await $(J,v),b)H=J}}if(b instanceof Response)return v.newResponse(b.body,b);if(b){let J=f.mimes&&T1(H,f.mimes)||T1(H);if(v.header("Content-Type",J||"application/octet-stream"),f.precompressed&&(!J||y4.test(J))){let O=new Set(v.req.header("Accept-Encoding")?.split(",").map((g)=>g.trim()));for(let g of qg){if(!O.has(g))continue;let B=await $(H+T4[g],v);if(B){b=B,v.header("Content-Encoding",g),v.header("Vary","Accept-Encoding",{append:!0});break}}}return await f.onFound?.(H,v),v.body(b)}await f.onNotFound?.(H,v),await q();return}};var u1=(f)=>{return async function w(S,v){return u4({...f,getContent:async($)=>{$=$.startsWith("/")?$:`./${$}`;let j=Bun.file($);return await j.exists()?j:null},pathResolve:($)=>{return $.startsWith("/")?$:`./${$}`},isDir:async($)=>{let j;try{j=(await $g($)).isDirectory()}catch{}return j}})(S,v)}};var n1="x-hono-disable-ssg",n7=(()=>{try{return new Response("SSG is disabled",{status:404,headers:{[n1]:"true"}})}catch{return null}})();var{write:YX}=Bun;var jg=class{#f;constructor(f){this.#f=f,this.raw=f.raw,this.url=f.url?new URL(f.url):null,this.protocol=f.protocol??null}send(f,w){this.#f.send(f,w??{})}raw;binaryType="arraybuffer";get readyState(){return this.#f.readyState}url;protocol;close(f,w){this.#f.close(f,w)}};var Og=Bun.env.PORT??3000,oS=new Hf().use(bv()).use(Jv()).onError(x4).notFound((f)=>f.text(` 404 Not Found route ${f.req.url}`)),dX=oS.route("/api",r4);if(Jg("../frontend/dist/server/entry.mjs")){let{handler:f}=await import("../../frontend/dist/server/entry.mjs");oS.use("/*",u1({root:"../frontend/dist/client/"})),oS.use((w)=>{return f(w)})}else console.error("Frontend not founds");var gg=Bun.serve({fetch:oS.fetch,port:Og});console.log(`Server running on http://localhost:${gg.port}`);


// Created by JoseDv1
// Build Time 2/25/2025, 1:48:04 PM
	

//# debugId=F366D2A1E91AB12864756E2164756E21
